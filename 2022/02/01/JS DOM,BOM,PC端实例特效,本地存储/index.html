<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>My Javascript DOM, BOM, storage etc notes | Harry World</title><meta name="keywords" content="frontend,javascript"><meta name="author" content="Harry Qu"><meta name="copyright" content="Harry Qu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="# Javascript DOM and BOM [TOC] # 1. Web API # Web APIs 与 JS 基础关联性 # js 的组成  JS 基础阶段：  我们学习的是 ECMAscript 标准规定的基本语法 要求同学们掌握 Js 基础语法 只学习基本语法，做不了常用的网页交互效果 目的是为了 Js 后面的课程打基础、做铺垫  Web APIs 阶段：  web APIs 是 w">
<meta property="og:type" content="article">
<meta property="og:title" content="My Javascript DOM, BOM, storage etc notes">
<meta property="og:url" content="https://harryqu1229.github.io/2022/02/01/JS%20DOM,BOM,PC%E7%AB%AF%E5%AE%9E%E4%BE%8B%E7%89%B9%E6%95%88,%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8/index.html">
<meta property="og:site_name" content="Harry World">
<meta property="og:description" content="# Javascript DOM and BOM [TOC] # 1. Web API # Web APIs 与 JS 基础关联性 # js 的组成  JS 基础阶段：  我们学习的是 ECMAscript 标准规定的基本语法 要求同学们掌握 Js 基础语法 只学习基本语法，做不了常用的网页交互效果 目的是为了 Js 后面的课程打基础、做铺垫  Web APIs 阶段：  web APIs 是 w">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://raw.githubusercontent.com/HarryQu1229/image-host/9575054fd0f7d407d7b7d5343dfc530a06ed4104/notes-img/cat.png">
<meta property="article:published_time" content="2022-01-31T11:00:00.000Z">
<meta property="article:modified_time" content="2022-02-25T15:04:32.808Z">
<meta property="article:author" content="Harry Qu">
<meta property="article:tag" content="frontend">
<meta property="article:tag" content="javascript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/HarryQu1229/image-host/9575054fd0f7d407d7b7d5343dfc530a06ed4104/notes-img/cat.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://harryqu1229.github.io/2022/02/01/JS%20DOM,BOM,PC%E7%AB%AF%E5%AE%9E%E4%BE%8B%E7%89%B9%E6%95%88,%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":100,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#C78550","bgDark":"#c08eaf","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'My Javascript DOM, BOM, storage etc notes',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-02-26 04:04:32'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><style type="text/css">.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover{left:0!important}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/css/flink.min.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/6aca34ee52f40fe1b2d637474f90111e2c151939/notes-img/%E5%85%B6%E4%B8%AD%E5%8C%85%E6%8B%AC%E5%9B%BE%E7%89%87%EF%BC%9A%7B%7B%20pinTitle%20%7D%7D_m6kogp.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">171</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">89</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">60</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-graduation-cap"></i><span> Journey</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> Hobbies</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/Photos/"><i class="fa-fw fas fa-images"></i><span> Photos</span></a></li><li><a class="site-page child" href="/Videos/"><i class="fa-fw fa-regular fa-play"></i><span> Videos</span></a></li><li><a class="site-page child" href="/Movies/"><i class="fa-fw fas fa-video"></i><span> Movies</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://geekboots.sfo2.cdn.digitaloceanspaces.com/post/javascript-1567486564472.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Harry World</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-graduation-cap"></i><span> Journey</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> Hobbies</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/Photos/"><i class="fa-fw fas fa-images"></i><span> Photos</span></a></li><li><a class="site-page child" href="/Videos/"><i class="fa-fw fa-regular fa-play"></i><span> Videos</span></a></li><li><a class="site-page child" href="/Movies/"><i class="fa-fw fas fa-video"></i><span> Movies</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">My Javascript DOM, BOM, storage etc notes</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-01-31T11:00:00.000Z" title="Created 2022-02-01 00:00:00">2022-02-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-02-25T15:04:32.808Z" title="Updated 2022-02-26 04:04:32">2022-02-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Frontend/">Frontend</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">38.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>147min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="My Javascript DOM, BOM, storage etc notes"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">Comments:</span><span class="disqus-comment-count"><a href="https://harryqu1229.github.io/2022/02/01/JS%20DOM,BOM,PC%E7%AB%AF%E5%AE%9E%E4%BE%8B%E7%89%B9%E6%95%88,%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8/#disqus_thread"></a></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="javascript-dom-and-bom"><a class="markdownIt-Anchor" href="#javascript-dom-and-bom">#</a> Javascript DOM and BOM</h1>
<p>[TOC]</p>
<h1 id="1-web-api"><a class="markdownIt-Anchor" href="#1-web-api">#</a> 1. Web API</h1>
<h2 id="web-apis与js基础关联性"><a class="markdownIt-Anchor" href="#web-apis与js基础关联性">#</a> Web APIs 与 JS 基础关联性</h2>
<h3 id="js的组成"><a class="markdownIt-Anchor" href="#js的组成">#</a> js 的组成</h3>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072042024.png" alt="在这里插入图片描述"></p>
<p><strong>JS 基础阶段：</strong></p>
<ul>
<li>我们学习的是 ECMAscript 标准规定的基本语法</li>
<li>要求同学们掌握 Js 基础语法</li>
<li>只学习基本语法，做不了常用的网页交互效果</li>
<li>目的是为了 Js 后面的课程打基础、做铺垫</li>
</ul>
<p><strong>Web APIs 阶段：</strong></p>
<ul>
<li>web APIs 是 w3c 组织的标准</li>
<li>web APIs 我们主要学习 DoM 和 BOM</li>
<li>web APIs 是我们 Js 所独有的部分</li>
<li>我们主要学习页面交互功能</li>
<li>需要使用 Js 基础的课程内容做基础<br>
 Js 基础学习 ECMAscript 基础语法为后面作铺垫，web APIs 是 Js 的应用，大量使用 Js 基础语法做交互效果</li>
</ul>
<hr>
<h2 id="api和web-api"><a class="markdownIt-Anchor" href="#api和web-api">#</a> API 和 Web API</h2>
<h3 id="api"><a class="markdownIt-Anchor" href="#api">#</a> API</h3>
<ul>
<li>API (Application Programming Interface, 应用程序编程接口) 是一些预先定义的函数，目的是__提供应用程序与开发人员基于某软件或硬件得以访问一组例程的能力，而又无需访问源码，或理解内部工作机制的细节__。</li>
<li>简单理解︰API 是给程序员提供的一种工具，以便能更轻松的实现想要完成的功能。<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072042057.png" alt="在这里插入图片描述"><br>
比如手机充电的接口∶我们要实现充电这个功能:<br>
●我们不关心手机内部变压器，内部怎么存储电等<br>
●我们不关心这个充电线怎么制作的<br>
●我们只知道，我们拿着充电线插进充电接口就可以充电<br>
●这个充电接口就是一个 API</li>
</ul>
<h3 id="web-api"><a class="markdownIt-Anchor" href="#web-api">#</a> Web API</h3>
<ul>
<li>Web API 是浏览器__提供的一套操作浏览器功能和页面元素的 API__(BOM 和 DOM).</li>
<li>现阶段我们主要针对于浏览器讲解常用的 API，主要针对浏览器做交互效果。</li>
<li>比如我们想要浏览器弹出一个警示框，直接使用 alert (“3 弹出’)</li>
<li>MDN 详细 APl : <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/API">https://developer.mozilla.org/zh-CN/docs/Web/API</a></li>
<li>因为 Web API 很多，所以我们将这个阶段称为 Web APIs</li>
</ul>
<h3 id="api和web-api总结"><a class="markdownIt-Anchor" href="#api和web-api总结">#</a> API 和 Web API 总结</h3>
<ol>
<li>API 是为我们程序员提供的一个接口，帮助我们实现某种功能，我们会使用就可以了，不必纠结内部如何实现</li>
<li>Web API 主要是针对于浏览器提供的接口，主要针对于浏览器做交互效果。</li>
<li>Web API 一般都有输入和输出（函数的传参和返回值），WebAPI 很多都是方法（函数)</li>
<li>学习 Web API 可以结合前面学习内置对象方法的思路学习</li>
</ol>
<hr>
<h1 id="2-dom"><a class="markdownIt-Anchor" href="#2-dom">#</a> 2. DOM</h1>
<p>学习目标：</p>
<ul>
<li>能够说出什么是 DOM</li>
<li>能够获取页面元素</li>
<li>能够给元素注册事件</li>
<li>能够操作 DOM 元素的属性</li>
<li>能够创建元素</li>
<li>能够操作 DOM 节点</li>
</ul>
<h2 id="dom简介"><a class="markdownIt-Anchor" href="#dom简介">#</a> DOM 简介</h2>
<ul>
<li>文档对象模型（Document Object Model，简称 DOM），是 W3C 组织推荐的处理可扩展标记语言（HTML 或者 XML）的__标准编程接口__</li>
<li>W3C 已经定义了一系列的 DOM 接口，通过这些 DOM 接口可以改变网页的内容、结构和样式。<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072042017.png" alt="在这里插入图片描述"></li>
<li>文档：<strong>一个页面 (a website page) 就是一个文档</strong>，DOM 中使用 doucument 来表示</li>
<li>元素：页面中的所有__标签__都是元素，DOM 中使用 <strong>element</strong> 表示</li>
<li>节点：网页中的所有__内容__都是节点（标签，属性，文本，注释等<mark>都可以被看做是个节点，当前页面的所有内容都可以叫做节点</mark>），DOM 中使用__node__表示</li>
<li><strong><mark>DOM 把以上内容都看做是对象</mark></strong></li>
</ul>
<hr>
<h2 id="获取元素"><a class="markdownIt-Anchor" href="#获取元素">#</a> 获取元素</h2>
<ol>
<li>如何获取页面元素？ DOM 在我们实际开发中主要用来操作元素。</li>
<li>我们如何来获取页面中的元素呢？获取页面中的元素可以使用以下几种方式：根据 ID 获取、根据标签名获取、通过 HTML5 新增的方法获取、特殊元素获取</li>
</ol>
<h3 id="1-根据id获取"><a class="markdownIt-Anchor" href="#1-根据id获取">#</a> 1. 根据 ID 获取</h3>
<p>使用  <code>getElementByld()</code>  方法可以获取带 ID 的__元素对象 (也就是那个标签)<strong>: <code>doucument.getElementByld('id名')</code> <br>
 使用  <code>console.dir()</code>  可以__打印我们获取的元素对象，更好的查看对象里面的属性和方法。</strong></p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>time<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>2019-9-9<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 1.因为我们文档页面从上往下加载，所以得先有标签，所以script写在标签下面</span>
    <span class="token comment">// 2.get 获得 element 元素 by 通过 驼峰命名法</span>
    <span class="token comment">// 3.参数 id是大小写敏感的字符串</span>
    <span class="token comment">// 4.返回的是一个元素对象</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'time'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 5. console.dir 打印我们的元素对象，更好的查看里面的属性和方法</span>
    console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意我们不再把 script 标签放到 body 部分而是按照想要放的位置，因为文档页面从上往下加载，我们需要先加载那个 div 标签，然后 script 再获取那个标签，<mark> 有了这个元素才可以获取它</mark></p>
</blockquote>
<blockquote>
<p>注意是 <code>document.getElementById('...');</code></p>
</blockquote>
<blockquote>
<p>这个 timer 变量通过 id 获取到了这个标签，也就是说现在你要是 <code>console.log(timer);</code></p>
<p>显示的就是 <code>&lt;div id=&quot;time&quot;&gt;2019-9-9&lt;/div&gt;</code>  这个一整个标签 (这一个整个标签也就是 DOM Element 对象 (元素对象，element object))</p>
</blockquote>
<hr>
<h3 id="2-根据标签名获取"><a class="markdownIt-Anchor" href="#2-根据标签名获取">#</a> 2. 根据标签名获取</h3>
<p>根据标签名获取，使用  <code>getElementByTagName()</code>  方法可以返回带有指定标签名的对象的集合: <code>doucument.getElementsByTagName('标签名');</code></p>
<ul>
<li>因为得到的是一个__<mark>对象的集合</mark><strong>，所以我们想要__操作里面的元素就需要遍历</strong></li>
<li>得到元素对象是动态的，也就说获取到的标签里面内容变了 (比如说写的文字),js 也会获取到变化后的</li>
<li>返回的是获取过来元素对象的集合，以__伪数组__的形式存储</li>
<li><strong>如果获取不到元素，则返回为空的伪数组 (因为获取不到对象)</strong></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>ul<span class="token operator">></span>
    <span class="token operator">&lt;</span>li<span class="token operator">></span>知否知否，应是等你好久<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token operator">&lt;</span>li<span class="token operator">></span>知否知否，应是等你好久<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token operator">&lt;</span>li<span class="token operator">></span>知否知否，应是等你好久<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token operator">&lt;</span>li<span class="token operator">></span>知否知否，应是等你好久<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token operator">&lt;</span>li<span class="token operator">></span>知否知否，应是等你好久<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
<span class="token operator">&lt;</span>script<span class="token operator">></span>
    <span class="token comment">// 1.返回的是获取过来元素对象的集合 以伪数组的形式存储</span>
    <span class="token keyword">var</span> lis <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lis<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lis<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2.依次打印,遍历</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">// 3.如果页面中只有 1 个 li，返回的还是伪数组的形式</span>
    <span class="token comment">// 4.如果页面中没有这个元素，返回的是空伪数组</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>记住返回的是伪数组，就算只有一个结果也是存在伪数组里.</p>
<p>如果没有该标签，返回的也是伪数组不过是空的伪数组</p>
</blockquote>
<h4 id="根据子标签名从父标签获取所有子元素"><a class="markdownIt-Anchor" href="#根据子标签名从父标签获取所有子元素">#</a> 根据子标签名从父标签获取所有子元素</h4>
<p>还可以根据标签名获取某个元素（父元素）内部所有指定标签名的子元素，获取的时候__不包括父元素自己__</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">element<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'标签名'</span><span class="token punctuation">)</span>
ol<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>注意：<strong>父元素必须是单个对象 (必须指明是哪一个元素对象)</strong>，获取的时候不包括父元素自己</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
	<span class="token comment">//element.getElementsByTagName('标签名'); 父元素必须是指定的单个元素</span>
    <span class="token keyword">var</span> ol <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'ol'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ol<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>在上面，先是通过 id 获取到了父元素的元素对象，然后再从父元素的元素对象获取到这个父元素有的所有的 li 标签</p>
</blockquote>
<blockquote>
<p>这个跟 document.getElementsByTagName (‘标签名’) 很像，只不过如果用 document 指的就是当前的文档对象 (我们不用 new 出来本来就有的), 然后再按照标签名获取元素会返回当前文档 (页面)__所有__对应的标签对象.</p>
</blockquote>
<hr>
<h3 id="3-通过h5新增方法获取通过类名class等"><a class="markdownIt-Anchor" href="#3-通过h5新增方法获取通过类名class等">#</a> 3. 通过 H5 新增方法获取 (通过类名 (class) 等)</h3>
<ol>
<li>getElementsByClassName 根据类名返回__元素对象合集__ : <code>document.getElementsByClassName('类名');</code></li>
<li>document.querySelector 根据指定选择器返回__第一个元素对象__</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'选择器'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 切记里面的选择器需要加符号 </span>
<span class="token comment">// 类选择器.box </span>
<span class="token comment">// id选择器 #nav</span>
<span class="token keyword">var</span> firstBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol start="3">
<li>document.querySelectorAll 根据指定选择器返回所有元素对象: <code>document.querySelectorAll('选择器');</code></li>
</ol>
<blockquote>
<p>注意：querySelector 和 querySelectorAll 里面的选择器需要加符号，比如:  <code>document.querySelector(’#nav’);</code></p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
    <span class="token comment">// 1. getElementsByClassName 根据类名获得某些元素集合</span>
    <span class="token keyword">var</span> boxs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByClassName</span><span class="token punctuation">(</span><span class="token string">'box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>boxs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2. querySelector 返回指定选择器的第一个元素对象  切记 里面的选择器需要加符号 .box  #nav</span>
    <span class="token keyword">var</span> firstBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>firstBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> nav <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#nav'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nav<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3. querySelectorAll()返回指定选择器的所有元素对象集合</span>
    <span class="token keyword">var</span> allBox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>allBox<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> lis <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lis<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>选择器就跟 CSS 里面的一样写法，只不过 querySelector 只是返回第一个对应这个选择器的元素对象，而 querySelectorAll 返回的是所有对应这个选择器的元素的元素对象集合.</p>
</blockquote>
<hr>
<h3 id="获取特殊元素"><a class="markdownIt-Anchor" href="#获取特殊元素">#</a> 获取特殊元素</h3>
<ol>
<li>获取 body 元素 返回 body 元素对象</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> x <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ol>
<li>获取 html 元素 返回 html 元素对象</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> y <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<hr>
<h1 id="3-事件基础event"><a class="markdownIt-Anchor" href="#3-事件基础event">#</a> 3. 事件基础 (EVENT)</h1>
<h2 id="事件概述"><a class="markdownIt-Anchor" href="#事件概述">#</a> 事件概述</h2>
<ul>
<li>JavaScript 使我们有能力创建动态页面，而事件是可以被 JavaScript 侦测到的行为。</li>
<li>简单理解： 触发 — 响应机制。</li>
<li><strong>网页中的每个元素都可以产生某些可以触发 JavaScript 的事件</strong>，例如，我们可以在用户点击某按钮时产生一个事件，然后去执行某些操作。</li>
</ul>
<h3 id="事件三要素"><a class="markdownIt-Anchor" href="#事件三要素">#</a> 事件三要素</h3>
<ol>
<li>事件源 (谁)-&gt; 事件被触发的对象，e.g. a button, etc…</li>
<li>事件类型 (什么事件)-&gt; 如何触发的事件，e.g. hover, onclick, etc…</li>
<li>事件处理程序 (做啥)-&gt; 通过一个函数赋值的方式完成 (assigning a function as value)</li>
</ol>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation attr-equals">=</span> <span class="token punctuation">"</span>btn<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>BUTTON<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">// 点击一个按钮，弹出对话框</span>
    <span class="token comment">// 事件是有三部分组成  事件源  事件类型  事件处理程序   我们也称为事件三要素</span>
    <span class="token comment">//(1) 获取事件源</span>
    <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'btn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//(2) 事件类型  如何触发 什么事件 比如鼠标点击(onclick) 还是鼠标经过 还是键盘按下</span>
    <span class="token comment">//(3) 事件处理程序  通过一个函数赋值的方式 完成</span>
    btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'点秋香'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> <span class="token comment">//之前忘讲了,这里没有";"结尾</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h3 id="执行事件的步骤"><a class="markdownIt-Anchor" href="#执行事件的步骤">#</a> 执行事件的步骤</h3>
<ol>
<li>获取事件源</li>
<li>注册事件 (绑定事件)</li>
<li>添加事件处理程序 (采取函数赋值形式)</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
    <span class="token comment">// 执行事件步骤</span>
    <span class="token comment">// 点击div 控制台输出 我被选中了</span>
    <span class="token comment">// 1. 获取事件源</span>
    <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 2.绑定事件 注册事件</span>
    <span class="token comment">// div.onclick </span>
    <span class="token comment">// 3.添加事件处理程序 </span>
    div<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我被选中了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="鼠标事件"><a class="markdownIt-Anchor" href="#鼠标事件">#</a> 鼠标事件</h2>
<table>
<thead>
<tr>
<th style="text-align:left">鼠标事件</th>
<th style="text-align:left">触发条件</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">onclick</td>
<td style="text-align:left">鼠标点击左键触发</td>
</tr>
<tr>
<td style="text-align:left">onmouseover</td>
<td style="text-align:left">鼠标经过触发</td>
</tr>
<tr>
<td style="text-align:left">onmouseout</td>
<td style="text-align:left">鼠标离开触发</td>
</tr>
<tr>
<td style="text-align:left">onfocus</td>
<td style="text-align:left">获得鼠标焦点触发</td>
</tr>
<tr>
<td style="text-align:left">onblur</td>
<td style="text-align:left">失去鼠标焦点触发</td>
</tr>
<tr>
<td style="text-align:left">onmousemove</td>
<td style="text-align:left">鼠标移动触发</td>
</tr>
<tr>
<td style="text-align:left">onmouseup</td>
<td style="text-align:left">鼠标弹起触发</td>
</tr>
<tr>
<td style="text-align:left">onmousedown</td>
<td style="text-align:left">鼠标按下触发</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="操作元素"><a class="markdownIt-Anchor" href="#操作元素">#</a> 操作元素</h2>
<p>JavaScript 的 DOM 操作可以改变网页内容、结构和样式，我们可以利用 DOM 操作元素来改变元素里面的内容 、属性等。注意以下都是属性</p>
<h3 id="1-改变元素内容"><a class="markdownIt-Anchor" href="#1-改变元素内容">#</a> 1. 改变元素内容</h3>
<p><strong> <code>innerText</code>  从起始位置到终止位置的内容，但它去除 html 标签，同时空格和换行也会去掉.<mark> 也就是说我们在修改内容的时候要是加上了 HTML 标签等都不会起作用</mark></strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">element<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token operator">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><strong> <code>innerHTM</code>  起始位置到终止位置的全部内容，包括 HTML 标签，同时保留空格和换行.<mark> 这个我们修改里面内容可以加 html 标签，都可以识别的</mark></strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">element<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token operator">...</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>
        我是文字
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
        <span class="token comment">// innerText 和 innerHTML的区别 </span>
        <span class="token comment">// 1. innerText 不识别html标签,去除空格和换行</span>
        <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        div<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token string">'&lt;strong>今天是：&lt;/strong> 2019'</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 2. innerHTML 识别html标签,保留空格和换行的</span>
        div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'&lt;strong>今天是：&lt;/strong> 2019'</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 这两个属性是可读写的  可以获取元素里面的内容</span>
        <span class="token keyword">var</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072043519.png" alt="在这里插入图片描述" style="zoom:150%;" />
<blockquote>
<p>innerText 在修改或者读取的时候都是不会考虑 html 标签的 (你修改的时候加 html 标签不会起作用，然后读取出来的也不会带有 html 标签)</p>
<p>去除空格和换行，读取来也是去除的</p>
</blockquote>
<blockquote>
<p>innerHTml 在修改或者读取的时候都会考虑 html 标签的 (你修改的时候加 html 标签会起作用，然后__读取出来的也会带有 html 标签__)</p>
<p>不去除空格和换行，读取来也是按照原样的</p>
</blockquote>
<blockquote>
<p>注意 innerHTML 和 innerText 无法对表单里面的标签使用，只能对普通盒子如 div 使用</p>
<p>表单里面的比如说 type=&quot;text&quot; 的需要修改他的 value 而不是 innerText/innerHTML.</p>
</blockquote>
<hr>
<h3 id="2-改变元素属性"><a class="markdownIt-Anchor" href="#2-改变元素属性">#</a> 2. 改变元素属性</h3>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// img.属性</span>
img<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">"xxx"</span><span class="token punctuation">;</span>

input<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">"xxx"</span><span class="token punctuation">;</span>
input<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"xxx"</span><span class="token punctuation">;</span>
input<span class="token punctuation">.</span>checked <span class="token operator">=</span> <span class="token string">"xxx"</span><span class="token punctuation">;</span>
input<span class="token punctuation">.</span>selected <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token operator">/</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
input<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token operator">/</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h3 id="3-改变样式属性"><a class="markdownIt-Anchor" href="#3-改变样式属性">#</a> 3. 改变样式属性</h3>
<p>我们可以通过 JS 修改元素的大小、颜色、位置等样式。</p>
<ul>
<li>行内样式操作</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// element.style</span>
div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'pink'</span><span class="token punctuation">;</span>
div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">'250px'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>这个其实在最后会变成在 html 标签那里的行内样式，所以权威比在 body 那写 css 更高 (参考 CSS 权威)</p>
</blockquote>
<ul>
<li>类名样式操作</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// element.className</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>
<p>用这个就可以直接改这个标签 (元素对象) 的 class, 然后 CSS 先写好对应的类名然后里面等等的样式属性</p>
<p>这样就不用在 JS 里面写大量的 CSS 样式，而是直接改 class 的值就行了</p>
</blockquote>
<p>注意：</p>
<ol>
<li>JS 里面的样式采取驼峰命名法，比如 fontSize ，backgroundColor</li>
<li>JS 修改 style 样式操作 ，产生的是行内样式，CSS 权重比较高</li>
<li>如果样式修改较多，可以采取操作类名方式更改元素样式</li>
<li>class 因为是个保留字，因此使用 className 来操作元素类名属性</li>
<li>className 会直接更改元素的类名，会覆盖原先的类名</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"first"</span><span class="token operator">></span>文本<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 1. 使用 element.style 获得修改元素样式  如果样式比较少 或者 功能简单的情况下使用</span>
        <span class="token keyword">var</span> test <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        test<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// this.style.backgroundColor = 'purple';</span>
            <span class="token comment">// this.style.color = '#fff';</span>
            <span class="token comment">// this.style.fontSize = '25px';</span>
            <span class="token comment">// this.style.marginTop = '100px';</span>
            <span class="token comment">// 让我们当前元素的类名改为了 change</span>
            <span class="token comment">// this.className = 'change';</span>

            <span class="token comment">// 2. 我们可以通过 修改元素的className更改元素的样式 适合于样式较多或者功能复杂的情况</span>
            <span class="token comment">// 3. 如果想要保留原先的类名，我们可以这么做 多类名选择器</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'first change'</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>事件函数里面可以用 this,<strong> 这个事件函数里面的 this 代表的是这个事件函数的调用者</strong></p>
<p>这里的 this 指的就是 test 这个存了元素对象的变量 (引用)</p>
</blockquote>
<blockquote>
<p>这里改类名其实就是重新赋值只不过把之前的类名也给写上了，其实就是把这个标签的 class 为之前的和现在的都是 (CSS 的多类名选择器) 注意会选择哪个，权重，覆盖等</p>
</blockquote>
<hr>
<h3 id="总结"><a class="markdownIt-Anchor" href="#总结">#</a> 总结</h3>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072043604.png" alt="在这里插入图片描述"></p>
<hr>
<h3 id="排他思想"><a class="markdownIt-Anchor" href="#排他思想">#</a> 排他思想</h3>
<p>如果有同一组元素，我们相要某一个元素实现某种样式，需要用到循环的排他思想算法：</p>
<ul>
<li>所有元素全部清除样式（干掉其他人）</li>
<li>给当前元素设置样式 （留下我自己）</li>
<li>注意顺序不能颠倒，首先干掉其他人，再设置自己</li>
</ul>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>按钮1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>按钮2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>按钮3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>按钮4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span><span class="token punctuation">></span></span>按钮5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
        <span class="token comment">// 1. 获取所有按钮元素</span>
        <span class="token keyword">var</span> btns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// btns得到的是伪数组  里面的每一个元素 btns[i]</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> btns<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            btns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                <span class="token comment">// (1) 我们先把所有的按钮背景颜色去掉  干掉所有人</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> btns<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                    btns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
                <span class="token comment">// (2) 然后才让当前的元素背景颜色为pink 留下我自己</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'pink'</span><span class="token punctuation">;</span>

            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">//2. 首先先排除其他人，然后才设置自己的样式 这种排除其他人的思想我们成为排他思想</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072043550.gif" alt="在这里插入图片描述"></p>
<hr>
<h2 id="自定义属性"><a class="markdownIt-Anchor" href="#自定义属性">#</a> 自定义属性</h2>
<h3 id="获取属性值"><a class="markdownIt-Anchor" href="#获取属性值">#</a> 获取属性值</h3>
<ul>
<li>获取__内置属性值__(元素本身自带的属性)： <code>element.属性;</code></li>
<li>获取__自定义的属性__： <code>element.getAttribute('属性');</code></li>
</ul>
<h3 id="设置属性值"><a class="markdownIt-Anchor" href="#设置属性值">#</a> 设置属性值</h3>
<ul>
<li>设置__内置属性值__: <code>element.属性 = '值';</code></li>
<li>主要设置__自定义的属性__: <code>element.setAttribute('属性', 值);</code></li>
</ul>
<blockquote>
<p>如果有我们设置的自定义属性 (可以这么干就跟内置属性的写法一样只不过不是内置属性), 我们__就必须要用 getAttribute 和 setAttribute 来获得该自定义属性的值，当然也可以用来修改我们内置属性__</p>
</blockquote>
<h3 id="移除属性"><a class="markdownIt-Anchor" href="#移除属性">#</a> 移除属性</h3>
<blockquote>
<p>移除属性  <code>removeAttribute('属性')</code></p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"demo"</span> index<span class="token operator">=</span><span class="token string">"1"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"nav"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1. 获取元素的属性值</span>
        <span class="token comment">// (1) element.属性</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//(2) element.getAttribute('属性')  get得到获取 attribute 属性的意思 我们程序员自己添加的属性我们称为自定义属性 index</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2. 设置元素属性值</span>
        <span class="token comment">// (1) element.属性= '值'</span>
        div<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">'test'</span><span class="token punctuation">;</span>
        div<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'navs'</span><span class="token punctuation">;</span>
        <span class="token comment">// (2) element.setAttribute('属性', '值');  主要针对于自定义属性</span>
        div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'class'</span><span class="token punctuation">,</span> <span class="token string">'footer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// class 特殊  这里面写的就是class 不是className</span>
        <span class="token comment">// 3 移除属性 removeAttribute(属性)    </span>
        div<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意如果有个属性时 class (内置属性), 要修改是</p>
<p>div.className = … // 是 className</p>
<p>div.setAttribute (‘class’, ‘…’);// 是 class</p>
</blockquote>
<h3 id="h5自定义属性"><a class="markdownIt-Anchor" href="#h5自定义属性">#</a> H5 自定义属性</h3>
<ul>
<li>自定义属性目的：
<ul>
<li>保存并保存数据，有些数据可以保存到页面中而不用保存到数据库中</li>
<li>有些自定义属性很容易引起歧义，不容易判断到底是内置属性还是自定义的，所以 H5 有了规定<br>
<strong>设置 H5 自定义属性：H5 规定自定义属性 data - 开头作为属性名并赋值</strong></li>
</ul>
</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>div data<span class="token operator">-</span>index <span class="token operator">=</span> <span class="token string">"1"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">></span>
<span class="token comment">// 或者使用JavaScript设置</span>
div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-index'</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>setAttribute 如果设置的属性没有那就会新建一个这个属性然后设上给的值，并不只是单纯改属性的值</p>
</blockquote>
<ul>
<li>
<p>获取 H5 自定义属性：</p>
<ul>
<li>兼容性获取 element.getAttribute (‘data-index’)</li>
<li><strong>H5 新增的：element.dataset.index 或 element.dataset [‘index’] IE11 才开始支持</strong> (注意这里不用写 data-index 而是直接 index)</li>
</ul>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201081523720.png" alt="image-20220108152313288"></p>
<p>这个 dataset 返回的也是个属性所以可以 <code>.属性</code> ，也可以 <code>['属性']</code>  来获取个属性的值</p>
</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div getTime<span class="token operator">=</span><span class="token string">"20"</span> data<span class="token operator">-</span>index<span class="token operator">=</span><span class="token string">"2"</span> data<span class="token operator">-</span>list<span class="token operator">-</span>name<span class="token operator">=</span><span class="token string">"andy"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'getTime'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'data-time'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-index'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-list-name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// h5新增的获取自定义属性的方法 它只能获取data-开头的</span>
        <span class="token comment">// dataset 是一个集合里面存放了所有以data开头的自定义属性</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>dataset<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>dataset<span class="token punctuation">[</span><span class="token string">'index'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 如果自定义属性里面有多个-链接的单词，我们获取的时候采取 驼峰命名法</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>listName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>dataset<span class="token punctuation">[</span><span class="token string">'listName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意！！！</p>
<p>h5 新增的获取自定义属性的方法 <strong>它只能获取 data - 开头的</strong></p>
<p>如果自定义属性里面有多个 - 链接的单词，我们获取的时候采取 驼峰命名法</p>
</blockquote>
<hr>
<h1 id="4-节点操作"><a class="markdownIt-Anchor" href="#4-节点操作">#</a> 4. 节点操作</h1>
<p>获取元素通常使用两种方式：</p>
<table>
<thead>
<tr>
<th style="text-align:left">1. 利用 DOM 提供的方法获取元素</th>
<th style="text-align:left">2. 利用节点层级关系获取元素</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">document.getElementById()</td>
<td style="text-align:left">利用父子兄节点关系获取元素</td>
</tr>
<tr>
<td style="text-align:left">document.getElementsByTagName()</td>
<td style="text-align:left">逻辑性强，但是兼容性较差</td>
</tr>
<tr>
<td style="text-align:left">document.querySelector 等逻辑性不强，繁琐</td>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>这两种方式都可以获取元素节点，我们后面都会使用，但是节点操作更简单。一般的，节点至少拥有三个基本属性</p>
<h2 id="节点概述"><a class="markdownIt-Anchor" href="#节点概述">#</a> 节点概述</h2>
<ul>
<li>网页中的所有内容都是节点（标签、属性、文本、注释等），在 DOM 中，节点使用 node 来表示。</li>
<li>HTML DOM 树中的所有节点均可通过 JavaScript 进行访问，所有 HTML 元素（节点）均可被修改，也可以创建或删除。<br>
<img src="https://img-blog.csdnimg.cn/e4a5de5416c7492b91571891c19c0e0e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pe25YC-LQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"><br>
一般的，节点至少拥有 nodeType（节点类型）、nodeName（节点名称）和 nodeValue（节点值) 这三个基本属性。</li>
<li><strong>元素节点：nodeType 为 1</strong></li>
<li><strong>属性节点：nodeType 为 2</strong></li>
<li><strong>文本节点：nodeType 为 3 (文本节点包括<mark>文字、空格、换行</mark>等)</strong><br>
 我们在实际开发中，节点操作主要操作的是<strong>元素节点</strong><br>
利用 DOM 树可以把节点划分为不同的层级关系，常见的是<strong>父子兄层级关系。</strong></li>
</ul>
<hr>
<h3 id="父级节点"><a class="markdownIt-Anchor" href="#父级节点">#</a> 父级节点</h3>
<ul>
<li><code>node.parentNode</code>  parentNode 属性可以返回__某节点 (所有的都是节点，包括你通过比如说 querySelector 得到的元素对象，它本身就是个节点然后可以访问他的属性得到父节点) 的父结点__，注意是__最近的一个父结点__</li>
<li>如果指定的节点没有父结点则返回 null</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 节点的优点 <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>我是div<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>span<span class="token operator">></span>我是span<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
    <span class="token operator">&lt;</span>ul<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"demo"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"box"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"erweima"</span><span class="token operator">></span>×<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>

    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 1. 父节点 parentNode</span>
        <span class="token keyword">var</span> erweima <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.erweima'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// var box = document.querySelector('.box');</span>
        <span class="token comment">// 得到的是离元素最近的父级节点(亲爸爸) 如果找不到父节点就返回为 null</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>erweima<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h3 id="子节点"><a class="markdownIt-Anchor" href="#子节点">#</a> 子节点</h3>
<ul>
<li><code>parentNode.childNodes(标准)</code>  返回包含__指定节点的子节点的集合__，该集合为即时更新的集合</li>
<li>返回值包含了所有的子结点，包括元素节点，文本节点等</li>
<li>如果只想要获得里面的元素节点，<strong>则需要专门处理。所以我们一般不提倡使用 childNodes</strong></li>
<li><code>parentNode.children(非标准)</code>  是__一个只读 (不可写！) 属性，返回所有的子元素节点__</li>
<li>它只返回子元素节点，其余节点不返回 （这个是我们重点掌握的）</li>
<li>虽然 children 是一个非标准，但是得到了各个浏览器的支持，因此我们可以放心使用</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>ul<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&lt;</span>ol<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ol<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// DOM 提供的方法（API）获取</span>
        <span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> lis <span class="token operator">=</span> ul<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1. 子节点  childNodes 所有的子节点 包含 元素节点 文本节点等等</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ul<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ul<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ul<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2. children 获取所有的子元素节点 也是我们实际开发常用的</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ul<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><code>父节点.childNodes</code>  是所有的子节点，包括换行和空格！！(换行和空格是文本节点)\</p>
<p>所以这里 <code>console.log(ul.childNodes);</code> <strong> 会显示有 9 个节点而不是 4 个</strong>，其中是 ul 节点对象下面的四个小 li, 还有五个是小 li 之间 (之前) 的空格和换行的文本节点</p>
</blockquote>
<blockquote>
<p>一把我们用 <code>父节点.children</code>  这样就会获得父节点的所有子 ==<strong> 元素</strong> == 节点，<strong> 不包括父节点的 (子) 文本节点，也就是说不会带有空格和换行的那些文本节点</strong>.</p>
</blockquote>
<h4 id="第一个子节点"><a class="markdownIt-Anchor" href="#第一个子节点">#</a> 第一个子节点</h4>
<ul>
<li><code>parentNode.firstChild</code>  返回第一个子节点，找不到则返回 null</li>
<li>同样，也是包含所有的节点</li>
</ul>
<blockquote>
<p>所有注意返回的是不是想要的子元素节点</p>
</blockquote>
<p><strong>兼容性：</strong></p>
<ul>
<li><code>parentNode.firstElementChild</code>  返回第一个子节点，找不到则返回 null</li>
<li>有兼容性问题，IE9 以上才支持</li>
</ul>
<blockquote>
<p>这个最常用！</p>
</blockquote>
<h4 id="最后一个子节点"><a class="markdownIt-Anchor" href="#最后一个子节点">#</a> 最后一个子节点</h4>
<ul>
<li><code>parentNode.lastChild</code>  返回最后一个子节点，找不到则返回 null</li>
<li>同样，也是包含所有的节点</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>ol<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li1<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li2<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li3<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li4<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li5<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ol<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">var</span> ol <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ol'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1. firstChild 第一个子节点 不管是文本节点还是元素节点</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ol<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ol<span class="token punctuation">.</span>lastChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2. firstElementChild 返回第一个子元素节点 ie9才支持</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ol<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ol<span class="token punctuation">.</span>lastElementChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3. 实际开发的写法  既没有兼容性问题又返回第一个子元素</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ol<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//第一个子元素节点</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ol<span class="token punctuation">.</span>children<span class="token punctuation">[</span>ol<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//最后一个子元素节点</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072043545.png" alt="在这里插入图片描述"><br>
<strong>兼容性：</strong> <code>parentNode.lastElementChild</code></p>
<ul>
<li>lastElementChild 返回最后一个子节点，找不到则返回 null</li>
<li>有兼容性问题，IE9 以上才支持</li>
</ul>
<h4 id="解决方案"><a class="markdownIt-Anchor" href="#解决方案">#</a> 解决方案</h4>
<p>实际开发中，firstChild 和 lastChild 包含其他节点，操作不方便，而 firstElementChild 和 lastElementChild 又有兼容性问题，那么我们如何获取第一个子元素节点或最后一个子元素节点呢？<br>
解决方案：</p>
<ul>
<li>如果想要第一个子元素节点，可以使用 parentNode.chilren [0]</li>
<li>如果想要最后一个子元素节点，可以使用</li>
</ul>
<pre class="line-numbers language-JS" data-language="JS"><code class="language-JS">&#x2F;&#x2F; 数组元素个数减1 就是最后一个元素的索引号
parentNode.chilren[parentNode.chilren.length - 1]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>ol<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li1<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li2<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li3<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>我是li4<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ol<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">var</span> ol <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ol'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1.firstChild 获取第一个子结点的，包含文本结点和元素结点</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ol<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 返回的是文本结点 #text(第一个换行结点)</span>
        
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ol<span class="token punctuation">.</span>lastChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 返回的是文本结点 #text(最后一个换行结点)</span>
        <span class="token comment">// 2. firstElementChild 返回第一个子元素结点</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ol<span class="token punctuation">.</span>firstElementChild<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &lt;li>我是li1&lt;/li></span>
        
        <span class="token comment">// 第2个方法有兼容性问题，需要IE9以上才支持</span>
        <span class="token comment">// 3.实际开发中，既没有兼容性问题，又返回第一个子元素</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ol<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &lt;li>我是li1&lt;/li></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ol<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// &lt;li>我是li4&lt;/li></span>
        <span class="token comment">// 当里面li个数不唯一时候，需要取到最后一个结点时这么写</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ol<span class="token punctuation">.</span>children<span class="token punctuation">[</span>ol<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h3 id="兄弟节点"><a class="markdownIt-Anchor" href="#兄弟节点">#</a> 兄弟节点</h3>
<h4 id="下一个兄弟节点"><a class="markdownIt-Anchor" href="#下一个兄弟节点">#</a> 下一个兄弟节点</h4>
<ul>
<li><code>node.nextSibling</code>  返回当前元素的下一个兄弟元素节点，找不到则返回 null</li>
<li><strong>同样，也是包含所有的节点</strong></li>
</ul>
<p><strong>兼容性：</strong> <code>node.nextElementSibling</code>  (用这个)</p>
<ul>
<li>nextElementSibling 返回当前元素下一个兄弟元素节点，找不到则返回 null</li>
<li>有兼容性问题，IE9 才支持</li>
</ul>
<h4 id="上一个兄弟节点"><a class="markdownIt-Anchor" href="#上一个兄弟节点">#</a> 上一个兄弟节点</h4>
<ul>
<li><code>node.previousSibling</code>  返回当前元素上一个兄弟元素节点，找不到则返回 null</li>
<li>同样，也是包含所有的节点</li>
</ul>
<p><strong>兼容性：</strong> <code>node.previousElementSibling</code>  (用这个)</p>
<ul>
<li>previousElementSibling 返回当前元素上一个兄弟元素节点，找不到则返回 null</li>
<li>有兼容性问题，IE9 才支持</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>我是div<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>span<span class="token operator">></span>我是span<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1.nextSibling 下一个兄弟节点 包含元素节点或者 文本节点等等</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// #text</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>previousSibling<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// #text</span>
        <span class="token comment">// 2. nextElementSibling 得到下一个兄弟元素节点</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>nextElementSibling<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//&lt;span>我是span&lt;/span></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>div<span class="token punctuation">.</span>previousElementSibling<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//null</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>如何解决兼容性问题？</strong></p>
<blockquote>
<p>答：自己封装一个兼容性的函数</p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">getNextElementSibling</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
    <span class="token keyword">var</span> el <span class="token operator">=</span> element<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>el <span class="token operator">=</span> el<span class="token punctuation">.</span>nextSibling<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        <span class="token keyword">if</span><span class="token punctuation">(</span>el<span class="token punctuation">.</span>nodeType <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    
            <span class="token keyword">return</span> el<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="节点操作"><a class="markdownIt-Anchor" href="#节点操作">#</a> 节点操作</h2>
<h3 id="创建节点"><a class="markdownIt-Anchor" href="#创建节点">#</a> 创建节点</h3>
<ul>
<li><code>document.createElement()</code>  方法创建由 tagName 指定的 HTML 元素  <code>document.createElement('tagName(标签名)');</code></li>
<li>因为这些元素原先不存在，是根据我们的需求动态生成的，所以我们也称为动态创建元素节点</li>
</ul>
<h3 id="添加节点"><a class="markdownIt-Anchor" href="#添加节点">#</a> 添加节点</h3>
<ul>
<li><code>node(一般都是父元素节点).appendChild(child)</code>  方法将一个节点添加到指定父节点的子节点列表末尾。类似于 CSS 里面的 after 伪元素。</li>
<li><code>node(一般都是父元素节点).insertBefore(child,指定元素)</code>  方法将一个节点添加到父节点的指定子节点前面。类似于 CSS 里面的 before 伪元素。</li>
</ul>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>123<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
        <span class="token comment">// 1. 创建节点元素节点</span>
        <span class="token keyword">var</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2. 添加节点 node.appendChild(child)  node 父级  child 是子级 后面追加元素  类似于数组中的push</span>
        <span class="token comment">// 先获取父亲ul</span>
        <span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ul<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3. 添加节点 node.insertBefore(child, 指定元素);</span>
        <span class="token keyword">var</span> lili <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ul<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>lili<span class="token punctuation">,</span> ul<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//insert before the first element node of ul represented by ul.children[0].</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>我们想要页面添加一个新的元素分两步: 1. 创建元素 2. 添加元素</p>
</blockquote>
<blockquote>
<p>一般 table 里面我们是先创建 tr 然后 append 到 tbody 然后在这个 tr 里面 append 每一个 td, 接下来在创建第二个 tr,so on…</p>
</blockquote>
<h3 id="删除节点"><a class="markdownIt-Anchor" href="#删除节点">#</a> 删除节点</h3>
<ul>
<li><code>node.removeChild(child)</code>  方法从 DOM 中删除一个子节点，返回删除的节点</li>
</ul>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201081753766.png" alt="image-20220108175302614"><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201081753060.png" alt="image-20220108175311940"></p>
<h4 id="按a标签防止链接跳转"><a class="markdownIt-Anchor" href="#按a标签防止链接跳转">#</a> 按 a 标签防止链接跳转</h4>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201081759091.png" alt="image-20220108175903941"></p>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201081800713.png" alt="image-20220108180002577"></p>
<p>这样再按下这个 a 标签后就不会再地址栏上显示# (如果用的是 #)</p>
<h3 id="复制节点克隆节点"><a class="markdownIt-Anchor" href="#复制节点克隆节点">#</a> 复制节点（克隆节点）</h3>
<ul>
<li><code>node.cloneNode()</code>  方法返回调用该方法的节点的一个副本。 也称为克隆节点 / 拷贝节点</li>
<li><strong>如果括号参数为空或者为 false ，则是浅拷贝，即只克隆复制节点本身，不克隆里面的子节点，所以里面要是有什么文本节点，元素节点等等是不会复制过来的</strong></li>
<li><strong>如果括号参数为 true ，则是深度拷贝，会复制节点本身以及里面所有的子节点</strong></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>ul<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token number">1111</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span><span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1. node.cloneNode(); 括号为空或者里面是false 浅拷贝 只复制标签不复制里面的内容</span>
        <span class="token comment">// 2. node.cloneNode(true); 括号为true 深拷贝 复制标签复制里面的内容</span>
        <span class="token keyword">var</span> lili <span class="token operator">=</span> ul<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ul<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>lili<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072043530.png" alt="在这里插入图片描述"></p>
<h3 id="面试题"><a class="markdownIt-Anchor" href="#面试题">#</a> 面试题</h3>
<p>三种动态创建元素 doucument.write ()、element.innerHTML、document.createElement ()<br>
 区别：</p>
<ul>
<li>document.write() <strong>是直接将内容写入页面的内容流，但是文档流 (就是当前页面的代码从上往下依次执行执行完毕) 执行完毕，则它会导致页面全部重绘</strong></li>
<li>innerHTML 是将内容写入某个 DOM 节点，不会导致页面全部重绘</li>
<li>innerHTML 创建多个元素效率更高__（不要拼接字符串，采取数组形式拼接）__，结构稍微复杂</li>
</ul>
<blockquote>
<p>注意: innerHTML way is only faster than creating element and appending it when you have inserted all the needed elements to an array and add the array to innerHTML, instead of creating a bunch of String storing each element and appending the string which is way slower.</p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"innner"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"create"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 2. innerHTML 创建元素</span>
        <span class="token keyword">var</span> inner <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.inner'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2.1 innerHTML 用拼接字符串方法   这种方式很慢!!!!!!!</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            inner<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'&lt;a href="#">百度&lt;/a>'</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">// 2.2 innerHTML 用数组形式拼接   这种方式很块,最快的!!!!!!!</span>
        <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">100</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'&lt;a href="#">百度&lt;/a>'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        inner<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 3.document.createElement() 创建元素 第二快的!</span>
        <span class="token keyword">var</span> create <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.create'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        create<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>createElement () 创建多个元素效率稍低一点点，但是结构更清晰</li>
<li>总结：不同浏览器下， innerHTML 效率要比 createElement 高</li>
</ul>
<p><img src="C:%5CUsers%5Charry%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20220108183418928.png" alt="image-20220108183418928"></p>
<h3 id="dom核心总结"><a class="markdownIt-Anchor" href="#dom核心总结">#</a> DOM 核心，总结</h3>
<p>对于 DOM 操作，我们主要针对子元素的操作，主要有</p>
<ul>
<li>创建：document.write、innerHTML、createElement</li>
<li>增：appendChild、insertBefore</li>
<li>删：removeChild</li>
<li>改：主要修改 dom 的元素属性，dom 元素的内容、属性、表单的值等
<ol>
<li>修改元素属性：src、href、title 等</li>
<li>修改普通元素内容：innerHTML、innerText</li>
<li>修改表单元素：value、type、disabled</li>
<li>修改元素样式：style、className</li>
</ol>
</li>
<li>查：主要获取查询 dom 的元素<br>
 \1. DOM 提供的 API 方法：getElementById、getElementsByTagName (古老用法，不推荐)<br>
\2. H5 提供的新方法：querySelector、querySelectorAll (提倡)<br>
\3. 利用节点操作获取元素：父 (parentNode)、子 (children)、兄 (previousElementSibling、nextElementSibling) 提倡</li>
<li>属性操作：主要针对于自定义属性
<ol>
<li>setAttribute：设置 dom 的属性值</li>
<li>getAttribute：得到 dom 的属性值</li>
<li>removeAttribute：移除属性</li>
</ol>
</li>
</ul>
<hr>
<h1 id="5-事件高级"><a class="markdownIt-Anchor" href="#5-事件高级">#</a> 5. 事件高级</h1>
<h2 id="注册事件绑定事件"><a class="markdownIt-Anchor" href="#注册事件绑定事件">#</a> 注册事件 (绑定事件)</h2>
<ul>
<li>给元素添加事件，称为注册事件或者绑定事件。</li>
<li>注册事件有两种方式：<strong>传统方式__和__方法监听注册方式</strong></li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">传统注册方式</th>
<th style="text-align:left">方法监听注册方式</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">利用 on 开头的事件 onclick</td>
<td style="text-align:left">w3c 标准推荐方式</td>
</tr>
<tr>
<td style="text-align:left">&lt;button onclick = “alert(“hi”)&quot;&gt;</td>
<td style="text-align:left">addEventListener () 它是一个方法</td>
</tr>
<tr>
<td style="text-align:left">btn.onclick = function() {}</td>
<td style="text-align:left">IE9 之前的 IE 不支持此方法，可使用 attachEvent () 代替</td>
</tr>
<tr>
<td style="text-align:left"><strong>特点：注册事件的唯一性，就是比如说你要是同一个元素写了两个 onclick 只会执行之后的一个 (之后的把前面的给覆盖掉了)</strong></td>
<td style="text-align:left"><mark>特点：同一个元素同一个事件可以注册多个监听器</mark></td>
</tr>
<tr>
<td style="text-align:left">同一个元素同一个事件只能设置一个处理函数，最后注册的处理函数将会覆盖前面注册的处理函数</td>
<td style="text-align:left"><strong>按注册顺序依次执行，就是比如说按了按钮，会把所有的监听器里的方法依次都执行，注意是都会执行.</strong></td>
</tr>
</tbody>
</table>
<h3 id="addeventlistener事件监听方式"><a class="markdownIt-Anchor" href="#addeventlistener事件监听方式">#</a>  <code>addEventListener</code>  事件监听方式</h3>
<ul>
<li>eventTarget.addEventListener () 方法将指定的监听器注册到 eventTarget（目标对象）上</li>
<li>当该对象触发指定的事件时，就会执行事件处理函数</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">eventTarget</span><span class="token punctuation">(</span>节点对象<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span>listener<span class="token punctuation">[</span><span class="token punctuation">,</span>useCapture<span class="token punctuation">]</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>该方法接收三个参数：</p>
<ul>
<li>type: 事件类型字符串，比如 click,mouseover, 注意这里不要带 on</li>
<li>listener：事件处理函数，事件发生时，会调用该监听函数</li>
<li>useCapture：可选参数，是一个布尔值，默认是 false。学完 DOM 事件流后，我们再进一步学习</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>button<span class="token operator">></span>传统注册事件<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>button<span class="token operator">></span>方法监听注册事件<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>button<span class="token operator">></span>ie9 attachEvent<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">var</span> btns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1. 传统方式注册事件</span>
        btns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hi'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        btns<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hao a u'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token comment">// 2. 事件监听注册事件 addEventListener </span>
            <span class="token comment">// (1) 里面的事件类型是字符串 所以加引号 而且不带on</span>
            <span class="token comment">// (2) 同一个元素 同一个事件可以添加多个侦听器（事件处理程序）</span>
        btns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        btns<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token comment">// 3. attachEvent ie9以前的版本支持</span>
        btns<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="attachevent事件监听方式兼容"><a class="markdownIt-Anchor" href="#attachevent事件监听方式兼容">#</a>  <code>attachEvent</code>  事件监听方式 (兼容)</h3>
<ul>
<li>eventTarget.attachEvent () 方法将指定的监听器注册到 eventTarget（目标对象） 上</li>
<li>当该对象触发指定的事件时，指定的回调函数就会被执行</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">eventTarget<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span>eventNameWithOn<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>该方法接收两个参数：</p>
<ul>
<li>eventNameWithOn：事件类型字符串，比如 onclick 、onmouseover ，这里要带 on</li>
<li>callback： 事件处理函数，当目标触发事件时回调函数被调用</li>
<li><strong>ie9 以前的版本支持</strong></li>
</ul>
<h3 id="注册事件兼容性解决方案"><a class="markdownIt-Anchor" href="#注册事件兼容性解决方案">#</a> 注册事件兼容性解决方案</h3>
<p>兼容性处理的原则：首先照顾大多数浏览器，再处理特殊浏览器</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> eventName<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
   
     <span class="token comment">// 判断当前浏览器是否支持 addEventListener 方法</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>addEventListener<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
   
       element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 第三个参数 默认是false</span>
     <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>attachEvent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
   
       element<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span> <span class="token operator">+</span> eventName<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
   
       <span class="token comment">// 相当于 element.onclick = fn;</span>
       element<span class="token punctuation">[</span><span class="token string">'on'</span> <span class="token operator">+</span> eventName<span class="token punctuation">]</span> <span class="token operator">=</span> fn<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="删除事件解绑事件"><a class="markdownIt-Anchor" href="#删除事件解绑事件">#</a> 删除事件 (解绑事件)</h2>
<h3 id="removeeventlistener删除事件方式"><a class="markdownIt-Anchor" href="#removeeventlistener删除事件方式">#</a>  <code>removeEventListener</code>  删除事件方式</h3>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">eventTarget<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span>listener<span class="token punctuation">[</span><span class="token punctuation">,</span>useCapture<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>该方法接收三个参数：</p>
<ul>
<li>type: 事件类型字符串，比如 click,mouseover, 注意这里不要带 on</li>
<li>listener：事件处理函数，事件发生时，会调用该监听函数</li>
<li>useCapture：可选参数，是一个布尔值，默认是 false。学完 DOM 事件流后，我们再进一步学习</li>
</ul>
<h3 id="detachevent删除事件方式兼容"><a class="markdownIt-Anchor" href="#detachevent删除事件方式兼容">#</a>  <code>detachEvent</code>  删除事件方式 (兼容)</h3>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">eventTarget<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span>eventNameWithOn<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>该方法接收两个参数：</p>
<ul>
<li>eventNameWithOn：事件类型字符串，比如 onclick 、onmouseover ，这里要带 on</li>
<li>callback： 事件处理函数，当目标触发事件时回调函数被调用</li>
<li>ie9 以前的版本支持</li>
</ul>
<h3 id="传统事件删除方式"><a class="markdownIt-Anchor" href="#传统事件删除方式">#</a> 传统事件删除方式</h3>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">eventTarget</span><span class="token punctuation">(</span>节点对象<span class="token punctuation">)</span><span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">var</span> divs <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        divs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 1. 传统方式删除事件</span>
            divs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token comment">// 2.removeEventListener 删除事件</span>
        divs<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//里面的fn不需要调用加小括号</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            divs<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token comment">// 3.IE9 中的删除事件方式</span>
        divs<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span>fn1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            divs<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span>fn1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意 <code>removeEventListener</code>  需要用到那个函数的名字，所以需要不能用匿名函数而是单独声明个函数 (正常方式), 然后再用那个函数名放进 <code>addEventListener</code>  和 <code>removeEventListener</code> , 注意在这里放函数名不需要加小括号。加上了小括号指的就是调用那个函数也就是会取回那个函数的返回值，这当然不是我们想要做的</p>
</blockquote>
<h3 id="删除事件兼容性解决方案"><a class="markdownIt-Anchor" href="#删除事件兼容性解决方案">#</a> 删除事件兼容性解决方案</h3>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> eventName<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
   
     <span class="token comment">// 判断当前浏览器是否支持 removeEventListener 方法</span>
     <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>removeEventListener<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
   
       element<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span>eventName<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 第三个参数 默认是false</span>
     <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>detachEvent<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
   
       element<span class="token punctuation">.</span><span class="token function">detachEvent</span><span class="token punctuation">(</span><span class="token string">'on'</span> <span class="token operator">+</span> eventName<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
   
       element<span class="token punctuation">[</span><span class="token string">'on'</span> <span class="token operator">+</span> eventName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="dom事件流"><a class="markdownIt-Anchor" href="#dom事件流">#</a> DOM 事件流</h2>
<ul>
<li>事件流描述的是从页面中接收事件的顺序</li>
<li>事件发生时会在元素节点之间按照特定的顺序传播，这个传播过程即 DOM 事件流<br>
比如我们给一个 div 注册了点击事件：DOM 事件流分为 3 个阶段：1. 捕获阶段 2. 当前目标阶段 3. 冒泡阶段<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072044565.png" alt="在这里插入图片描述"></li>
<li>事件冒泡： IE 最早提出，事件开始时由最具体的元素接收，然后逐级向上传播到到 DOM 最顶层节点的过程。</li>
<li>事件捕获： 网景最早提出，由 DOM 最顶层节点开始，然后逐级向下传播到到最具体的元素接收的过程。</li>
<li>我们向水里面扔一块石头，首先它会有一个下降的过程，这个过程就可以理解为从最顶层向事件发生的最具体元素（目标点）的捕获过程；之后会产生泡泡，会在最低点（最具体元素）之后漂浮到水面上，这个过程相当于事件冒泡。<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072044555.png" alt="在这里插入图片描述"></li>
</ul>
<h3 id="捕获阶段"><a class="markdownIt-Anchor" href="#捕获阶段">#</a> 捕获阶段</h3>
<ul>
<li>document -&gt; html -&gt; body -&gt; father -&gt; son</li>
<li>两个盒子嵌套，一个父盒子一个子盒子，我们的需求是当点击父盒子时弹出 father ，当点击子盒子时弹出 son</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"father"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"son"</span><span class="token operator">></span>son盒子<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// dom 事件流 三个阶段</span>
        <span class="token comment">// 1. JS 代码中只能执行捕获或者冒泡其中的一个阶段。</span>
        <span class="token comment">// 2. onclick 和 attachEvent（ie） 只能得到冒泡阶段。</span>
        <span class="token comment">// 3. 捕获阶段 如果addEventListener 第三个参数是 true 那么则处于捕获阶段  document -> html -> body -> father -> son</span>
        <span class="token keyword">var</span> son <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.son'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        son<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
             <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'son'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> father <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.father'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        father<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'father'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><mark>但是因为 DOM 流的影响，我们设置捕获阶段，所以我们点击子盒子，<strong>会先弹出 father，之后再弹出 son</strong></mark></p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072044221.gif" alt="在这里插入图片描述"><br>
这是因为捕获阶段由 DOM 最顶层节点开始，然后逐级向下传播到到最具体的元素接收</p>
<ul>
<li>document -&gt; html -&gt; body -&gt; father -&gt; son</li>
<li>先看 document 的事件，没有；再看 html 的事件，没有；再看 body 的事件，没有；再看 father 的事件，有就先执行；再看 son 的事件，再执行。</li>
</ul>
<h3 id="冒泡阶段"><a class="markdownIt-Anchor" href="#冒泡阶段">#</a> 冒泡阶段</h3>
<ul>
<li>son -&gt; father -&gt;body -&gt; html -&gt; document</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"father"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"son"</span><span class="token operator">></span>son盒子<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
		<span class="token comment">// 4. 冒泡阶段 如果addEventListener 第三个参数是 false 或者 省略 那么则处于冒泡阶段  son -> father ->body -> html -> document</span>
        <span class="token keyword">var</span> son <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.son'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        son<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'son'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> father <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.father'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        father<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'father'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'document'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>我们点击子盒子，会弹出 son、father、document</li>
<li>这是因为冒泡阶段开始时由最具体的元素接收，然后逐级向上传播到到 DOM 最顶层节点：son -&gt; father -&gt;body -&gt; html -&gt; document<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072044418.gif" alt="在这里插入图片描述"></li>
</ul>
<h3 id="小结"><a class="markdownIt-Anchor" href="#小结">#</a> 小结</h3>
<ul>
<li><strong><mark>JS 代码中只能执行捕获或者冒泡其中的一个阶段</mark></strong></li>
<li><strong>onclick 和 attachEvent 只能得到冒泡阶段</strong></li>
<li><strong>addEventListener (type,listener [,useCapture]) 第三个参数如果是 true，表示在事件<mark>捕获阶段</mark>调用事件处理程序；如果是 false (不写默认就是 false), 表示在事件<mark>冒泡阶段</mark>调用事件处理程序</strong></li>
<li><mark>实际开发中我们很少使用事件捕获，我们更关注事件冒泡。</mark></li>
<li><strong>有些事件是没有冒泡的，比如 onblur、onfocus、onmouseenter、onmouseleave</strong></li>
</ul>
<hr>
<h2 id="事件对象"><a class="markdownIt-Anchor" href="#事件对象">#</a> 事件对象</h2>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">eventTarget<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
   <span class="token comment">// 这个 event 就是事件对象，我们还喜欢的写成 e 或者 evt </span>
<span class="token punctuation">&#125;</span> 
eventTarget<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
   <span class="token comment">// 这个 event 就是事件对象，我们还喜欢的写成 e 或者 evt  </span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>官方解释：<strong>event 对象代表事件的状态，比如键盘按键的状态、鼠标的位置、鼠标按钮的状态</strong></p>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201082050268.png" alt="image-20220108205030079"></p>
<p>简单理解：</p>
<ul>
<li>事件发生后，跟事件相关的一系列信息数据的集合都放到这个对象里面</li>
<li>这个对象就是事件对象 event，它有很多属性和方法，比如 “
<ul>
<li>谁绑定了这个事件</li>
<li>鼠标触发事件的话，会得到鼠标的相关信息，如鼠标位置</li>
<li>键盘触发事件的话，会得到键盘的相关信息，如按了哪个键</li>
</ul>
</li>
<li>这个 event 是个形参，系统帮我们设定为事件对象，不需要传递实参过去</li>
<li>当我们注册事件时， event 对象就会被系统自动创建，并依次传递给事件监听器（事件处理函数）</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token number">123</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 事件对象</span>
        <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        div<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                <span class="token comment">// console.log(e);</span>
                <span class="token comment">// console.log(window.event);</span>
                <span class="token comment">// e = e || window.event;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token punctuation">&#125;</span>
        <span class="token comment">// 1. event 就是一个事件对象 写到我们侦听函数的 小括号里面 当形参来看</span>
        <span class="token comment">// 2. 事件对象只有有了事件才会存在，它是系统给我们自动创建的，不需要我们传递参数</span>
        <span class="token comment">// 3. 事件对象 是 我们事件的一系列相关数据的集合 跟事件相关的 比如鼠标点击里面就包含了鼠标的相关信息，鼠标坐标啊，如果是键盘事件里面就包含的键盘事件的信息 比如 判断用户按下了那个键</span>
        <span class="token comment">// 4. 这个事件对象我们可以自己命名 比如 event 、 evt、 e</span>
        <span class="token comment">// 5. 事件对象也有兼容性问题 ie678 通过 window.event 兼容性的写法  e = e || window.event;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="事件对象的兼容性方案"><a class="markdownIt-Anchor" href="#事件对象的兼容性方案">#</a> 事件对象的兼容性方案</h3>
<p>事件对象本身的获取存在兼容问题：</p>
<ol>
<li>
<p>标准浏览器中是浏览器给方法传递的参数，只需要定义形参 e 就可以获取到。</p>
</li>
<li>
<p>在 IE6~8 中，浏览器不会给方法传递参数，如果需要的话，需要到 window.event 中获取查找</p>
<p>解决： <code>e = e || window.event;</code></p>
</li>
</ol>
<h3 id="事件对象的常见属性和方法"><a class="markdownIt-Anchor" href="#事件对象的常见属性和方法">#</a> 事件对象的常见属性和方法</h3>
<table>
<thead>
<tr>
<th style="text-align:left">事件对象属性方法</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">e.target</td>
<td style="text-align:left">返回触发事件的对象 标准</td>
</tr>
<tr>
<td style="text-align:left">e.srcElement</td>
<td style="text-align:left">返回触发事件的对象 非标准 ie6-8 使用</td>
</tr>
<tr>
<td style="text-align:left">e.type</td>
<td style="text-align:left">返回事件的类型 比如 click mouseover 不带 on</td>
</tr>
<tr>
<td style="text-align:left">e.cancelBubble</td>
<td style="text-align:left">该属性阻止冒泡，非标准，ie6-8 使用</td>
</tr>
<tr>
<td style="text-align:left">e.returnValue</td>
<td style="text-align:left">该属性阻止默认行为 非标准，ie6-8 使用</td>
</tr>
<tr>
<td style="text-align:left">e.preventDefault()</td>
<td style="text-align:left">该方法阻止默认行为 标准 比如不让链接跳转</td>
</tr>
<tr>
<td style="text-align:left">e.stopPropagation()</td>
<td style="text-align:left">阻止冒泡 标准</td>
</tr>
</tbody>
</table>
<h3 id="事件对象阻止默认行为"><a class="markdownIt-Anchor" href="#事件对象阻止默认行为">#</a> 事件对象阻止默认行为</h3>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201082112147.png" alt="image-20220108211246034"></p>
<p>__取消掉__原本就有的默认改事件触发时会发生的事</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token number">123</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"http://www.baidu.com"</span><span class="token operator">></span>百度<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
    <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">"http://www.baidu.com"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"submit"</span> value<span class="token operator">=</span><span class="token string">"提交"</span> name<span class="token operator">=</span><span class="token string">"sub"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 常见事件对象的属性和方法</span>
        <span class="token comment">// 1. 返回事件类型</span>
        <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseover'</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseout'</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token comment">// 2. 阻止默认行为（事件） 让链接不跳转 或者让提交按钮不提交</span>
        <span class="token keyword">var</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  dom 标准写法</span>
       <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

       <span class="token comment">// 3. 传统的注册方式</span>
        a<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// 普通浏览器 e.preventDefault();  方法</span>
            <span class="token comment">// e.preventDefault();</span>
            
            <span class="token comment">// 低版本浏览器 ie678  returnValue  属性</span>
            <span class="token comment">// e.returnValue;</span>
            
<span class="token comment">// 我们可以利用return false 也能阻止默认行为 没有兼容性问题 特点： return 后面的代码不执行了， 而且只限于传统的注册方式</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="阻止事件冒泡"><a class="markdownIt-Anchor" href="#阻止事件冒泡">#</a> 阻止事件冒泡</h3>
<ul>
<li>事件冒泡：开始时由最具体的元素接收，然后逐级向上传播到到 DOM 最顶层节点</li>
<li>事件冒泡本身的特性，会带来的坏处，也会带来的好处，需要我们灵活掌握。<br>
标准写法： <code>e.stopPropagation();</code> <br>
 非标准写法： IE6-8 利用对象事件 cancelBubble 属性： <code>e.cancelBubble = true;</code></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"father"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"son"</span><span class="token operator">></span>son儿子<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 常见事件对象的属性和方法</span>
        <span class="token comment">// 阻止冒泡  dom 推荐的标准 stopPropagation() </span>
        <span class="token keyword">var</span> son <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.son'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        son<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'son'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// stop 停止  Propagation 传播</span>
            e<span class="token punctuation">.</span>cancelBubble <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 非标准 cancel 取消 bubble 泡泡</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> father <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.father'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        father<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'father'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'document'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>在目标元素事件触发的函数里面设置  <code>e.stopPropagation();</code>  就可取消事件冒泡，不会触发父元素的__对应事件__的函数.</p>
</blockquote>
<p>阻止事件冒泡的兼容性解决方案：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span><span class="token punctuation">(</span>e <span class="token operator">&amp;&amp;</span> e<span class="token punctuation">.</span>stopPropagation<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
      e<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
      window<span class="token punctuation">.</span>event<span class="token punctuation">.</span>cancelBubble <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="etarget-与-this"><a class="markdownIt-Anchor" href="#etarget-与-this">#</a>  <code>e.target</code>  与  <code>this</code></h3>
<p>e.target 与 this 的区别：</p>
<ul>
<li>this 是事件绑定的元素，这个函数的调用者 (绑定这个事件的元素)</li>
<li>e.target 是事件触发的元素</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token number">123</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>ul<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>abc<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>abc<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>abc<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 常见事件对象的属性和方法</span>
        <span class="token comment">// 1. e.target 返回的是触发事件的对象（元素）  this 返回的是绑定事件的对象（元素）</span>
        <span class="token comment">// 区别 ： e.target 点击了那个元素，就返回那个元素 this 那个元素绑定了这个点击事件，那么就返回谁</span>
        <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                <span class="token comment">// 我们给ul 绑定了事件  那么this 就指向ul  </span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>currentTarget<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// e.target 指向我们点击的那个对象 谁触发了这个事件 我们点击的是li e.target 指向的就是li</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token comment">// 了解兼容性</span>
            <span class="token comment">// div.onclick = function(e) &#123;</span>
    
            <span class="token comment">//     e = e || window.event;</span>
            <span class="token comment">//     var target = e.target || e.srcElement;</span>
            <span class="token comment">//     console.log(target);</span>

        <span class="token comment">// &#125;</span>
        <span class="token comment">// 2. 了解 跟 this 有个非常相似的属性 currentTarget  ie678不认识</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>e.target 和 this 的区别：</p>
<ul>
<li>this 是事件绑定的元素，这个函数的调用者（绑定这个事件的元素）</li>
<li>e.target 是事件触发的元素。</li>
</ul>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201082055901.png" alt="image-20220108205523738"><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201082055840.png" alt="image-20220108205547694"></p>
<blockquote>
<p>⭐️this 指向的是当前事件绑定的元素 (这个函数的调用者), 比如说上面如果 click ul 就会触发事件，这里的 ul 就是 this.</p>
</blockquote>
<blockquote>
<p>⭐️e.target 是真正让这个事件发生的那个元素，因为 li 在 ul 里面，虽然没给 li 绑定事件但是点 li 也会触发 ul (不管是冒泡还是捉),li 被点击了，但是没有绑定事件，所以冒泡到 ul， 而 ul 有绑定，就触发了</p>
<p>所以让这个事件真正触发的那个元素其实是 li 而不是 ul.</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201082059659.png" alt="image-20220108205946507"></p>
<h3 id="事件对象的兼容性"><a class="markdownIt-Anchor" href="#事件对象的兼容性">#</a> 事件对象的兼容性</h3>
<p>事件对象本身的获取存在兼容问题：</p>
<ul>
<li>标准浏览器中浏览器是给方法传递的参数，只需定义形参 e 就可以获取到</li>
<li>在 IE6 -&gt; 8 中，浏览器不会给方法传递参数，如果需要的话，需要到 window.event 中获取查找</li>
<li>解决方案： <code>e = e || window.event</code></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token number">123</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 事件对象</span>
        <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        div<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                <span class="token comment">// e = e || window.event;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 事件对象也有兼容性问题 ie678 通过 window.event 兼容性的写法  e = e || window.event;</span>

            <span class="token punctuation">&#125;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="事件委托"><a class="markdownIt-Anchor" href="#事件委托">#</a> 事件委托</h2>
<ul>
<li>事件委托也称为事件代理，在 jQuery 里面称为事件委派</li>
<li><strong>事件委托的原理：不是每个子节点单独设置事件监听器，而是事件监听器设置在其父节点上，然后利用冒泡原理影响设置每个子节点</strong></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>ul<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>知否知否，点我应有弹框在手！<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>知否知否，点我应有弹框在手！<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>知否知否，点我应有弹框在手！<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>知否知否，点我应有弹框在手！<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>知否知否，点我应有弹框在手！<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 事件委托的核心原理：给父节点添加侦听器， 利用事件冒泡影响每一个子节点</span>
        <span class="token keyword">var</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// alert('知否知否，点我应有弹框在手！');</span>
            <span class="token comment">// e.target 这个可以得到我们点击的对象</span>
            e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'pink'</span><span class="token punctuation">;</span>
            <span class="token comment">// 点了谁，就让谁的style里面的backgroundColor颜色变为pink</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>以上案例：给 ul 注册点击事件，然后利用事件对象的 target 来找到当前点击的 li，因为点击 li，事件会冒泡到 ul 上， ul 有注册事件，就会触发事件监听器。</p>
</blockquote>
<hr>
<h2 id="常见的鼠标事件"><a class="markdownIt-Anchor" href="#常见的鼠标事件">#</a> 常见的鼠标事件</h2>
<table>
<thead>
<tr>
<th style="text-align:left">鼠标事件</th>
<th style="text-align:left">触发条件</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">onclick</td>
<td style="text-align:left">鼠标点击左键触发</td>
</tr>
<tr>
<td style="text-align:left">onmouseover</td>
<td style="text-align:left">鼠标经过触发</td>
</tr>
<tr>
<td style="text-align:left">onmouseout</td>
<td style="text-align:left">鼠标离开触发</td>
</tr>
<tr>
<td style="text-align:left">onfocus</td>
<td style="text-align:left">获得鼠标焦点触发</td>
</tr>
<tr>
<td style="text-align:left">onblur</td>
<td style="text-align:left">失去鼠标焦点触发</td>
</tr>
<tr>
<td style="text-align:left">onmousemove</td>
<td style="text-align:left">鼠标移动触发</td>
</tr>
<tr>
<td style="text-align:left">onmouseup</td>
<td style="text-align:left">鼠标弹起触发</td>
</tr>
<tr>
<td style="text-align:left">onmousedown</td>
<td style="text-align:left">鼠标按下触发</td>
</tr>
</tbody>
</table>
<h3 id="禁止鼠标右键与鼠标选中"><a class="markdownIt-Anchor" href="#禁止鼠标右键与鼠标选中">#</a> 禁止鼠标右键与鼠标选中</h3>
<ul>
<li><code>contextmenu</code>  主要控制应该何时显示上下文菜单，主要用于程序员取消默认的上下文菜单 (比如说右键然后赋值)</li>
<li><code>selectstart</code>  禁止鼠标选中</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>h1<span class="token operator">></span>我是一段不愿意分享的文字<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 1. contextmenu 我们可以禁用右键菜单</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'contextmenu'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 阻止默认行为</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        
		<span class="token comment">// 2. 禁止选中文字 selectstart</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'selectstart'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="鼠标事件对象"><a class="markdownIt-Anchor" href="#鼠标事件对象">#</a> 鼠标事件对象</h3>
<ul>
<li>event 对象代表事件的状态，<strong>跟事件相关的一系列信息的集合</strong> (就是这个事件对象可能是个鼠标事件对象，也可能是个键盘事件对象，或许其他… 然后 onclick 这些只是这个事件对象的一个键叫做 type 的值)</li>
<li>现阶段我们主要是用鼠标事件对象  <code>MouseEvent </code> 和键盘事件对象  <code>KeyboardEvent</code> 。</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">鼠标事件对象</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">e.clientX</td>
<td style="text-align:left">返回鼠标相对于浏览器窗口__可视区 (代表往页面下面滑鼠标还是按照当前可视窗口而不是真正的最顶上开始的)__的 X 坐标</td>
</tr>
<tr>
<td style="text-align:left">e.clientY</td>
<td style="text-align:left">返回鼠标相对于浏览器窗口__可视区__的 Y 坐标</td>
</tr>
<tr>
<td style="text-align:left">e.pageX（重点）</td>
<td style="text-align:left">返回鼠标相对于__文档页面 (跟可视区不一样，是从真正最上面开始)__的 X 坐标 IE9+ 支持</td>
</tr>
<tr>
<td style="text-align:left">e.pageY（重点）</td>
<td style="text-align:left">返回鼠标相对于__文档页面__的 Y 坐标 IE9+ 支持</td>
</tr>
<tr>
<td style="text-align:left">e.screenX</td>
<td style="text-align:left">返回鼠标相对于电脑屏幕的 X 坐标</td>
</tr>
<tr>
<td style="text-align:left">e.screenY</td>
<td style="text-align:left">返回鼠标相对于电脑屏幕的 Y 坐标</td>
</tr>
</tbody>
</table>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 鼠标事件对象 MouseEvent</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// 1. client 鼠标在可视区的x和y坐标</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientX<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>clientY<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'---------------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 2. page 鼠标在页面文档的x和y坐标</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>pageX<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>pageY<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'---------------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 3. screen 鼠标在电脑屏幕的x和y坐标</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>screenX<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>screenY<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>图片跟随鼠标案例</strong></p>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201082300619.png" alt="image-20220108230028523"></p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
      <span class="token selector">img</span> <span class="token punctuation">&#123;</span>
          <span class="token comment">/*绝对定位!这样不会影响其他的盒子的位置*/</span>
        <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>...<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">var</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"mousemove"</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">var</span> x <span class="token operator">=</span> e<span class="token punctuation">.</span>clientX<span class="token punctuation">;</span>
        <span class="token keyword">var</span> y <span class="token operator">=</span> e<span class="token punctuation">.</span>clientY<span class="token punctuation">;</span>
        img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> y <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">;</span>
        img<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意别忘了后面的 px!!!</p>
</blockquote>
<hr>
<h2 id="常用的键盘事件"><a class="markdownIt-Anchor" href="#常用的键盘事件">#</a> 常用的键盘事件</h2>
<table>
<thead>
<tr>
<th style="text-align:left">键盘事件</th>
<th style="text-align:left">触发条件</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">onkeyup</td>
<td style="text-align:left">某个键盘按键被松开时触发</td>
</tr>
<tr>
<td style="text-align:left">onkeydown</td>
<td style="text-align:left">某个键盘按键被按下时触发 (一直按着一直触发)</td>
</tr>
<tr>
<td style="text-align:left">onkeypress</td>
<td style="text-align:left">某个键盘按键被按下时触发，(一直按着一直触发).<strong> 但是它不识别功能键，比如 ctrl shift 箭头等</strong></td>
</tr>
</tbody>
</table>
<ul>
<li>如果使用 addEventListener 不需要加 on</li>
<li>onkeypress 和前面 2 个的区别是，它不识别功能键，比如左右箭头，shift 等</li>
<li>三个事件的执行顺序是： keydown (先) –&gt; keypress (然后) —&gt; keyup (最后松开执行)</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 常用的键盘事件</span>
        <span class="token comment">//1. keyup 按键弹起的时候触发 </span>
        <span class="token comment">// document.onkeyup = function() &#123;</span>
    
        <span class="token comment">//         console.log('我弹起了');</span>

        <span class="token comment">//     &#125;</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我弹起了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

        <span class="token comment">//3. keypress 按键按下的时候触发  不能识别功能键 比如 ctrl shift 左右箭头啊</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keypress'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我按下了press'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token comment">//2. keydown 按键按下的时候触发  能识别功能键 比如 ctrl shift 左右箭头啊</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keydown'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我按下了down'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token comment">// 4. 三个事件的执行顺序  keydown -- keypress -- keyup</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="键盘对象属性"><a class="markdownIt-Anchor" href="#键盘对象属性">#</a> 键盘对象属性</h3>
<table>
<thead>
<tr>
<th style="text-align:left">键盘事件对象 属性</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">keyCode</td>
<td style="text-align:left">返回该键值的 ASCII 值</td>
</tr>
</tbody>
</table>
<ul>
<li>onkeydown 和 onkeyup 不区分字母大小写 (<strong>所以要是看 keyCode, 'a’和’A’一样都会是 65</strong>)，onkeypress 区分字母大小写。</li>
<li>在我们实际开发中，我们更多的使用 keydown 和 keyup， 它能识别所有的键（包括功能键）</li>
<li>Keypress 不识别功能键，但是 keyCode 属性能区分大小写，返回不同的 ASCII 值</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 键盘事件对象中的keyCode属性可以得到相应键的ASCII码值</span>
        <span class="token comment">// 1. 我们的keyup 和keydown事件不区分字母大小写  a 和 A 得到的都是65</span>
        <span class="token comment">// 2. 我们的keypress 事件 区分字母大小写  a 得到的是97 , A 得到的是65</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'up:'</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>keyCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 我们可以利用keycode返回的ASCII码值来判断用户按下了那个键</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>keyCode <span class="token operator">===</span> <span class="token number">65</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'您按下的a键'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'您没有按下a键'</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span>

        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'keypress'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'press:'</span> <span class="token operator">+</span> e<span class="token punctuation">.</span>keyCode<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>某些时候比如说我们直接键盘打 s 键，会自动让搜索框 onfocus, 这时候我们可以把事件的触发条件设置为 keyup 而不是 keydown 因为要是设置了 keydown, 你在按的时候会一直触发，所以你一按，搜索框 onfocus 了，然后因为你一直按着会一直在搜索框里输入内容 (检测的很快地，就算你就是轻轻按了一下)</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201082346816.png" alt="image-20220108234606705"></p>
<p>所以你一按键会先触发事件执行对应的代码然后才把你按下的放到那个文本框里，这样不好用</p>
<p><strong>一般都是用 keyup</strong></p>
<hr>
<p>思维导图：<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072328974.png" alt="在这里插入图片描述"></p>
<h1 id="1-bom概述"><a class="markdownIt-Anchor" href="#1-bom概述">#</a> 1. BOM 概述</h1>
<ul>
<li>BOM = Browser Object Model 浏览器对象模型</li>
<li>它提供了独立于内容而与浏览器窗口进行交互的对象，其核心对象是 window</li>
<li>BOM 由一系列相关的对象构成，并且每个对象都提供了很多方法与属性</li>
<li>BOM 缺乏标准，JavaScript 语法的标准化组织是 ECMA, DOM 的标准化组织是 W3C, BOM 最初是 Netscape 浏览器标准的一部分</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">DOM</th>
<th style="text-align:left">BOM</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">文档对象模型</td>
<td style="text-align:left">浏览器对象模型</td>
</tr>
<tr>
<td style="text-align:left">DOM 就是把文档当作一个对象来看待</td>
<td style="text-align:left"><strong>把 浏览器当作一个对象来看待</strong></td>
</tr>
<tr>
<td style="text-align:left">DOM 的顶级对象是 document</td>
<td style="text-align:left"><strong>BOM 的顶级对象是 window</strong></td>
</tr>
<tr>
<td style="text-align:left">DOM 主要学习的是操作页面元素</td>
<td style="text-align:left">BOM 学习的是浏览器窗口交互的一些对象</td>
</tr>
<tr>
<td style="text-align:left">DOM 是 W3C 标准规范</td>
<td style="text-align:left">BOM 是浏览器厂商在各自浏览器上定义的，兼容性较差</td>
</tr>
</tbody>
</table>
<h2 id="bom的构成"><a class="markdownIt-Anchor" href="#bom的构成">#</a> BOM 的构成</h2>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072328925.png" alt="在这里插入图片描述"></p>
<ul>
<li><strong>BOM 比 DOM 更大。它包含 DOM。</strong></li>
<li>window 对象是浏览器的顶级对象，它具有双重角色</li>
<li>它是 JS 访问浏览器窗口的一个接口</li>
<li>它是一个全局对象。<strong><mark>定义在全局作用域中的变量、函数都会变成 window 对象的属性和方法</mark></strong></li>
<li><strong>在调用的时候可以省略 window，前面学习的对话框都属于 window 对象方法，如 alert ()、prompt () 等</strong>。</li>
<li>注意：window 下的一个特殊属性 <a target="_blank" rel="noopener" href="http://window.name">window.name</a></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 定义在全局作用域中的变量会变成window对象的属性</span>
<span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 10</span>

<span class="token comment">// 定义在全局作用域中的函数会变成window对象的方法</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
console<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 11</span>

<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>  <span class="token comment">//不要用这个name变量,window下已经有一个特殊属性window.name</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="window-对象的常见事件"><a class="markdownIt-Anchor" href="#window-对象的常见事件">#</a>  <code>window</code>  对象的常见事件</h2>
<h3 id="窗口加载事件"><a class="markdownIt-Anchor" href="#窗口加载事件">#</a> 窗口加载事件</h3>
<p>window.onload 是窗口（页面）加载事件，<strong>当文档内容完全加载完成会触发该事件（包括图像，脚本文件，CSS 文件等）</strong>，就调用的处理函数。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// 然后正常的写代码</span>
    <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'haha'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// 或者</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"load"</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// 然后正常的写代码</span>
    <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'haha'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意：</p>
<ul>
<li><strong>有了 window.onload 就可以把 JS 代码写到页面元素的上方</strong></li>
<li><mark>因为 onload 是等页面内容全部加载完毕，再去执行处理函数</mark></li>
<li>window.onload 就像 onclick 等一样是传统注册事件方式，只能写一次</li>
<li>如果有多个，会以最后一个 window.onload 为准，就是最后的覆盖了前面的</li>
<li><strong>如果使用 addEventListener 则没有限制，就跟我们上面学的一样</strong></li>
</ul>
<p><strong>另一种方式 (DOMContentLoaded):</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>接收两个参数：</p>
<ul>
<li>DOMCountentLoaded 事件触发时，<strong>仅当 DOM 加载完成，不包括样式表，图片，flash 等等</strong></li>
<li><strong>如果页面的图片很多的话，从用户访问到 onload 触发可能需要较长的时间</strong></li>
<li><strong>交互效果就不能实现，必然影响用户的体验，此时用 DOMContentLoaded 事件比较合适。</strong></li>
</ul>
<blockquote>
<p><strong>区别：</strong></p>
<ul>
<li>load 等页面内容全部加载完毕，包括页面 dom 元素，图片，flash，css 等</li>
<li>DOMContentLoaded 是 DOM 加载完毕，不包含图片 flash css 等就可以执行，加载速度比 load 更快一些</li>
</ul>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
    <span class="token comment">// window.onload = function() &#123;</span>
    
    <span class="token comment">//     var btn = document.querySelector('button');</span>
    <span class="token comment">//     btn.addEventListener('click', function() &#123;</span>
    
    <span class="token comment">//         alert('点击我');</span>
    <span class="token comment">//     &#125;)</span>
    <span class="token comment">// &#125;</span>
    <span class="token comment">// window.onload = function() &#123;</span>
    
    <span class="token comment">//     alert(22);</span>
    <span class="token comment">// &#125;</span>
    
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    
        <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
         <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'点击我'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    
	document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token comment">// load 等页面内容全部加载完毕，包含页面dom元素 图片 flash  css 等等</span>
<span class="token comment">// DOMContentLoaded 是DOM 加载完毕，不包含图片 falsh css 等就可以执行 加载速度比 load更快一些</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="调整窗口大小事件"><a class="markdownIt-Anchor" href="#调整窗口大小事件">#</a> 调整窗口大小事件</h3>
<p>window.onresize 是调整窗口大小加载事件，当触发时就调用的处理函数</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">window<span class="token punctuation">.</span><span class="token function-variable function">onresize</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>
<span class="token comment">// 或者</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>只要窗口大小发生像素变化，就会触发这个事件</li>
<li>我们经常利用这个事件完成响应式布局。 <code>window.innerWidth</code>  当前屏幕的宽度</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>

                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'变化了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>innerWidth <span class="token operator">&lt;=</span> <span class="token number">800</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    
                    div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>

            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h1 id="2-定时器"><a class="markdownIt-Anchor" href="#2-定时器">#</a> 2. 定时器</h1>
<p>window 对象给我们提供了两个定时器：setTimeout ()、setInterval ()</p>
<h2 id="settimeout定时器"><a class="markdownIt-Anchor" href="#settimeout定时器">#</a>  <code>setTimeout()</code>  定时器</h2>
<p>setTimeout () 方法用于设置一个定时器，该定时器在定时器到期后执行调用函数。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span>调用函数<span class="token punctuation">,</span><span class="token punctuation">[</span>延迟的毫秒数<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>注意：</p>
<ol>
<li>window 可以省略</li>
<li>这个调用函数：可以直接写函数 或者 写函数名 或者 采取字符串 ‘函数名 ()’（不推荐）</li>
<li><strong>延迟的毫秒数省略默认是 0，如果写，必须是毫秒</strong></li>
<li>因为一个页面中定时器可能有很多，<strong>所以我们经常给定时器赋值一个标识符 (名字)</strong></li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 1. setTimeout </span>
        <span class="token comment">// 语法规范：  window.setTimeout(调用函数, 延时时间);</span>
        <span class="token comment">// 1. 这个window在调用的时候可以省略</span>
        <span class="token comment">// 2. 这个延时时间单位是毫秒 但是可以省略，如果省略默认的是0</span>
        <span class="token comment">// 3. 这个调用函数可以直接写函数 还可以写 函数名 还有一个写法 '函数名()'</span>
        <span class="token comment">// 4. 页面中可能有很多的定时器，我们经常给定时器加标识符 （名字)</span>
        <span class="token comment">// setTimeout(function() &#123;</span>
    
        <span class="token comment">//     console.log('时间到了');</span>

        <span class="token comment">// &#125;, 2000);</span>
        <span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'爆炸了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">&#125;</span>
        <span class="token keyword">var</span> timer1 <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> timer2 <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>callback<span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// setTimeout('callback()', 3000); // 我们不提倡这个写法</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol>
<li>setTimeout () 这个调用函数我们也称为回调函数 callback</li>
<li>普通函数是按照代码顺序直接调用，而这个函数，需要等待事件，事件到了才会去调用这个函数，因此称为回调函数。</li>
</ol>
<blockquote>
<p>所以这个 setTimeout () 里面的函数和 setTimeout () 本身不需要我们去调用，就算我们赋值给一个变量那只是给这个定时器一个标识符而已，不需要特意去写调用，时间一到就会检测到事件然后去自动就会调用那个函数.</p>
</blockquote>
<h2 id="cleartimeout停止定时器"><a class="markdownIt-Anchor" href="#cleartimeout停止定时器">#</a>  <code>clearTimeout()</code>  停止定时器</h2>
<ul>
<li><strong>clearTimeout () 方法取消了先前通过调用 setTimeout () 建立的定时器</strong></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">window<span class="token punctuation">.</span><span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeoutID<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>注意：window 可以省略；里面的参数就是定时器的标识符</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>button<span class="token operator">></span>点击停止定时器<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'爆炸了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意这里需要把 setTimeout 回调函数赋值给一个变量，这样也就是为了这个定时器起了个标识符</p>
<p>这个样子之后想清掉这个计时器就可以用 clearTimeout (标识符)</p>
</blockquote>
<h2 id="setinterval定时器"><a class="markdownIt-Anchor" href="#setinterval定时器">#</a>  <code>setInterval()</code>  定时器</h2>
<ul>
<li>setInterval () 方法重复调用一个函数，每隔这个时间，就去调用一次回调函数</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">window<span class="token punctuation">.</span><span class="token function">setInterval</span><span class="token punctuation">(</span>回调函数<span class="token punctuation">,</span><span class="token punctuation">[</span>间隔的毫秒数<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>window 可以省略</li>
<li>这个回调函数：可以直接写函数或者写函数名或者采取字符 ‘函数名 ()’(不推荐)</li>
<li>第一次执行也是间隔毫秒数之后执行，之后每隔毫秒数就执行一次</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 1. setInterval </span>
        <span class="token comment">// 语法规范：  window.setInterval(调用函数, 延时时间);</span>
        <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'继续输出'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2. setTimeout  延时时间到了，就去调用这个回调函数，只调用一次 就结束了这个定时器</span>
        <span class="token comment">// 3. setInterval  每隔这个延时时间，就去调用这个回调函数，会调用很多次，重复调用这个函数</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201111214395.png" alt="image-20220111121455952"><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201111215330.png" alt="image-20220111121539205"></p>
<h2 id="clearinterval停止定时器"><a class="markdownIt-Anchor" href="#clearinterval停止定时器">#</a>  <code>clearInterval()</code>  停止定时器</h2>
<ul>
<li>clearInterval () 方法取消了先前通过调用 setInterval () 建立的定时器</li>
<li>注意：window 可以省略；里面的参数就是定时器的标识符</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"begin"</span><span class="token operator">></span>开启定时器<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"stop"</span><span class="token operator">></span>停止定时器<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">var</span> begin <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.begin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> stop <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.stop'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 全局变量  null是一个空对象</span>
        begin<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ni hao ma'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        stop<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>这里 timer 先全局声明然后赋值为空对象 null, 而不是什么都不赋值因为什么都不赋值会是 undefined, 可能会出错.(timer 要存的是对象)</p>
<p>全局声明这样都可以 clearInterval 和 setInterval 在自己各自的 (匿名) 函数作用域里面都可以 access 到</p>
</blockquote>
<h2 id="this指向"><a class="markdownIt-Anchor" href="#this指向">#</a>  <code>this</code>  指向</h2>
<ul>
<li>this 的指向在函数定义的时候是确定不了的，只有函数执行的时候才能确定 this 到底指向谁</li>
<li>现阶段，我们先了解一下几个 this 指向：
<ul>
<li>全局作用域或者普通函数中 this 指向全局对象</li>
<li>window (注意定时器里面的 this 指向 window)</li>
<li>方法调用中谁调用 this 指向谁</li>
<li>构造函数中 this 指向构造函数实例</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>button<span class="token operator">></span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// this 指向问题 一般情况下this的最终指向的是那个调用它的对象</span>

        <span class="token comment">// 1. 全局作用域或者普通函数中this指向全局对象window（ 注意定时器里面的this指向window）</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        window<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">//定时器里面的this也指向的是window,一般调用定时器方法都是window对象调用只不过我们之前都省略掉了   </span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2. 方法调用中谁调用this指向谁</span>
        <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
            <span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        o<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this指向的是 o 这个对象 </span>
        <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  
             console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this指向的是btn这个按钮对象</span>
        <span class="token punctuation">&#125;</span>
        btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this指向的是btn这个按钮对象</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token comment">//方法谁调用,this就指向谁</span>
        
	    <span class="token comment">// 3. 构造函数中this指向构造函数的实例</span>
        <span class="token keyword">function</span> <span class="token function">Fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// this 指向的是fun 实例对象</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">var</span> fun <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">//在遇到new的那一刻就是创造一个新对象然后把这个赋值给fun让fun这个变量指向这个新对象,所以构造函数里面的this其实就是这个变量(因为这个变量指向的就是这个new创建的新对象),也可以称作为实例.跟java里一样.</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201111237553.png" alt=""></p>
<hr>
<h1 id="3-js执行机制"><a class="markdownIt-Anchor" href="#3-js执行机制">#</a> 3. JS 执行机制</h1>
<h2 id="js是单线程"><a class="markdownIt-Anchor" href="#js是单线程">#</a> JS 是单线程</h2>
<ul>
<li>JavaScript 语言的一大特点就是单线程，也就是说，同一个时间只能做一件事。这是因为 Javascript 这门脚本语言诞生的使命所致 ——JavaScript 是为处理页面中用户的交互，以及操作 DOM 而诞生的。比如我们对某个 DOM 元素进行添加和删除操作，不能同时进行。 应该先进行添加，之后再删除。</li>
<li><strong>单线程就意味着，所有任务需要排队，前一个任务结束，才会执行后一个任务。这样所导致的问题是： 如果 JS 执行的时间过长，这样就会造成页面的渲染不连贯，导致页面渲染加载阻塞的感觉。</strong></li>
<li>一个问题：以下代码执行的结果是什么？</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>按照单线程的话，需要把定时器上面的代码执行完了才可以进行计时器的倒计时然后进行运行的代码，然后等定时器完全计时完了执行完了等等才可以执行定时器下面的代码. <mark>按照排列的顺序依次执行</mark></p>
</blockquote>
<p>那么以下代码执行的结果又是什么？</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="同步和异步"><a class="markdownIt-Anchor" href="#同步和异步">#</a> 同步和异步</h2>
<p>为了解决这个问题，利用多核 CPU 的计算能力，HTML5 提出 Web Worker 标准，<strong>允许 JavaScript 脚本创建多个线程。于是，JS 中出现了同步和异步</strong>。</p>
<ul>
<li>
<p>同步：前一个任务结束后再执行后一个任务</p>
</li>
<li>
<p>异步：在做这件事的同时，你还可以去处理其他事情</p>
</li>
<li>
<p>同步任务：<strong>同步任务都在主线程上执行，形成一个 执行栈</strong></p>
</li>
<li>
<p>异步任务：<strong>JS 中的异步是通过回调函数实现的</strong></p>
<ul>
<li>
<p>异步任务有以下三种类型：</p>
<ul>
<li>
<p>普通事件，如 click,resize 等；</p>
</li>
<li>
<p>资源加载，如 load,error 等；</p>
</li>
<li>
<p>定时器，包括 setInterval__里面的回调函数__,setTimeout__里面的回调函数__等。</p>
<p>(setInterval,setTimeout 本身自己是同步任务！)</p>
</li>
</ul>
</li>
<li>
<p><strong>异步任务相关回调函数添加到任务队列中</strong><br>
<img src="https://img-blog.csdnimg.cn/71fbe5b051834fd4a91398a87a954d43.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pe25YC-LQ==,size_13,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
</li>
</ul>
</li>
</ul>
<ol>
<li>
<p><strong>先执行执行栈中的同步任务</strong></p>
</li>
<li>
<p><mark>再执行执行栈中的同步任务时遇到属于异步任务 (回调函数) 的就会把这个异步任务放入任务队列中，<strong> 但先不执行！</strong></mark></p>
</li>
<li>
<p><strong>一旦执行栈中的所有同步任务执行完毕</strong>，系统就会<mark>按次序</mark><strong>读取任务队列中的异步任务</strong>，<strong>于是被读取的异步任务结束等待状态，<mark>进入执行栈</mark>，开始执行</strong></p>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072328941.png" alt="在这里插入图片描述"><br>
此时再来看我们刚才的问题：</p>
</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 执行的结果和顺序为 1、2、3</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 执行的结果和顺序为 1、2、3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>这个顺序是因为多线程，异步概念，都是执行多个任务，这样一个耗时长的一直阻塞一个线程其他的线程可以继续执行下面的代码</p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 3. 第三个问题</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072328967.png" alt="在这里插入图片描述"><br>
同步任务放在执行栈中执行，异步任务由__异步进程处理__放到任务队列中 (注意比如 onclick 这类的只会在鼠标点击了才会从由异步进程处理放到 (异步) 任务队列，再执行栈结束会看异步任务列表会看有没有异步任务要执行，如果有的话就从任务队列把这个任务拿出来 (所以任务列表里面会清空) 放到执行栈进行执行).<mark> 所以比如说事件触发调用的回调函数也只是触发了之后先安排去排队，然后在等待主线程执行栈执行现有的然后来这里看到这个要执行的</mark></p>
<blockquote>
<p><strong>执行栈中的任务执行完毕会去任务队列中查看是否有异步任务执行，如果有会拿回运行栈执行，执行完再去看，so on…</strong>，<mark>由于主线程不断的重复获得任务、执行任务、再获取任务、再执行</mark>，所以这种机制被称为事件循环（event loop)。</p>
</blockquote>
<p>JavaScript 是单线程执行的，无法同时执行多段代码。当某一段代码正在执行的时候，所有后续的任务都必须等待，形成一个队列。一旦当前任务执行完毕，再从队列中取出下一个任务，这也常被称为 “阻塞式执行”。所以一次鼠标点击，或是计时器到达时间点，或是 Ajax 请求完成触发了回调函数，这些事件处理程序或回调函数__都不会立即运行，而是立即排队__，一旦线程有空闲就执行。假如当前 JavaScript 线程正在执行一段很耗时的代码，此时发生了一次鼠标点击，那么事件处理程序就被阻塞，用户也无法立即看到反馈，事件处理程序会被放入任务队列，直到前面的代码结束以后才会开始执行。如果代码中设定了一个 setTimeout，那么浏览器便会在合适的时间，将代码插入任务队列，如果这个时间设为 0，就代表立即插入队列，但不是立即执行，仍然要等待前面代码执行完毕。<em>所以 setTimeout 并不能保证执行的时间，是否及时执行取决于 JavaScript 线程是拥挤还是空闲。</em></p>
<hr>
<h1 id="4-location对象"><a class="markdownIt-Anchor" href="#4-location对象">#</a> 4.  <code>location</code>  对象</h1>
<p>window 对象给我们提供了一个  <code>location</code>  属性用于获取或者设置窗体的 url，并且可以解析 url。因为这个属性返回的是一个对象，所以我们将这个属性也称为 location 对象。</p>
<h2 id="url"><a class="markdownIt-Anchor" href="#url">#</a> url</h2>
<p>统一资源定位符（uniform resouce locator）是互联网上标准资源的地址。互联网上的每个文件都有一个唯一的 URL，它包含的信息指出文件的位置以及浏览器应该怎么处理它。<br>
url 的一般语法格式为：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">protocol<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>host<span class="token punctuation">[</span><span class="token operator">:</span>port<span class="token punctuation">]</span><span class="token operator">/</span>path<span class="token operator">/</span><span class="token punctuation">[</span><span class="token operator">?</span>query<span class="token punctuation">]</span>#fragment<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<pre class="line-numbers language-JS" data-language="JS"><code class="language-JS">http:&#x2F;&#x2F;www.itcast.cn&#x2F;index.html?name&#x3D;andy&amp;age&#x3D;18#link<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<table>
<thead>
<tr>
<th style="text-align:left">组成</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">protocol</td>
<td style="text-align:left">信协议 常用的 http,ftp,maito 等</td>
</tr>
<tr>
<td style="text-align:left">host</td>
<td style="text-align:left">主机 (域名) <a target="_blank" rel="noopener" href="http://www.itheima.com">www.itheima.com</a></td>
</tr>
<tr>
<td style="text-align:left">port</td>
<td style="text-align:left">端口号，可选</td>
</tr>
<tr>
<td style="text-align:left">path</td>
<td style="text-align:left">路径 由零或多个’/' 符号隔开的字符串</td>
</tr>
<tr>
<td style="text-align:left">query</td>
<td style="text-align:left">参数 以键值对的形式，通过 &amp; 符号分隔开来</td>
</tr>
<tr>
<td style="text-align:left">fragment</td>
<td style="text-align:left">片段 #后面内容 常见于链接 锚点</td>
</tr>
</tbody>
</table>
<h2 id="location对象属性"><a class="markdownIt-Anchor" href="#location对象属性">#</a>  <code>location</code>  对象属性</h2>
<table>
<thead>
<tr>
<th style="text-align:left">location 对象属性</th>
<th style="text-align:left">返回值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">location.href</td>
<td style="text-align:left">获取或者设置整个 URL</td>
</tr>
<tr>
<td style="text-align:left">location.host</td>
<td style="text-align:left">返回主机（域名）<a target="_blank" rel="noopener" href="http://www.baidu.com">www.baidu.com</a></td>
</tr>
<tr>
<td style="text-align:left">location.port</td>
<td style="text-align:left">返回端口号，如果未写返回空字符串</td>
</tr>
<tr>
<td style="text-align:left">location.pathname</td>
<td style="text-align:left">返回路径</td>
</tr>
<tr>
<td style="text-align:left">location.search</td>
<td style="text-align:left">返回参数</td>
</tr>
<tr>
<td style="text-align:left">location.hash</td>
<td style="text-align:left">返回片段 #后面内容常见于链接 锚点</td>
</tr>
</tbody>
</table>
<p><strong>重点记住： href 和 search</strong></p>
<ul>
<li>需求：5s 之后跳转页面</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>button<span class="token operator">></span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
        <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">if</span> <span class="token punctuation">(</span>timer <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'http://www.itcast.cn'</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    
                div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'您将在'</span> <span class="token operator">+</span> timer <span class="token operator">+</span> <span class="token string">'秒钟之后跳转到首页'</span><span class="token punctuation">;</span>
                timer<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>

        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="location对象方法"><a class="markdownIt-Anchor" href="#location对象方法">#</a>  <code>location</code>  对象方法</h2>
<table>
<thead>
<tr>
<th style="text-align:left">location 对象方法</th>
<th style="text-align:left">返回值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">location.assign()</td>
<td style="text-align:left">跟 href 一样，可以跳转页面 (也称为重定向页面), 记录浏览历史，可以后退页面</td>
</tr>
<tr>
<td style="text-align:left">location.replace()</td>
<td style="text-align:left">替换当前页面，因为不记录历史，所以不能后退页面</td>
</tr>
<tr>
<td style="text-align:left">location.reload()</td>
<td style="text-align:left">重新加载页面，相当于刷新按钮或者 f5 ，如果参数为 true 强制刷新 ctrl+f5 (就不使用之前本地缓存的内容)</td>
</tr>
</tbody>
</table>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>button<span class="token operator">></span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// 记录浏览历史，所以可以实现后退功能</span>
            <span class="token comment">// location.assign('http://www.itcast.cn');</span>
            <span class="token comment">// 不记录浏览历史，所以不可以实现后退功能</span>
            <span class="token comment">// location.replace('http://www.itcast.cn');</span>
            location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="获取url参数"><a class="markdownIt-Anchor" href="#获取url参数">#</a> 获取 URL 参数</h2>
<p>我们简单写一个登录框，点击登录跳转到 index.html</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>form action<span class="token operator">=</span><span class="token string">"index.html"</span><span class="token operator">></span>
        用户名： <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> name<span class="token operator">=</span><span class="token string">"uname"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"submit"</span> value<span class="token operator">=</span><span class="token string">"登录"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>接下来我们写 index.html</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>location<span class="token punctuation">.</span>search<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ?uname=andy</span>
        <span class="token comment">// 1.先去掉？  substr('起始的位置'，截取几个字符);</span>
        <span class="token keyword">var</span> params <span class="token operator">=</span> location<span class="token punctuation">.</span>search<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// uname=andy</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2. 利用=把字符串分割为数组 split('=');</span>
        <span class="token keyword">var</span> arr <span class="token operator">=</span> params<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ["uname", "ANDY"]</span>
        <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3.把数据写入div中</span>
        div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'欢迎您'</span><span class="token punctuation">;</span>
        <span class="token comment">// 这样我们就能获取到路径上的URL参数</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h1 id="5-navigator对象"><a class="markdownIt-Anchor" href="#5-navigator对象">#</a> 5.  <code>navigator</code>  对象</h1>
<ul>
<li>navigator 对象包含有关浏览器的信息，它有很多属性</li>
<li>我们常用的是 userAgent, 该属性可以返回由客户机发送服务器的 user-agent 头部的值</li>
<li>下面前端代码可以判断用户是用哪个终端打开页面的，如果是用 PC 打开的，我们就跳转到 PC 端的页面，如果是用手机打开的，就跳转到手机端页面</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>     <span class="token comment">//手机</span>
 <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    
    window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>     <span class="token comment">//电脑</span>
 <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h1 id="6-history对象"><a class="markdownIt-Anchor" href="#6-history对象">#</a> 6.  <code>history</code>  对象</h1>
<ul>
<li>window 对象给我们提供了一个 history 对象，与浏览器历史记录进行交互</li>
<li>该对象包含用户（在浏览器窗口中）访问过的 URL。</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">history 对象方法</th>
<th style="text-align:left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">back()</td>
<td style="text-align:left">可以后退功能</td>
</tr>
<tr>
<td style="text-align:left">forward()</td>
<td style="text-align:left">前进功能</td>
</tr>
<tr>
<td style="text-align:left">go (参数)</td>
<td style="text-align:left">前进后退功能，参数如果是 1 前进 1 个页面 如果是 -1 后退 1 个页面</td>
</tr>
</tbody>
</table>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"list.html"</span><span class="token operator">></span>点击我去往列表页<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span>
    <span class="token operator">&lt;</span>button<span class="token operator">></span>前进<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// history.forward();</span>
            history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><code>history.go(几步)</code> , 如果是正数就往前走几个网页，负数就是倒退几个网页.</p>
</blockquote>
<hr>
<h1 id="pc端网页特效"><a class="markdownIt-Anchor" href="#pc端网页特效">#</a> PC 端网页特效</h1>
<h2 id="1-offset"><a class="markdownIt-Anchor" href="#1-offset">#</a> 1.  <code>offset</code></h2>
<h3 id="offset-概述"><a class="markdownIt-Anchor" href="#offset-概述">#</a> offset 概述</h3>
<p>offset 翻译过来就是偏移量， 我们使用 offset 系列相关属性可以__<mark>动态的</mark>__得到该元素的位置（偏移）、大小等。</p>
<ul>
<li>
<p>获得元素距离__带有定位父元素 (父元素需要有定位！)__的位置</p>
</li>
<li>
<p>获得元素自身的大小（宽度高度）</p>
</li>
</ul>
<blockquote>
<p>注意：返回的数值都不带单位</p>
</blockquote>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201120000750.png" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/20210609224015648.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyODc0MzE5,size_16,color_FFFFFF,t_70" alt="img"></p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
        <span class="token selector">*</span> <span class="token punctuation">&#123;</span>
    
            <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">.father</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">/* position: relative; */</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">.son</span> <span class="token punctuation">&#123;</span>
    
            <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> purple<span class="token punctuation">;</span>
            <span class="token property">margin-left</span><span class="token punctuation">:</span> 45px<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">.w</span> <span class="token punctuation">&#123;</span>
    
            <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto 200px<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 15px solid red<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>father<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>son<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>w<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
        <span class="token comment">// offset 系列</span>
        <span class="token keyword">var</span> father <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.father'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> son <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.son'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1.可以得到元素的偏移 位置 返回的不带单位的数值  </span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>father<span class="token punctuation">.</span>offsetTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>father<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 它以带有定位的父亲为准  如果么有父亲或者父亲没有定位 则以 body 为准</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2.可以得到元素的大小 宽度和高度 是包含 padding + border + width </span>
        <span class="token keyword">var</span> w <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.w'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>w<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>w<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3. 返回带有定位的父亲 否则返回的是body</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son<span class="token punctuation">.</span>offsetParent<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回带有定位的父亲 否则返回的是body</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son<span class="token punctuation">.</span>parentNode<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回父亲 是最近一级的父亲 亲爸爸 不管父亲有没有定位</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>offsetWidth 和 offsetHeight 是盒子 (padding 加内容加 border 一起的)</p>
</blockquote>
<blockquote>
<p>console.log (son.offsetParent); // 返回带有定位的父亲 否则返回的是 body<br>
console.log (son.parentNode); // 返回父亲 是__最近一级的父亲 亲爸爸 不管父亲有没有定位__</p>
</blockquote>
<h3 id="offset-与-style-区别"><a class="markdownIt-Anchor" href="#offset-与-style-区别">#</a> offset 与 style 区别</h3>
<table>
<thead>
<tr>
<th>offset</th>
<th>style</th>
</tr>
</thead>
<tbody>
<tr>
<td>offset 可以得到__任意样式表中的样式值__</td>
<td>style 只能得到__行内样式 (就是 html 代码那里 inline 的 style, 权重高)__表中的样式值</td>
</tr>
<tr>
<td>offset 系列获得的数值 (是 Number 类型不是字符串类型)<strong> 是没有单位的</strong></td>
<td>style.width 获得的是带有__单位的字符串__</td>
</tr>
<tr>
<td>offsetWidth <strong>包含 padding+border+width</strong></td>
<td>style.width <strong>获得不包含 padding 和 border 的值</strong></td>
</tr>
<tr>
<td>offsetWidth 等属性是只读属性，只能获取<mark>不能赋值</mark></td>
<td>style.width 是<mark>可读写</mark>属性，可以获取也可以赋</td>
</tr>
<tr>
<td>所以，我们想要__获取元素大小位置，用 offset 更合适__</td>
<td>所以，我们想要给元素__更改值，则需要用 style 改变__</td>
</tr>
</tbody>
</table>
<h3 id="案例获取鼠标在盒子内的坐标"><a class="markdownIt-Anchor" href="#案例获取鼠标在盒子内的坐标">#</a> 案例：获取鼠标在盒子内的坐标</h3>
<p>我们在盒子内点击，想要得到鼠标距离盒子左右的距离。</p>
<ul>
<li>首先得到鼠标在页面中的坐标（e.pageX, e.pageY）</li>
<li>其次得到盒子在页面中的距离 (box.offsetLeft, box.offsetTop)</li>
<li>用鼠标距离页面的坐标减去盒子在页面中的距离，得到 鼠标在盒子内的坐标</li>
<li>如果想要移动一下鼠标，就要获取最新的坐标，使用鼠标移动事件 mousemove</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">></span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">></span>

<span class="token operator">&lt;</span>head<span class="token operator">></span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"ie=edge"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>title<span class="token operator">></span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>
    <span class="token operator">&lt;</span>style<span class="token operator">></span>
        <span class="token punctuation">.</span>box <span class="token punctuation">&#123;</span>
    
            width<span class="token operator">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>
            height<span class="token operator">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>
            background<span class="token operator">-</span>color<span class="token operator">:</span> pink<span class="token punctuation">;</span>
            margin<span class="token operator">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>

<span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"box"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 我们在盒子内点击， 想要得到鼠标距离盒子左右的距离。</span>
        <span class="token comment">// 首先得到鼠标在页面中的坐标（ e.pageX, e.pageY）</span>
        <span class="token comment">// 其次得到盒子在页面中的距离(box.offsetLeft, box.offsetTop)</span>
        <span class="token comment">// 用鼠标距离页面的坐标减去盒子在页面中的距离， 得到 鼠标在盒子内的坐标</span>
        <span class="token keyword">var</span> box <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        box<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// console.log(e.pageX);</span>
            <span class="token comment">// console.log(e.pageY);</span>
            <span class="token comment">// console.log(box.offsetLeft);</span>
            <span class="token keyword">var</span> x <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
            <span class="token keyword">var</span> y <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'x坐标是'</span> <span class="token operator">+</span> x <span class="token operator">+</span> <span class="token string">' y坐标是'</span> <span class="token operator">+</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="案例模态框拖拽重点"><a class="markdownIt-Anchor" href="#案例模态框拖拽重点">#</a> 案例：模态框拖拽（重点）</h3>
<p><strong>任务需求：</strong></p>
<p>弹出框，我们也称为模态框。</p>
<p>点击弹出层，会弹出模态框，并且显示灰色半透明的遮挡层。<br>
点击关闭按钮，可以关闭模态框，并且同时关闭灰色半透明遮挡层。<br>
鼠标放到模态框最上面一行，可以按住鼠标拖拽模态框在页面中移动。<br>
鼠标松开，可以停止拖动模态框移动。</p>
<p><strong>案例分析:</strong></p>
<p>①点击弹出层，模态框和遮挡层就会显示出来 display:block;<br>
②点击关闭按钮，模态框和遮挡层就会隐藏起来 display:none;<br>
③鼠标按下触发的事件源是最上面一行，就是 id 为 title，触发事件是鼠标按下 mousedown, 之后鼠标移动 mousemove，最后松开鼠标 mouseup<br>
④在页面中拖拽的原理：鼠标移动过程中，获得最新的值赋值给模态框的 left 和 top 值，这样模态框可以跟着鼠标走了<br>
⑤对于模态框的更新坐标的计算：首先鼠标按下，我们可以得到鼠标在页面中的坐标，根据偏移量可以求出按下鼠标时模态框的坐标，两者相减得到鼠标在盒子中的坐标 (x, y)，由于在移动过程中，鼠标在盒子中的坐标不变，因此鼠标在页面中的坐标减去鼠标在盒子内的坐标，就是模态框真正的位置（注意移动事件写到按下事件里面。）<br>
⑥鼠标松开，就停止拖拽，就是可以让鼠标移动事件解除</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">></span>
<span class="token operator">&lt;</span>html<span class="token operator">></span>

<span class="token operator">&lt;</span>head lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>title<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>
    <span class="token operator">&lt;</span>style<span class="token operator">></span>
        <span class="token punctuation">.</span>login<span class="token operator">-</span>header <span class="token punctuation">&#123;</span>
    
            width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
            text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>
            height<span class="token operator">:</span> <span class="token number">30</span>px<span class="token punctuation">;</span>
            font<span class="token operator">-</span>size<span class="token operator">:</span> <span class="token number">24</span>px<span class="token punctuation">;</span>
            line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">30</span>px<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        ul<span class="token punctuation">,</span>
        li<span class="token punctuation">,</span>
        ol<span class="token punctuation">,</span>
        dl<span class="token punctuation">,</span>
        dt<span class="token punctuation">,</span>
        dd<span class="token punctuation">,</span>
        div<span class="token punctuation">,</span>
        p<span class="token punctuation">,</span>
        span<span class="token punctuation">,</span>
        h1<span class="token punctuation">,</span>
        h2<span class="token punctuation">,</span>
        h3<span class="token punctuation">,</span>
        h4<span class="token punctuation">,</span>
        h5<span class="token punctuation">,</span>
        h6<span class="token punctuation">,</span>
        a <span class="token punctuation">&#123;</span>
    
            padding<span class="token operator">:</span> <span class="token number">0</span>px<span class="token punctuation">;</span>
            margin<span class="token operator">:</span> <span class="token number">0</span>px<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">.</span>login <span class="token punctuation">&#123;</span>
    
            display<span class="token operator">:</span> none<span class="token punctuation">;</span>
            width<span class="token operator">:</span> <span class="token number">512</span>px<span class="token punctuation">;</span>
            height<span class="token operator">:</span> <span class="token number">280</span>px<span class="token punctuation">;</span>
            position<span class="token operator">:</span> fixed<span class="token punctuation">;</span>
            border<span class="token operator">:</span> #ebebeb solid <span class="token number">1</span>px<span class="token punctuation">;</span>
            left<span class="token operator">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>
            top<span class="token operator">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>
            background<span class="token operator">:</span> #ffffff<span class="token punctuation">;</span>
            box<span class="token operator">-</span>shadow<span class="token operator">:</span> <span class="token number">0</span>px <span class="token number">0</span>px <span class="token number">20</span>px #ddd<span class="token punctuation">;</span>
            z<span class="token operator">-</span>index<span class="token operator">:</span> <span class="token number">9999</span><span class="token punctuation">;</span>
            transform<span class="token operator">:</span> <span class="token function">translate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">.</span>login<span class="token operator">-</span>title <span class="token punctuation">&#123;</span>
    
            width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
            margin<span class="token operator">:</span> <span class="token number">10</span>px <span class="token number">0</span>px <span class="token number">0</span>px <span class="token number">0</span>px<span class="token punctuation">;</span>
            text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>
            line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">40</span>px<span class="token punctuation">;</span>
            height<span class="token operator">:</span> <span class="token number">40</span>px<span class="token punctuation">;</span>
            font<span class="token operator">-</span>size<span class="token operator">:</span> <span class="token number">18</span>px<span class="token punctuation">;</span>
            position<span class="token operator">:</span> relative<span class="token punctuation">;</span>
            cursor<span class="token operator">:</span> move<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">.</span>login<span class="token operator">-</span>input<span class="token operator">-</span>content <span class="token punctuation">&#123;</span>
    
            margin<span class="token operator">-</span>top<span class="token operator">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">.</span>login<span class="token operator">-</span>button <span class="token punctuation">&#123;</span>
    
            width<span class="token operator">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>
            margin<span class="token operator">:</span> <span class="token number">30</span>px auto <span class="token number">0</span>px auto<span class="token punctuation">;</span>
            line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">40</span>px<span class="token punctuation">;</span>
            font<span class="token operator">-</span>size<span class="token operator">:</span> <span class="token number">14</span>px<span class="token punctuation">;</span>
            border<span class="token operator">:</span> #ebebeb <span class="token number">1</span>px solid<span class="token punctuation">;</span>
            text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">.</span>login<span class="token operator">-</span>bg <span class="token punctuation">&#123;</span>
    
            display<span class="token operator">:</span> none<span class="token punctuation">;</span>
            width<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
            height<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>
            position<span class="token operator">:</span> fixed<span class="token punctuation">;</span>
            top<span class="token operator">:</span> <span class="token number">0</span>px<span class="token punctuation">;</span>
            left<span class="token operator">:</span> <span class="token number">0</span>px<span class="token punctuation">;</span>
            background<span class="token operator">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        a <span class="token punctuation">&#123;</span>
    
            text<span class="token operator">-</span>decoration<span class="token operator">:</span> none<span class="token punctuation">;</span>
            color<span class="token operator">:</span> #<span class="token number">000000</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">.</span>login<span class="token operator">-</span>button a <span class="token punctuation">&#123;</span>
    
            display<span class="token operator">:</span> block<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">.</span>login<span class="token operator">-</span>input input<span class="token punctuation">.</span>list<span class="token operator">-</span>input <span class="token punctuation">&#123;</span>
    
            float<span class="token operator">:</span> left<span class="token punctuation">;</span>
            line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">35</span>px<span class="token punctuation">;</span>
            height<span class="token operator">:</span> <span class="token number">35</span>px<span class="token punctuation">;</span>
            width<span class="token operator">:</span> <span class="token number">350</span>px<span class="token punctuation">;</span>
            border<span class="token operator">:</span> #ebebeb <span class="token number">1</span>px solid<span class="token punctuation">;</span>
            text<span class="token operator">-</span>indent<span class="token operator">:</span> <span class="token number">5</span>px<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">.</span>login<span class="token operator">-</span>input <span class="token punctuation">&#123;</span>
    
            overflow<span class="token operator">:</span> hidden<span class="token punctuation">;</span>
            margin<span class="token operator">:</span> <span class="token number">0</span>px <span class="token number">0</span>px <span class="token number">20</span>px <span class="token number">0</span>px<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">.</span>login<span class="token operator">-</span>input label <span class="token punctuation">&#123;</span>
    
            float<span class="token operator">:</span> left<span class="token punctuation">;</span>
            width<span class="token operator">:</span> <span class="token number">90</span>px<span class="token punctuation">;</span>
            padding<span class="token operator">-</span>right<span class="token operator">:</span> <span class="token number">10</span>px<span class="token punctuation">;</span>
            text<span class="token operator">-</span>align<span class="token operator">:</span> right<span class="token punctuation">;</span>
            line<span class="token operator">-</span>height<span class="token operator">:</span> <span class="token number">35</span>px<span class="token punctuation">;</span>
            height<span class="token operator">:</span> <span class="token number">35</span>px<span class="token punctuation">;</span>
            font<span class="token operator">-</span>size<span class="token operator">:</span> <span class="token number">14</span>px<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">.</span>login<span class="token operator">-</span>title span <span class="token punctuation">&#123;</span>
    
            position<span class="token operator">:</span> absolute<span class="token punctuation">;</span>
            font<span class="token operator">-</span>size<span class="token operator">:</span> <span class="token number">12</span>px<span class="token punctuation">;</span>
            right<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">20</span>px<span class="token punctuation">;</span>
            top<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">30</span>px<span class="token punctuation">;</span>
            background<span class="token operator">:</span> #ffffff<span class="token punctuation">;</span>
            border<span class="token operator">:</span> #ebebeb solid <span class="token number">1</span>px<span class="token punctuation">;</span>
            width<span class="token operator">:</span> <span class="token number">40</span>px<span class="token punctuation">;</span>
            height<span class="token operator">:</span> <span class="token number">40</span>px<span class="token punctuation">;</span>
            border<span class="token operator">-</span>radius<span class="token operator">:</span> <span class="token number">20</span>px<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>

<span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login-header"</span><span class="token operator">></span><span class="token operator">&lt;</span>a id<span class="token operator">=</span><span class="token string">"link"</span> href<span class="token operator">=</span><span class="token string">"javascript:;"</span><span class="token operator">></span>点击，弹出登录框<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"login"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"title"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login-title"</span><span class="token operator">></span>登录会员
            <span class="token operator">&lt;</span>span<span class="token operator">></span><span class="token operator">&lt;</span>a id<span class="token operator">=</span><span class="token string">"closeBtn"</span> href<span class="token operator">=</span><span class="token string">"javascript:void(0);"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"close-login"</span><span class="token operator">></span>关闭<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login-input-content"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login-input"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>label<span class="token operator">></span>用户名：<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>
                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> placeholder<span class="token operator">=</span><span class="token string">"请输入用户名"</span> name<span class="token operator">=</span><span class="token string">"info[username]"</span> id<span class="token operator">=</span><span class="token string">"username"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"list-input"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login-input"</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>label<span class="token operator">></span>登录密码：<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">></span>
                <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"password"</span> placeholder<span class="token operator">=</span><span class="token string">"请输入登录密码"</span> name<span class="token operator">=</span><span class="token string">"info[password]"</span> id<span class="token operator">=</span><span class="token string">"password"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"list-input"</span><span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"loginBtn"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login-button"</span><span class="token operator">></span><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"javascript:void(0);"</span> id<span class="token operator">=</span><span class="token string">"login-button-submit"</span><span class="token operator">></span>登录会员<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 遮盖层 <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"bg"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"login-bg"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 1. 获取元素</span>
        <span class="token keyword">var</span> login <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> mask <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.login-bg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> link <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#link'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> closeBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#closeBtn'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> title <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#title'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2. 点击弹出层这个链接 link  让mask 和login 显示出来</span>
        link<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
                login<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token comment">// 3. 点击 closeBtn 就隐藏 mask 和 login </span>
        closeBtn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
                login<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token comment">// 4. 开始拖拽</span>
            <span class="token comment">// (1) 当我们鼠标按下， 就获得鼠标在盒子内的坐标</span>
        title<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">var</span> x <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX <span class="token operator">-</span> login<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
            <span class="token keyword">var</span> y <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY <span class="token operator">-</span> login<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
            <span class="token comment">// (2) 鼠标移动的时候，把鼠标在页面中的坐标，减去 鼠标在盒子内的坐标就是模态框的left和top值</span>
            document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> move<span class="token punctuation">)</span> <span class="token comment">//注意这里只是回调函数的名字而不是调用,所以不要传e什么的,会自动传的</span>

            <span class="token keyword">function</span> <span class="token function">move</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                login<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX <span class="token operator">-</span> x <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
                login<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY <span class="token operator">-</span> y <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token comment">// (3) 鼠标弹起，就让鼠标移动事件移除</span>
            document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> move<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意这里的 mousemove 事件是写在 mousedown 事件里面，这样就是只有鼠标按下然后移动才可以触发的事件.</p>
<p>还有这里的 mousemove 是用 document 调用的这样 (冒泡会冒到 document 那里因为 document 都包含了), 而且这个 mousemove 想的是在整个页面移动所以 good. 这个样子只有按那个盒子才可以触发 mousedown 然后才可以 mousemove 触发里面的事件，而不是拽任何地方都可以.</p>
</blockquote>
<h3 id="案例仿京东放大镜"><a class="markdownIt-Anchor" href="#案例仿京东放大镜">#</a> 案例：仿京东放大镜</h3>
<blockquote>
<p>整个案例可以分为三个功能模块</p>
<ol>
<li>鼠标经过小图片盒子， 黄色的遮挡层 和 大图片盒子显示，离开隐藏 2 个盒子功能</li>
<li>黄色的遮挡层跟随鼠标功能</li>
<li>移动黄色遮挡层，大图片跟随移动功能</li>
</ol>
</blockquote>
<ul>
<li>
<p>鼠标经过小图片盒子， 黄色的遮挡层 和 大图片盒子显示，离开隐藏 2 个盒子功能<br>
就是显示与隐藏</p>
</li>
<li>
<p>黄色的遮挡层跟随鼠标功能。</p>
</li>
<li>
<p>把鼠标坐标给遮挡层不合适。因为遮挡层坐标以父盒子为准。</p>
</li>
<li>
<p>首先是获得鼠标在盒子的坐标。</p>
</li>
<li>
<p>之后把数值给遮挡层做为 left 和 top 值。</p>
</li>
<li>
<p>此时用到鼠标移动事件，但是还是在小图片盒子内移动。</p>
</li>
<li>
<p>发现，遮挡层位置不对，需要再减去盒子自身高度和宽度的一半。</p>
</li>
<li>
<p>遮挡层不能超出小图片盒子范围。</p>
</li>
<li>
<p>如果小于零，就把坐标设置为 0</p>
</li>
<li>
<p>如果大于遮挡层最大的移动距离，就把坐标设置为最大的移动距离</p>
</li>
<li>
<p>遮挡层的最大移动距离： 小图片盒子宽度 减去 遮挡层盒子宽度</p>
</li>
</ul>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201112354943.png" alt="在这里插入图片描述"><br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201112354538.png" alt="在这里插入图片描述"></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
    <span class="token keyword">var</span> preview_img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.preview_img'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> mask <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.mask'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> big <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.big'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 1. 当我们鼠标经过 preview_img 就显示和隐藏 mask 遮挡层 和 big 大盒子</span>
    preview_img<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseover'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
        big<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    preview_img<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseout'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
            big<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token comment">// 2. 鼠标移动的时候，让黄色的盒子跟着鼠标来走</span>
    preview_img<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mousemove'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        <span class="token comment">// (1). 先计算出鼠标在盒子内的坐标</span>
        <span class="token keyword">var</span> x <span class="token operator">=</span> e<span class="token punctuation">.</span>pageX <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
        <span class="token keyword">var</span> y <span class="token operator">=</span> e<span class="token punctuation">.</span>pageY <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
        <span class="token comment">// console.log(x, y);</span>
        <span class="token comment">// (2) 减去盒子高度 300的一半 是 150 就是我们mask 的最终 left 和top值了</span>
        <span class="token comment">// (3) 我们mask 移动的距离</span>
        <span class="token keyword">var</span> maskX <span class="token operator">=</span> x <span class="token operator">-</span> mask<span class="token punctuation">.</span>offsetWidth <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> maskY <span class="token operator">=</span> y <span class="token operator">-</span> mask<span class="token punctuation">.</span>offsetHeight <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
        <span class="token comment">// (4) 如果x 坐标小于了0 就让他停在0 的位置</span>
        <span class="token comment">// 遮挡层的最大移动距离</span>
        <span class="token keyword">var</span> maskMax <span class="token operator">=</span> preview_img<span class="token punctuation">.</span>offsetWidth <span class="token operator">-</span> mask<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>maskX <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            maskX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>maskX <span class="token operator">>=</span> maskMax<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            maskX <span class="token operator">=</span> maskMax<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>maskY <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            maskY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>maskY <span class="token operator">>=</span> maskMax<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            maskY <span class="token operator">=</span> maskMax<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> maskX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
        mask<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> maskY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
        <span class="token comment">// 3. 大图片的移动距离 = 遮挡层移动距离 * 大图片最大移动距离 / 遮挡层的最大移动距离</span>
        <span class="token comment">// 大图</span>
        <span class="token keyword">var</span> bigIMg <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.bigImg'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 大图片最大移动距离</span>
        <span class="token keyword">var</span> bigMax <span class="token operator">=</span> bigIMg<span class="token punctuation">.</span>offsetWidth <span class="token operator">-</span> big<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
        <span class="token comment">// 大图片的移动距离 X Y</span>
        <span class="token keyword">var</span> bigX <span class="token operator">=</span> maskX <span class="token operator">*</span> bigMax <span class="token operator">/</span> maskMax<span class="token punctuation">;</span>
        <span class="token keyword">var</span> bigY <span class="token operator">=</span> maskY <span class="token operator">*</span> bigMax <span class="token operator">/</span> maskMax<span class="token punctuation">;</span>
        bigIMg<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span>bigX <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
        bigIMg<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token operator">-</span>bigY <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>

    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>由于代码过多，部分没有显示.</p>
<hr>
<h2 id="2-client"><a class="markdownIt-Anchor" href="#2-client">#</a> 2.  <code>client</code></h2>
<h3 id="元素可视区-client-系列"><a class="markdownIt-Anchor" href="#元素可视区-client-系列">#</a> 元素可视区 client 系列</h3>
<p>client 翻译过来就是客户端，我们使用 client 系列的相关属性来获取元素可视区的相关信息。通过 client 系列的相关属性可以动态的得到该元素的边框大小、元素大小等。<br>
<img src="https://img-blog.csdnimg.cn/14d794a14e9e40f0bf1ff5cb81c41646.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ2MTk5NTUz,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201112354898.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>如果想要元素带着内容，边框和 padding 的大小用 offset.</p>
<p>想要元素带着内容和 padding (没有边框) 的大小用 client.</p>
</blockquote>
<h3 id="案例-淘宝-flexiblejs-源码分析️重要️"><a class="markdownIt-Anchor" href="#案例-淘宝-flexiblejs-源码分析️重要️">#</a> 案例： 淘宝 flexible.js 源码分析⭐️重要！！！⭐️</h3>
<p>立即执行函数 (function () {})() 或者 <strong>(function(){}())</strong>, 都很像，跟我们之前说的一样，也都可以传参数等.</p>
<blockquote>
<p>第二种方式 (function (…,…){}(…,…)) 可以是匿名也可以加名字 -&gt;(function XXX (参数 1, 参数 2,…){}(实参 1, 实参 2,…))</p>
</blockquote>
<blockquote>
<p>主要作用： 创建一个独立的作用域，里面变量都是局部变量。 避免了命名冲突问题，而且立即执行，执行完就把空间释放了</p>
<blockquote>
<p>把这个 js 文件中所有的都放进这个立即执行函数里面，<mark> 这么做之后要是引入多个 js 文件，不会因为有可能会有全局变量而让一些变量混起来，每个 js 文件里面的变量都是对于他自己的 (局部变量)</mark></p>
</blockquote>
</blockquote>
<p><mark>注意，把整个 js 文件放进一个立即执行函数需要传 window 和 document 这样子函数里面就可以用了</mark></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
     <span class="token comment">// 1.立即执行函数: 不需要调用，立马能够自己执行的函数</span>
     <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">&#125;</span>
     <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">// 2. 写法 也可以传递参数进来</span>
     <span class="token comment">// 1.(function() &#123;&#125;)()    或者  2. (function()&#123;&#125;());</span>
     <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
 
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
     <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 第二个小括号可以看做是调用函数</span>
     <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
 
         console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 局部变量</span>
     <span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token comment">// 3. 立即执行函数最大的作用就是 独立创建了一个作用域, 里面所有的变量都是局部变量 不会有命名冲突的情况</span>
 <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>下面三种情况都会刷新页面都会触发 (window.) <code>load</code>  事件。</p>
<ol>
<li>a 标签的超链接</li>
<li>F5 或者刷新按钮（强制刷新）</li>
<li>前进后退按钮</li>
</ol>
<p><mark>但是 火狐中，有个特点，有个 “往返缓存”，这个缓存中不仅保存着页面数据，还保存了 DOM 和 JavaScript 的状态；实际上是将整个页面都保存在了内存里。</mark> 所以此时后退按钮不能刷新页面。</p>
<p>此时可以使用  <code>pageshow</code>  事件来触发。<strong>这个事件在页面显示时触发，无论页面是否来自缓存</strong>。</p>
<p>在重新加载页面中，pageshow 会在 load 事件触发后触发；<strong>根据事件对象中的 persisted 来判断是否是缓存中的页面触发的 pageshow 事件，<mark>注意这个事件给 window 添加</mark></strong>。</p>
<p><strong>flexible.js 源码分析:</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">flexible</span><span class="token punctuation">(</span><span class="token parameter">window<span class="token punctuation">,</span> document</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
    <span class="token comment">// 获取的html 的根元素</span>
    <span class="token keyword">var</span> docEl <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement
        <span class="token comment">// dpr 物理像素比</span>
    <span class="token keyword">var</span> dpr <span class="token operator">=</span> window<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">||</span> <span class="token number">1</span> <span class="token comment">//拿的到就会是那个,拿不到就会是1</span>

    <span class="token comment">// adjust body font size  设置我们body 的字体大小</span>
    <span class="token keyword">function</span> <span class="token function">setBodyFontSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        <span class="token comment">// 如果页面中有body 这个元素 就设置body的字体大小</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">12</span> <span class="token operator">*</span> dpr<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'px'</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// 如果页面中没有body 这个元素，则等着 我们页面主要的DOM元素加载完毕再去设置body</span>
            <span class="token comment">// 的字体大小</span>
            document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'DOMContentLoaded'</span><span class="token punctuation">,</span> setBodyFontSize<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token function">setBodyFontSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// set 1rem = viewWidth / 10    设置我们html 元素的文字大小</span>
    <span class="token keyword">function</span> <span class="token function">setRemUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        <span class="token keyword">var</span> rem <span class="token operator">=</span> docEl<span class="token punctuation">.</span>clientWidth <span class="token operator">/</span> <span class="token number">10</span>
        docEl<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> rem <span class="token operator">+</span> <span class="token string">'px'</span>
    <span class="token punctuation">&#125;</span>

    <span class="token function">setRemUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// reset rem unit on page resize  当我们页面尺寸大小发生变化的时候，要重新设置下rem 的大小</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> setRemUnit<span class="token punctuation">)</span>
        <span class="token comment">// pageshow 是我们重新加载页面触发的事件</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'pageshow'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        <span class="token comment">// e.persisted 返回的是true 就是说如果这个页面是从缓存取过来的页面，也需要从新计算一下rem 的大小</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>e<span class="token punctuation">.</span>persisted<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">setRemUnit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

    <span class="token comment">// detect 0.5px supports  有些移动端的浏览器不支持0.5像素的写法</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dpr <span class="token operator">>=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        <span class="token keyword">var</span> fakeBody <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span>
        <span class="token keyword">var</span> testElement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
        testElement<span class="token punctuation">.</span>style<span class="token punctuation">.</span>border <span class="token operator">=</span> <span class="token string">'.5px solid transparent'</span>
        fakeBody<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>testElement<span class="token punctuation">)</span>
        docEl<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>fakeBody<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>testElement<span class="token punctuation">.</span>offsetHeight <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            docEl<span class="token punctuation">.</span>classList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'hairlines'</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span>
        docEl<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>fakeBody<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> document<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="3-scroll"><a class="markdownIt-Anchor" href="#3-scroll">#</a> 3.  <code>scroll</code></h2>
<h3 id="元素-scroll-系列属性"><a class="markdownIt-Anchor" href="#元素-scroll-系列属性">#</a> 元素 scroll 系列属性</h3>
<p>scroll 翻译过来就是滚动的，我们使用 scroll 系列的相关属性可以动态的得到该元素的大小、滚动距离等。<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201112354955.png" alt="在这里插入图片描述"><br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201112354143.png" alt="在这里插入图片描述"></p>
<blockquote>
<p><code>scroll</code>  是真正内容的大小，包括超出的内容.(<strong>注意 scrollTop 是如果你有卷动条往下卷动，上面超出盒子的距离</strong>)</p>
<p><code>client</code>  就是之前内容的大小，不包括超出得内容.</p>
</blockquote>
<h3 id="页面被卷去的头部"><a class="markdownIt-Anchor" href="#页面被卷去的头部">#</a> 页面被卷去的头部</h3>
<p>如果浏览器的高（或宽）度不足以显示整个页面时，会自动出现滚动条。当滚动条向下滚动时，页面上面被隐藏掉的高度，我们就称为页面被卷去的头部。滚动条在滚动时会触发<strong> onscroll 事件</strong>。</p>
<h3 id="案例仿淘宝固定右侧侧边栏"><a class="markdownIt-Anchor" href="#案例仿淘宝固定右侧侧边栏">#</a> 案例：仿淘宝固定右侧侧边栏</h3>
<ol>
<li>
<p>原先侧边栏是绝对定位</p>
</li>
<li>
<p>当页面滚动到一定位置，侧边栏改为固定定位</p>
</li>
<li>
<p>页面继续滚动，会让 返回顶部显示出来</p>
</li>
</ol>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201121346075.png" alt="image-20220112134646746"><br>
 注意，元素被卷去的头部是 element.scrollTop ,<strong> 如果是页面被卷去的头部 则是 window.pageYOffset</strong><br>
 其实这个值 可以通过盒子的 offsetTop 可以得到，如果大于等于这个值，就可以让盒子固定定位了</p>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201121527282.png" alt="[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-5R3C5XKc-1623249564711)(C:\Users\lp\AppData\Roaming\Typora\typora-user-images\image-20210609090603672.png)]"></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">></span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">></span>

<span class="token operator">&lt;</span>head<span class="token operator">></span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"ie=edge"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>title<span class="token operator">></span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>
    <span class="token operator">&lt;</span>style<span class="token operator">></span>
        <span class="token punctuation">.</span>slider<span class="token operator">-</span>bar <span class="token punctuation">&#123;</span>
    
            position<span class="token operator">:</span> absolute<span class="token punctuation">;</span>
            left<span class="token operator">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>
            top<span class="token operator">:</span> <span class="token number">300</span>px<span class="token punctuation">;</span>
            margin<span class="token operator">-</span>left<span class="token operator">:</span> <span class="token number">600</span>px<span class="token punctuation">;</span>
            width<span class="token operator">:</span> <span class="token number">45</span>px<span class="token punctuation">;</span>
            height<span class="token operator">:</span> <span class="token number">130</span>px<span class="token punctuation">;</span>
            background<span class="token operator">-</span>color<span class="token operator">:</span> pink<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">.</span>w <span class="token punctuation">&#123;</span>
    
            width<span class="token operator">:</span> <span class="token number">1200</span>px<span class="token punctuation">;</span>
            margin<span class="token operator">:</span> <span class="token number">10</span>px auto<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">.</span>header <span class="token punctuation">&#123;</span>
    
            height<span class="token operator">:</span> <span class="token number">150</span>px<span class="token punctuation">;</span>
            background<span class="token operator">-</span>color<span class="token operator">:</span> purple<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">.</span>banner <span class="token punctuation">&#123;</span>
    
            height<span class="token operator">:</span> <span class="token number">250</span>px<span class="token punctuation">;</span>
            background<span class="token operator">-</span>color<span class="token operator">:</span> skyblue<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token punctuation">.</span>main <span class="token punctuation">&#123;</span>
    
            height<span class="token operator">:</span> <span class="token number">1000</span>px<span class="token punctuation">;</span>
            background<span class="token operator">-</span>color<span class="token operator">:</span> yellowgreen<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        span <span class="token punctuation">&#123;</span>
    
            display<span class="token operator">:</span> none<span class="token punctuation">;</span>
            position<span class="token operator">:</span> absolute<span class="token punctuation">;</span>
            bottom<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>

<span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"slider-bar"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"goBack"</span><span class="token operator">></span>返回顶部<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"header w"</span><span class="token operator">></span>头部区域<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"banner w"</span><span class="token operator">></span>banner区域<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"main w"</span><span class="token operator">></span>主体部分<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">//1. 获取元素</span>
        <span class="token keyword">var</span> sliderbar <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.slider-bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> banner <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.banner'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// banner.offestTop 就是被卷去头部的大小 一定要写到滚动的外面</span>
        <span class="token keyword">var</span> bannerTop <span class="token operator">=</span> banner<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
            <span class="token comment">// 当我们侧边栏固定定位之后应该变化的数值</span>
        <span class="token keyword">var</span> sliderbarTop <span class="token operator">=</span> sliderbar<span class="token punctuation">.</span>offsetTop <span class="token operator">-</span> bannerTop<span class="token punctuation">;</span>
        <span class="token comment">// 获取main 主体元素</span>
        <span class="token keyword">var</span> main <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.main'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> goBack <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.goBack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> mainTop <span class="token operator">=</span> main<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
        <span class="token comment">// 2. 页面滚动事件 scroll</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// console.log(11);</span>
            <span class="token comment">// window.pageYOffset 页面被卷去的头部</span>
            <span class="token comment">// console.log(window.pageYOffset);</span>
            <span class="token comment">// 3 .当我们页面被卷去的头部大于等于了 172 此时 侧边栏就要改为固定定位</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>pageYOffset <span class="token operator">>=</span> bannerTop<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                sliderbar<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'fixed'</span><span class="token punctuation">;</span>
                sliderbar<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> sliderbarTop <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    
                sliderbar<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'absolute'</span><span class="token punctuation">;</span>
                sliderbar<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">'300px'</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token comment">// 4. 当我们页面滚动到main盒子，就显示 goback模块</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>pageYOffset <span class="token operator">>=</span> mainTop<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                goBack<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    
                goBack<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>

        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="offset-client-scroll总结"><a class="markdownIt-Anchor" href="#offset-client-scroll总结">#</a> offset, client, scroll 总结</h2>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201112354502.png" alt="在这里插入图片描述"><br>
他们主要用法：<br>
offset 系列 经常用于获得元素位置  <code>offsetLeft offsetTop</code> <br>
client 经常用于获取元素大小  <code>clientWidth clientHeight</code> <br>
scroll 经常用于获取滚动距离  <code>scrollTop scrollLeft</code> <br>
<mark> 注意页面滚动的距离通过 window.pageX (Y) Offset 获得</mark></p>
<hr>
<h2 id="mouseenter和mouseover的区别面试经常问"><a class="markdownIt-Anchor" href="#mouseenter和mouseover的区别面试经常问">#</a> mouseenter 和 mouseover 的区别（面试经常问）</h2>
<p>当鼠标移动到元素上时就会触发 mouseenter 事件<br>
类似 mouseover，它们两者之间的差别是</p>
<blockquote>
<p><code>mouseover</code>  <strong>鼠标经过自身盒子会触发，经过子盒子还会触发</strong>。</p>
<p><code>mouseenter</code>  <strong>只会经过自身盒子触发，经过子盒子不会触发</strong>。__<br>
<mark>之所以这样，就是因为 mouseenter 不会冒泡，所以经过子盒子不会冒泡把事件冒到父盒子上</mark></p>
<blockquote>
<p><strong>跟 mouseenter 搭配 鼠标离开 mouseleave 同样不会冒泡</strong></p>
</blockquote>
</blockquote>
<hr>
<h2 id="4-动画"><a class="markdownIt-Anchor" href="#4-动画">#</a> 4. 动画</h2>
<h3 id="动画实现原理"><a class="markdownIt-Anchor" href="#动画实现原理">#</a> 动画实现原理</h3>
<blockquote>
<p>核心原理：通过定时器 setInterval () 不断移动盒子位置。</p>
</blockquote>
<p>实现步骤：</p>
<ol>
<li>获得盒子当前位置</li>
<li>让盒子在当前位置加上 1 个移动距离</li>
<li>利用定时器不断重复这个操作</li>
<li>加一个结束定时器的条件</li>
<li><mark>注意此元素需要添加定位，才能使用 element.style.left,<strong> 动画的话必须要给那个盒子定位才可以让那个盒子动起来，因用的是 element.style.left 和 element.style.top</strong></mark></li>
</ol>
<h3 id="动画函数简单封装"><a class="markdownIt-Anchor" href="#动画函数简单封装">#</a> 动画函数简单封装</h3>
<blockquote>
<p><strong>注意函数需要传递 2 个参数，动画对象和移动到的距离。</strong></p>
</blockquote>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 简单动画函数封装obj目标对象 target 目标位置</span>
<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>offsetLeft <span class="token operator">>=</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// 停止动画 本质是停止定时器</span>
            <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">//每次均匀向右移动1px</span>
        obj<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> obj<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>

    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token function">animate</span><span class="token punctuation">(</span>aaa<span class="token punctuation">,</span>xxx<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">animate</span><span class="token punctuation">(</span>bbb<span class="token punctuation">,</span>yyy<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="动画函数给不同元素记录不同定时器"><a class="markdownIt-Anchor" href="#动画函数给不同元素记录不同定时器">#</a> 动画函数给不同元素记录不同定时器</h3>
<p>如果多个元素都使用这个动画函数 (然后把这个元素作为参数传进来了)，每次都要 var 声明定时器。我们可以给不同的元素使用不同的定时器（自己专门用自己的定时器）。</p>
<blockquote>
<p>核心原理：利用 JS 是一门动态语言，可以很方便的给当前对象添加属性。</p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">></span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">></span>

<span class="token operator">&lt;</span>head<span class="token operator">></span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"ie=edge"</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>title<span class="token operator">></span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>
    <span class="token operator">&lt;</span>style<span class="token operator">></span>
        div <span class="token punctuation">&#123;</span>
    
            position<span class="token operator">:</span> absolute<span class="token punctuation">;</span>
            left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            width<span class="token operator">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>
            height<span class="token operator">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>
            background<span class="token operator">-</span>color<span class="token operator">:</span> pink<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        span <span class="token punctuation">&#123;</span>
    
            position<span class="token operator">:</span> absolute<span class="token punctuation">;</span>
            left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            top<span class="token operator">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>
            display<span class="token operator">:</span> block<span class="token punctuation">;</span>
            width<span class="token operator">:</span> <span class="token number">150</span>px<span class="token punctuation">;</span>
            height<span class="token operator">:</span> <span class="token number">150</span>px<span class="token punctuation">;</span>
            background<span class="token operator">-</span>color<span class="token operator">:</span> purple<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>

<span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>button<span class="token operator">></span>点击夏雨荷才走<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>span<span class="token operator">></span>夏雨荷<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// var obj = &#123;&#125;;</span>
        <span class="token comment">// obj.name = 'andy';</span>
        <span class="token comment">// 简单动画函数封装obj目标对象 target 目标位置</span>
        <span class="token comment">// 给不同的元素指定了不同的定时器</span>
        <span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// 当我们不断的点击按钮，这个元素的速度会越来越快，因为开启了太多的定时器</span>
            <span class="token comment">// 解决方案就是 让我们元素只有一个定时器执行</span>
            <span class="token comment">// 先清除以前的定时器，只保留当前的一个定时器执行</span>
            <span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            obj<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">//这里是obj.timer添加属性而不是var timer->又不知道是哪一个的计时器还会开辟新的空间,空间一多就浪费</span>
    
                <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>offsetLeft <span class="token operator">>=</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                    <span class="token comment">// 停止动画 本质是停止定时器</span>
                    <span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span><span class="token keyword">else</span><span class="token punctuation">&#123;</span>
                obj<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> obj<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 调用函数</span>
        <span class="token function">animate</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">animate</span><span class="token punctuation">(</span>span<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意如果要是不停触发一个事件调用一个动画函数，因为一般都是定时器实现的，所以要是多个一样的定时器他们会叠加在一起，让所有的效果都叠加在一起，比如说定时器让盒子往右每秒走 1px, 要是触发了事件调用了三个一样的定时器那么盒子会每秒往右走 3px, 是叠加，不会覆盖的.</p>
<p>要解决就是在动画函数一开始先清除这个 obj.timer (要是之前运行过这个动画函数就会给__这个传进来的__对象加的定时器属性) 然后再设新的定时器实现动画效果</p>
<blockquote>
<p>可以看到这里就必须是 obj.timer 而不是 var timer 声明新的定时器，不然根本找不到你想清除的那个定时器</p>
</blockquote>
</blockquote>
<h3 id="缓动效果原理"><a class="markdownIt-Anchor" href="#缓动效果原理">#</a> 缓动效果原理</h3>
<p>缓动动画就是让元素运动速度有所变化，最常见的是让速度慢慢停下来</p>
<p>思路：</p>
<ol>
<li>让盒子每次移动的距离慢慢变小，速度就会慢慢落下来。</li>
<li>核心算法：<strong>(目标值 - 现在的位置) / 10</strong> 做为每次移动的距离步长</li>
<li>停止的条件是：让当前盒子位置等于目标位置就停止定时器</li>
<li>注意步长值需要取整</li>
</ol>
<p>还是在之前的代码基础上进行修改：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// 先清除以前的定时器，只保留当前的一个定时器执行</span>
    <span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 步长值写到定时器的里面</span>
        <span class="token keyword">var</span> step <span class="token operator">=</span> <span class="token punctuation">(</span>target <span class="token operator">-</span> obj<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>offsetLeft <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// 停止动画 本质是停止定时器</span>
            <span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span><span class="token punctuation">&#123;</span>
        <span class="token comment">// 把每次加1 这个步长值改为一个慢慢变小的值  步长公式：(目标值 - 现在的位置) / 10</span>
        obj<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> obj<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> step <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
			<span class="token keyword">var</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
				<span class="token comment">// 调用函数</span>
				<span class="token function">animate</span><span class="token punctuation">(</span>span<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
			<span class="token comment">// 匀速动画 就是 盒子是当前的位置 +  固定的值 10 </span>
			<span class="token comment">// 缓动动画就是  盒子当前的位置 + 变化的值(目标值 - 现在的位置) / 10）</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="动画函数多个目标值之间移动"><a class="markdownIt-Anchor" href="#动画函数多个目标值之间移动">#</a> 动画函数多个目标值之间移动</h3>
<p>可以让动画函数从 800 移动到 500。当我们点击按钮的时候，判断步长是正值还是负值</p>
<ol>
<li>如果是正值，则步长往大了取整（ceil）</li>
<li>如果是负值，则步长向小了取整（floor）</li>
</ol>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            obj<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
                <span class="token comment">// 步长值写到定时器的里面</span>
                <span class="token comment">// 把我们步长值改为整数 不要出现小数的问题</span>
                <span class="token comment">// var step = Math.ceil((target - obj.offsetLeft) / 10);</span>
                <span class="token keyword">var</span> step <span class="token operator">=</span> <span class="token punctuation">(</span>target <span class="token operator">-</span> obj<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>
                step <span class="token operator">=</span> step <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>offsetLeft <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
                    <span class="token comment">// 停止动画 本质是停止定时器</span>
                    <span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span><span class="token punctuation">&#123;</span>
                <span class="token comment">// 把每次加1 这个步长值改为一个慢慢变小的值  步长公式：(目标值 - 现在的位置) / 10</span>
                obj<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> obj<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> step <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">var</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> btn500 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn500'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> btn800 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn800'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        btn500<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
            <span class="token function">animate</span><span class="token punctuation">(</span>span<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        btn800<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
                <span class="token function">animate</span><span class="token punctuation">(</span>span<span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="动画函数添加回调函数最后动画的写法"><a class="markdownIt-Anchor" href="#动画函数添加回调函数最后动画的写法">#</a> 动画函数添加回调函数 (最后动画的写法)</h3>
<p>回调函数原理：<strong><mark>函数可以作为一个参数。将这个函数作为参数传到另一个函数里面，当那个函数执行完之后，再执行传进去的这个函数，这个过程就叫做回调。</mark></strong></p>
<p><strong>回调函数写的位置：定时器结束的位置。</strong></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">></span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">></span>

	<span class="token operator">&lt;</span>head<span class="token operator">></span>
		<span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">></span>
		<span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">></span>
		<span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"ie=edge"</span><span class="token operator">></span>
		<span class="token operator">&lt;</span>title<span class="token operator">></span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>
		<span class="token operator">&lt;</span>style<span class="token operator">></span>
			div <span class="token punctuation">&#123;</span>
     
				position<span class="token operator">:</span> absolute<span class="token punctuation">;</span>
				left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
				width<span class="token operator">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>
				height<span class="token operator">:</span> <span class="token number">100</span>px<span class="token punctuation">;</span>
				background<span class="token operator">-</span>color<span class="token operator">:</span> red<span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>

			span <span class="token punctuation">&#123;</span>
     
				position<span class="token operator">:</span> absolute<span class="token punctuation">;</span>
				left<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
				top<span class="token operator">:</span> <span class="token number">200</span>px<span class="token punctuation">;</span>
				display<span class="token operator">:</span> block<span class="token punctuation">;</span>
				width<span class="token operator">:</span> <span class="token number">150</span>px<span class="token punctuation">;</span>
				height<span class="token operator">:</span> <span class="token number">150</span>px<span class="token punctuation">;</span>
				background<span class="token operator">-</span>color<span class="token operator">:</span> greenyellow<span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">></span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>

	<span class="token operator">&lt;</span>body<span class="token operator">></span>
		<span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"btn500"</span><span class="token operator">></span>点击胡图图到<span class="token number">500</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
		<span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"btn800"</span><span class="token operator">></span>点击胡图图到<span class="token number">800</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
		<span class="token operator">&lt;</span>span<span class="token operator">></span>胡图图<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
		<span class="token operator">&lt;</span>script<span class="token operator">></span>
			<span class="token comment">// 缓动动画函数封装obj目标对象 target 目标位置</span>
			<span class="token comment">// 思路：</span>
			<span class="token comment">// 1. 让盒子每次移动的距离慢慢变小， 速度就会慢慢落下来。</span>
			<span class="token comment">// 2. 核心算法：(目标值 - 现在的位置) / 10 做为每次移动的距离 步长</span>
			<span class="token comment">// 3. 停止的条件是： 让当前盒子位置等于目标位置就停止定时器</span>
			<span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> target<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
				<span class="token comment">// console.log(callback);  callback = function() &#123;&#125;  调用的时候 callback()</span>
				
				<span class="token comment">// 先清除以前的定时器，只保留当前的一个定时器执行</span>
				<span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
				obj<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
					<span class="token comment">// 步长值写到定时器的里面</span>
					<span class="token comment">// 把我们步长值改为整数 不要出现小数的问题</span>
					<span class="token keyword">var</span> step <span class="token operator">=</span> <span class="token punctuation">(</span>target <span class="token operator">-</span> obj<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>
					step <span class="token operator">=</span> step <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>offsetLeft <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
						<span class="token comment">// 停止动画 本质是停止定时器</span>
						<span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
						
                        <span class="token comment">// 回调函数写到定时器结束里面</span>
						<span class="token keyword">if</span> <span class="token punctuation">(</span>callback<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token comment">//判定看有没有这个函数传进来(可能没传,看之前说的关于函数的参数),如果没传进来就不会调用</span>
						    <span class="token comment">// 调用函数</span>
						    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">&#125;</span>
					<span class="token punctuation">&#125;</span> <span class="token keyword">else</span><span class="token punctuation">&#123;</span>
					<span class="token comment">// 把每次加1 这个步长值改为一个慢慢变小的值  步长公式：(目标值 - 现在的位置) / 10</span>
					obj<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> obj<span class="token punctuation">.</span>offsetLeft <span class="token operator">+</span> step <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
			<span class="token keyword">var</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> btn500 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn500'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">var</span> btn800 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn800'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

			btn500<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
				<span class="token comment">// 调用函数</span>
				<span class="token function">animate</span><span class="token punctuation">(</span>span<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
			btn800<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
				<span class="token comment">// 调用函数</span>
				<span class="token function">animate</span><span class="token punctuation">(</span>span<span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
				    <span class="token comment">// alert('你好吗');</span>
				    span<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
				<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
			<span class="token comment">// 匀速动画 就是 盒子是当前的位置 +  固定的值 10 </span>
			<span class="token comment">// 缓动动画就是  盒子当前的位置 + 变化的值(目标值 - 现在的位置) / 10）</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>把传进动画函数的函数参数放到定时器结束时启动，这样就会在动画完结的时候运行你穿的函数参数里面的代码</p>
<blockquote>
<p>这里的回调函数 <code>callback</code>  其实可以不用 if 来判断存不存在</p>
<p>直接 <code>callback&amp;&amp;callback();</code>  就可以因为如果 1 为 true (存在) 就返回 (执行) 2,1 为 false 返回 1</p>
<p>这么干这里的 callback__参数__就是要是用一个函数传进来，就会执行那个传进来的函数，当然这还在动画的停止条件到了，所以在关闭定时器之后执行这个传进来的参数存的函数.</p>
</blockquote>
</blockquote>
<h3 id="动画函数封装到单独js文件里面"><a class="markdownIt-Anchor" href="#动画函数封装到单独js文件里面">#</a> 动画函数封装到单独 JS 文件里面</h3>
<p>因为以后经常使用这个动画函数，可以单独封装到一个 JS 文件里面，使用的时候引用这个 JS 文件即可。</p>
<ol>
<li>单独新建一个 JS 文件。</li>
<li>HTML 文件引入 JS 文件</li>
</ol>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>animate.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后就可以在别处直接调用这个 animate.js 里面的 animate 函数.</p>
<p><strong>引用 animate.js 案例制作：</strong></p>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201121712122.gif" alt="在这里插入图片描述"></p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
        <span class="token selector">.sliderbar</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span>
            <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">bottom</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">line-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
            <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
            <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">.con</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
            <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> purple<span class="token punctuation">;</span>
            <span class="token property">z-index</span><span class="token punctuation">:</span> -1<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sliderbar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span>←<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>con<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>问题反馈<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>animate.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
        <span class="token comment">// 1. 获取元素</span>
        <span class="token keyword">var</span> sliderbar <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.sliderbar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> con <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.con'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 当我们鼠标经过 sliderbar 就会让 con这个盒子滑动到左侧</span>
        <span class="token comment">// 当我们鼠标离开 sliderbar 就会让 con这个盒子滑动到右侧</span>
        sliderbar<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseenter'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
            <span class="token comment">// animate(obj, target, callback);</span>
            <span class="token function">animate</span><span class="token punctuation">(</span>con<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">160</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
                <span class="token comment">// 当我们动画执行完毕，就把 ← 改为 →</span>
                sliderbar<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'→'</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        sliderbar<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
            <span class="token comment">// animate(obj, target, callback);</span>
            <span class="token function">animate</span><span class="token punctuation">(</span>con<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
                sliderbar<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'←'</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
	
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="5-常见网页特效案例"><a class="markdownIt-Anchor" href="#5-常见网页特效案例">#</a> 5、常见网页特效案例</h2>
<h3 id="1-网页轮播图重点"><a class="markdownIt-Anchor" href="#1-网页轮播图重点">#</a> 1. 网页轮播图 (重点)</h3>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201121713187.png" alt="在这里插入图片描述"><br>
<img src="https://img-blog.csdnimg.cn/20210502155828660.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dnaDQzMTg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201121713008.png" alt="在这里插入图片描述"><br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201121713097.png" alt="在这里插入图片描述"><br>
<img src="https://img-blog.csdnimg.cn/202105021600472.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dnaDQzMTg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201121713443.png" alt="在这里插入图片描述"><br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201121713356.png" alt="在这里插入图片描述"><br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201121713736.png" alt="在这里插入图片描述"><br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201121713574.png" alt="在这里插入图片描述"><br>
<img src="https://img-blog.csdnimg.cn/20210502160614988.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dnaDQzMTg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><strong>carousel.html 代码如下：</strong></p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zh-CN<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>轮播图<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 引入css 初始化的css 文件 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css/base.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 引入 轮播图的css文件 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>css/carousel.css<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 这个animate.js 必须写到 index.js的上面引入 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/animate.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
		<span class="token comment">&lt;!-- 引入我们首页的js文件 --></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/carousel.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>w<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>focus fl<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
					<span class="token comment">&lt;!-- 左侧按钮 --></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>arrow-l<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
						<span class="token entity named-entity" title="&lt;">&amp;lt;</span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
					<span class="token comment">&lt;!-- 右侧按钮 --></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>javascript:;<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>arrow-r<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
						<span class="token entity named-entity" title="&gt;">&amp;gt;</span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
					<span class="token comment">&lt;!-- 核心的滚动区域 --></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>
							<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upload/focus.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>
							<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upload/focus1.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>
							<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upload/focus2.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>
							<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upload/focus3.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
					<span class="token comment">&lt;!-- 小圆圈 --></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ol</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>circle<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ol</span><span class="token punctuation">></span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>base.css 代码如下：</strong></p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/*清除元素默认的内外边距  */</span>
<span class="token selector">*</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0
<span class="token punctuation">&#125;</span>
<span class="token comment">/*让所有斜体 不倾斜*/</span>
<span class="token selector">em,
i</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">/*去掉列表前面的小点*/</span>
<span class="token selector">li</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">/*图片没有边框   去掉图片底侧的空白缝隙*/</span>
<span class="token selector">img</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">border</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>  <span class="token comment">/*ie6*/</span>
    <span class="token property">vertical-align</span><span class="token punctuation">:</span> middle<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">/*让button 按钮 变成小手*/</span>
<span class="token selector">button</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">/*取消链接的下划线*/</span>
<span class="token selector">a</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">color</span><span class="token punctuation">:</span> #666<span class="token punctuation">;</span>
    <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">a:hover</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">color</span><span class="token punctuation">:</span> #e33333<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">button,
input</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'Microsoft YaHei'</span><span class="token punctuation">,</span> <span class="token string">'Heiti SC'</span><span class="token punctuation">,</span> tahoma<span class="token punctuation">,</span> arial<span class="token punctuation">,</span> <span class="token string">'Hiragino Sans GB'</span><span class="token punctuation">,</span> \\5B8B\4F53<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
    <span class="token comment">/*取消轮廓线 蓝色的*/</span>
    <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">body</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">font</span><span class="token punctuation">:</span> 12px/1.5 <span class="token string">'Microsoft YaHei'</span><span class="token punctuation">,</span> <span class="token string">'Heiti SC'</span><span class="token punctuation">,</span> tahoma<span class="token punctuation">,</span> arial<span class="token punctuation">,</span> <span class="token string">'Hiragino Sans GB'</span><span class="token punctuation">,</span> \\5B8B\4F53<span class="token punctuation">,</span> sans-serif<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #666
<span class="token punctuation">&#125;</span>

<span class="token selector">.hide,
.none</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">/*清除浮动*/</span>
<span class="token selector">.clearfix:after</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">visibility</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
    <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">"."</span><span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 0
<span class="token punctuation">&#125;</span>

<span class="token selector">.clearfix</span> <span class="token punctuation">&#123;</span>
    
    *<span class="token property">zoom</span><span class="token punctuation">:</span> 1
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>carousel.css 代码如下：</strong></p>
<pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token comment">/* 公共样式 */</span>
<span class="token selector">.fl</span> <span class="token punctuation">&#123;</span>
    
	<span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token selector">.fr</span> <span class="token punctuation">&#123;</span>
    
	<span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">/*版心*/</span>
<span class="token selector">.w</span> <span class="token punctuation">&#123;</span>
    
	<span class="token property">width</span><span class="token punctuation">:</span> 1200px<span class="token punctuation">;</span>
	<span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">/*carousel样式*/</span>

<span class="token selector">.main</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">width</span><span class="token punctuation">:</span> 980px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 455px<span class="token punctuation">;</span>
    <span class="token property">margin-left</span><span class="token punctuation">:</span> 219px<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.focus</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 721px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 455px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> purple<span class="token punctuation">;</span>
    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.focus ul</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 600%<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.focus ul li</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.arrow-l,
.arrow-r</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> -20px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 24px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> .3<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">line-height</span><span class="token punctuation">:</span> 40px<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
    <span class="token property">font-family</span><span class="token punctuation">:</span> <span class="token string">'icomoon'</span><span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 18px<span class="token punctuation">;</span>
    <span class="token property">z-index</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.arrow-r</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.circle</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">bottom</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">left</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.circle li</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>
    <span class="token comment">/*background-color: #fff;*/</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 2px solid <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 0.5<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 0 3px<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
    <span class="token comment">/*鼠标经过显示小手*/</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token selector">.current</span> <span class="token punctuation">&#123;</span>
    
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>carousel.js 代码如下：</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
    <span class="token comment">// 1. 获取元素</span>
    <span class="token keyword">var</span> arrow_l <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.arrow-l'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> arrow_r <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.arrow-r'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> focus <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.focus'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> focusWidth <span class="token operator">=</span> focus<span class="token punctuation">.</span>offsetWidth<span class="token punctuation">;</span>
    <span class="token comment">// 2. 鼠标经过focus 就显示隐藏左右按钮</span>
    focus<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseenter'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        arrow_l<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
        arrow_r<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
        <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 清除定时器变量</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    focus<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        arrow_l<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
        arrow_r<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
        timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">//手动调用点击事件</span>
            arrow_r<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 3. 动态生成小圆圈  有几张图片，我就生成几个小圆圈</span>
    <span class="token keyword">var</span> ul <span class="token operator">=</span> focus<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> ol <span class="token operator">=</span> focus<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.circle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// console.log(ul.children.length);</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ul<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        <span class="token comment">// 创建一个小li </span>
        <span class="token keyword">var</span> li <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 记录当前小圆圈的索引号 通过自定义属性来做 </span>
        li<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 把小li插入到ol 里面</span>
        ol<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>li<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 4. 小圆圈的排他思想 我们可以直接在生成小圆圈的同时直接绑定点击事件</span>
        li<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// 干掉所有人 把所有的小li 清除 current 类名</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ol<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                ol<span class="token punctuation">.</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token comment">// 留下我自己  当前的小li 设置current 类名</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'current'</span><span class="token punctuation">;</span>
            <span class="token comment">// 5. 点击小圆圈，移动图片 当然移动的是 ul </span>
            <span class="token comment">// ul 的移动距离 小圆圈的索引号 乘以 图片的宽度 注意是负值</span>
            <span class="token comment">// 当我们点击了某个小li 就拿到当前小li 的索引号</span>
            <span class="token keyword">var</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 当我们点击了某个小li 就要把这个li 的索引号给 num  </span>
            num <span class="token operator">=</span> index<span class="token punctuation">;</span>
            <span class="token comment">// 当我们点击了某个小li 就要把这个li 的索引号给 circle  </span>
            circle <span class="token operator">=</span> index<span class="token punctuation">;</span>
            <span class="token comment">// num = circle = index;</span>
            <span class="token function">animate</span><span class="token punctuation">(</span>ul<span class="token punctuation">,</span> <span class="token operator">-</span>index <span class="token operator">*</span> focusWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">// 把ol里面的第一个小li设置类名为 current</span>
    ol<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'current'</span><span class="token punctuation">;</span>
    <span class="token comment">// 6. 克隆第一张图片(li)放到ul 最后面</span>
    <span class="token keyword">var</span> first <span class="token operator">=</span> ul<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">cloneNode</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ul<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 7. 点击右侧按钮， 图片滚动一张</span>
    <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// circle 控制小圆圈的播放</span>
    <span class="token keyword">var</span> circle <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token comment">// flag 节流阀</span>
    <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    arrow_r<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">// 关闭节流阀</span>
            <span class="token comment">// 如果走到了最后复制的一张图片，此时 我们的ul 要快速复原 left 改为 0</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> ul<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                ul<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
                num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            num<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token function">animate</span><span class="token punctuation">(</span>ul<span class="token punctuation">,</span> <span class="token operator">-</span>num <span class="token operator">*</span> focusWidth<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// 打开节流阀</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 8. 点击右侧按钮，小圆圈跟随一起变化 可以再声明一个变量控制小圆圈的播放</span>
            circle<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token comment">// 如果circle == 4 说明走到最后我们克隆的这张图片了 我们就复原</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>circle <span class="token operator">==</span> ol<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                circle <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token comment">// 调用函数</span>
            <span class="token function">circleChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 9. 左侧按钮做法</span>
    arrow_l<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                num <span class="token operator">=</span> ul<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>
                ul<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token operator">-</span>num <span class="token operator">*</span> focusWidth <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>

            <span class="token punctuation">&#125;</span>
            num<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token function">animate</span><span class="token punctuation">(</span>ul<span class="token punctuation">,</span> <span class="token operator">-</span>num <span class="token operator">*</span> focusWidth<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 点击左侧按钮，小圆圈跟随一起变化 可以再声明一个变量控制小圆圈的播放</span>
            circle<span class="token operator">--</span><span class="token punctuation">;</span>
            <span class="token comment">// 如果circle &lt; 0  说明第一张图片，则小圆圈要改为第4个小圆圈（3）</span>
            <span class="token comment">// if (circle &lt; 0) &#123;</span>
    
            <span class="token comment">//     circle = ol.children.length - 1;</span>
            <span class="token comment">// &#125;</span>
            circle <span class="token operator">=</span> circle <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">?</span> ol<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">:</span> circle<span class="token punctuation">;</span>
            <span class="token comment">// 调用函数</span>
            <span class="token function">circleChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">circleChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        <span class="token comment">// 先清除其余小圆圈的current类名</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> ol<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            ol<span class="token punctuation">.</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">// 留下当前的小圆圈的current类名</span>
        ol<span class="token punctuation">.</span>children<span class="token punctuation">[</span>circle<span class="token punctuation">]</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'current'</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">// 10. 自动播放轮播图</span>
    <span class="token keyword">var</span> timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        <span class="token comment">//手动调用点击事件</span>
        arrow_r<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>效果图</strong></p>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201121713760.gif" alt="在这里插入图片描述"></p>
<h3 id="2-返回顶部"><a class="markdownIt-Anchor" href="#2-返回顶部">#</a> 2. 返回顶部</h3>
<p><img src="https://img-blog.csdnimg.cn/20210502172101248.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dnaDQzMTg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201121713469.png" alt="在这里插入图片描述"></p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
        <span class="token selector">.slider-bar</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
            <span class="token property">left</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
            <span class="token property">top</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
            <span class="token property">margin-left</span><span class="token punctuation">:</span> 600px<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 45px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 130px<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">.w</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">width</span><span class="token punctuation">:</span> 1200px<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 10px auto<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">.header</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> purple<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">.banner</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">height</span><span class="token punctuation">:</span> 250px<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">.main</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">height</span><span class="token punctuation">:</span> 1000px<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> yellowgreen<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">span</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
            <span class="token property">bottom</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>slider-bar<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>goBack<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>返回顶部<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>header w<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>头部区域<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>banner w<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>banner区域<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>main w<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>主体部分<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
        <span class="token comment">//1. 获取元素</span>
        <span class="token keyword">var</span> sliderbar <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.slider-bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> banner <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.banner'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// banner.offestTop 就是被卷去头部的大小 一定要写到滚动的外面</span>
        <span class="token keyword">var</span> bannerTop <span class="token operator">=</span> banner<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
            <span class="token comment">// 当我们侧边栏固定定位之后应该变化的数值</span>
        <span class="token keyword">var</span> sliderbarTop <span class="token operator">=</span> sliderbar<span class="token punctuation">.</span>offsetTop <span class="token operator">-</span> bannerTop<span class="token punctuation">;</span>
        <span class="token comment">// 获取main 主体元素</span>
        <span class="token keyword">var</span> main <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.main'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> goBack <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.goBack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> mainTop <span class="token operator">=</span> main<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
        <span class="token comment">// 2. 页面滚动事件 scroll</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
                <span class="token comment">// console.log(11);</span>
                <span class="token comment">// window.pageYOffset 页面被卷去的头部</span>
                <span class="token comment">// console.log(window.pageYOffset);</span>
                <span class="token comment">// 3 .当我们页面被卷去的头部大于等于了 172 此时 侧边栏就要改为固定定位</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>pageYOffset <span class="token operator">>=</span> bannerTop<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
                    sliderbar<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'fixed'</span><span class="token punctuation">;</span>
                    sliderbar<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> sliderbarTop <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
     
                    sliderbar<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'absolute'</span><span class="token punctuation">;</span>
                    sliderbar<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">'300px'</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
                <span class="token comment">// 4. 当我们页面滚动到main盒子，就显示 goback模块</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>pageYOffset <span class="token operator">>=</span> mainTop<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
                    goBack<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'block'</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
     
                    goBack<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> <span class="token string">'none'</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>

            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token comment">// 3. 当我们点击了返回顶部模块，就让窗口滚动的页面的最上方</span>
        goBack<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
            <span class="token comment">// 里面的x和y 不跟单位的 直接写数字即可</span>
            <span class="token comment">// window.scroll(0, 0);</span>
            <span class="token comment">// 因为是窗口滚动 所以对象是window</span>
            <span class="token function">animate</span><span class="token punctuation">(</span>window<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 动画函数</span>
        <span class="token keyword">function</span> <span class="token function">animate</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> target<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
            <span class="token comment">// console.log(callback);  callback = function() &#123;&#125;  调用的时候 callback()</span>

            <span class="token comment">// 先清除以前的定时器，只保留当前的一个定时器执行</span>
            <span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            obj<span class="token punctuation">.</span>timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
                <span class="token comment">// 步长值写到定时器的里面</span>
                <span class="token comment">// 把我们步长值改为整数 不要出现小数的问题</span>
                <span class="token comment">// var step = Math.ceil((target - obj.offsetLeft) / 10);</span>
                <span class="token keyword">var</span> step <span class="token operator">=</span> <span class="token punctuation">(</span>target <span class="token operator">-</span> window<span class="token punctuation">.</span>pageYOffset<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>
                step <span class="token operator">=</span> step <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">?</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span> <span class="token operator">:</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>step<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>pageYOffset <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
                    <span class="token comment">// 停止动画 本质是停止定时器</span>
                    <span class="token function">clearInterval</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">// 回调函数写到定时器结束里面</span>
                    callback <span class="token operator">&amp;&amp;</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
                <span class="token comment">// 把每次加1 这个步长值改为一个慢慢变小的值  步长公式：(目标值 - 现在的位置) / 10</span>
                <span class="token comment">// obj.style.left = window.pageYOffset + step + 'px';</span>
                window<span class="token punctuation">.</span><span class="token function">scroll</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> window<span class="token punctuation">.</span>pageYOffset <span class="token operator">+</span> step<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="3-筋斗云案例"><a class="markdownIt-Anchor" href="#3-筋斗云案例">#</a> 3. 筋斗云案例</h3>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201121713068.png" alt="在这里插入图片描述"><br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201121713549.png" alt="在这里插入图片描述"></p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
        <span class="token selector">*</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 0
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">ul</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">body</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">background-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">.c-nav</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">width</span><span class="token punctuation">:</span> 900px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 42px<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> #fff <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>images/rss.png<span class="token punctuation">)</span></span> no-repeat right center<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 100px auto<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
            <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">.c-nav ul</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">.c-nav li</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 83px<span class="token punctuation">;</span>
            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">line-height</span><span class="token punctuation">:</span> 42px<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">.c-nav li a</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">color</span><span class="token punctuation">:</span> #333<span class="token punctuation">;</span>
            <span class="token property">text-decoration</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
            <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 42px<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">.c-nav li a:hover</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">.c-nav li.current a</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">color</span><span class="token punctuation">:</span> #0dff1d<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        
        <span class="token selector">.cloud</span> <span class="token punctuation">&#123;</span>
     
            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
            <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 83px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 42px<span class="token punctuation">;</span>
            <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>images/cloud.gif<span class="token punctuation">)</span></span> no-repeat<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>animate.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
            <span class="token comment">// 1. 获取元素</span>
            <span class="token keyword">var</span> cloud <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.cloud'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> c_nav <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.c-nav'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> lis <span class="token operator">=</span> c_nav<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 2. 给所有的小li绑定事件 </span>
            <span class="token comment">// 这个current 做为筋斗云的起始位置</span>
            <span class="token keyword">var</span> current <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
                <span class="token comment">// (1) 鼠标经过把当前小li 的位置做为目标值</span>
                lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseenter'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
                    <span class="token function">animate</span><span class="token punctuation">(</span>cloud<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// (2) 鼠标离开就回到起始的位置 </span>
                lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'mouseleave'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
                    <span class="token function">animate</span><span class="token punctuation">(</span>cloud<span class="token punctuation">,</span> current<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// (3) 当我们鼠标点击，就把当前位置做为目标值</span>
                lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
     
                    current <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>c_nav<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>c-nav<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cloud<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>current<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>首页新闻<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>师资力量<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>活动策划<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>企业文化<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>招聘信息<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>公司简介<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>详情内容<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>#<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>运营方向<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>效果图</strong><br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201121713876.gif" alt="在这里插入图片描述"></p>
<hr>
<h1 id="javascript之本地存储"><a class="markdownIt-Anchor" href="#javascript之本地存储">#</a> javaScript 之本地存储</h1>
<p>随着互联网的快速发展，基于网页的应用越来越普遍，同时也变的越来越复杂，为了满足各种各样的需求，会经常性__在本地存储__大量的数据，HTML5 规范提出了相关解决方案。</p>
<h3 id="本地存储特性"><a class="markdownIt-Anchor" href="#本地存储特性">#</a> 本地存储特性</h3>
<ol>
<li>数据存储在用户浏览器中</li>
<li>设置、读取方便、甚至页面刷新不丢失数据</li>
<li>容量较大，sessionStorage 约 5M、localStorage 约 20M</li>
<li><strong>只能存储字符串</strong>，可以将对象 JSON.stringify () 编码后存储</li>
</ol>
<h3 id="windowsessionstorage"><a class="markdownIt-Anchor" href="#windowsessionstorage">#</a>  <code>window.sessionStorage</code></h3>
<ol>
<li>__生命周期 (就是数据还存在的时候)<strong> 为关闭浏览器窗口，也就是说__sessionStorage 在你关闭窗口时本地存储的数据就没有了，其他操作比如说刷新页面是不会结束存储的数据的生命周期的</strong></li>
<li>在同一个窗口 (页面) 下数据可以共享</li>
<li>以键值对的形式存储使用</li>
</ol>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">sessionStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>   <span class="token comment">//存储数据,这些都省略掉了前面的"window."</span>

sessionStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>         <span class="token comment">//获取数据</span>

sessionStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>     <span class="token comment">//删除数据</span>

sessionStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment">//删除所有数据</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意 key 和 value 要么是变量，要么是字符串 (用引号包起来)</p>
<blockquote>
<p>如果想改数据就是重新给同一个 key 赋值就会覆盖掉之前的</p>
</blockquote>
</blockquote>
<h3 id="windowlocalstorage"><a class="markdownIt-Anchor" href="#windowlocalstorage">#</a>  <code>window.localStorage</code></h3>
<ol>
<li><strong>生命周期永久生效，除非手动删除 否则关闭页面也会存在</strong></li>
<li>可以多窗口（页面）共享（同一浏览器可以共享）</li>
<li>以键值对的形式存储使用</li>
</ol>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token comment">//存储数据</span>

localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>       <span class="token comment">//获取数据</span>

localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>    <span class="token comment">//删除数据</span>

localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>           <span class="token comment">//删除所有数据</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>localStorage 类似于 sessionStorage，区别在于 localStorage 可以永久存储，且支持跨浏览器访问，而 sessionStorage 在页面被关闭时，存储在里面的数据就会被清除，localStorage 则不会。</p>
<p>localStorage 存入的数据只能是字符串的形式。</p>
</blockquote>
<blockquote>
<p>当想存储对象类型数据时，要使用 <code>JSON.stringify()</code>  进行转换成字符串类型数据</p>
</blockquote>
<h4 id="localstorage的使用方式"><a class="markdownIt-Anchor" href="#localstorage的使用方式">#</a> localStorage 的使用方式</h4>
<h5 id="增加localstorage"><a class="markdownIt-Anchor" href="#增加localstorage">#</a> 增加 localStorage</h5>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// localStorage.setItem('标识符', 'JSON字符串数据');</span>
localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'order'</span><span class="token punctuation">,</span> <span class="token string">'&#123;"goods_id":449,"count":1&#125;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h5 id="读取localstorage"><a class="markdownIt-Anchor" href="#读取localstorage">#</a> 读取 localStorage</h5>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// localStorage.getItem('标识符');</span>
<span class="token keyword">let</span> res <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'order'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h5 id="删除localstorage"><a class="markdownIt-Anchor" href="#删除localstorage">#</a> 删除 localStorage</h5>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// localStorage.removeItem('标识符');</span>
localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'order'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h5 id="删除所有的localstorage"><a class="markdownIt-Anchor" href="#删除所有的localstorage">#</a> 删除所有的 localStorage</h5>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// localStorage.clear();</span>
localStorage<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h4 id="json对象与字符串的转化"><a class="markdownIt-Anchor" href="#json对象与字符串的转化">#</a> JSON 对象与字符串的转化</h4>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201140043707.png" alt="image-20220114004303555"></p>
<h5 id="json字符串转成json对象"><a class="markdownIt-Anchor" href="#json字符串转成json对象">#</a> JSON 字符串转成 JSON 对象</h5>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token string">"id"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"seabert"</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
str <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="json对象转成json字符串"><a class="markdownIt-Anchor" href="#json对象转成json字符串">#</a> JSON 对象转成 JSON 字符串</h5>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span><span class="token string">"id"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token operator">:</span> <span class="token string">"seabert"</span><span class="token punctuation">&#125;</span>
obj <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><strong>需要转换为 JSON 字符串因为 localStorage 和 sessionStorage 只能存字符串数据类型.</strong></p>
<p>要是直接存对象会是之后取出来会是像这种:[object Object]</p>
</blockquote>
<h4 id="chrome浏览器中查看localstorage"><a class="markdownIt-Anchor" href="#chrome浏览器中查看localstorage">#</a> Chrome 浏览器中查看 localStorage</h4>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201122349806.png" alt="image.png"></p>
<p>使用例子:</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>js/jquery.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">var</span> todolist <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
            title<span class="token operator">:</span> <span class="token string">'我今天吃八个馒头'</span><span class="token punctuation">,</span>
            done<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
            title<span class="token operator">:</span> <span class="token string">'我今天学习jq'</span><span class="token punctuation">,</span>
            done<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// localStorage.setItem("todo", todolist);</span>
        <span class="token comment">// 1. 本地存储里面只能存储字符串的数据格式 把我们的数组对象转换为字符串格式 JSON.stringify()</span>
        localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"todo"</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>todolist<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> data <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"todo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// console.log(typeof data);</span>
        <span class="token comment">// console.log(data[0].title);</span>
        <span class="token comment">// 2. 获取本地存储的数据 我们需要把里面的字符串数据转换为 对象格式 JSON.parse()</span>
        data <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h3 id="记住用户名案例"><a class="markdownIt-Anchor" href="#记住用户名案例">#</a> 记住用户名案例</h3>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ie=edge<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>remember<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 记住用户名
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
		<span class="token keyword">var</span> username <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#username'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> remember <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#remember'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		remember<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>checked<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
				localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'uname'</span><span class="token punctuation">,</span> username<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
				localStorage<span class="token punctuation">.</span><span class="token function">removeItem</span><span class="token punctuation">(</span><span class="token string">'uname'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">&#125;</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'uname'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
			username<span class="token punctuation">.</span>value <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'uname'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			remember<span class="token punctuation">.</span>checked <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">&#125;</span>
	</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h3 id="cookie"><a class="markdownIt-Anchor" href="#cookie">#</a> cookie</h3>
<p><strong>简介</strong></p>
<ul>
<li>Cookie 是一些数据，存储于你电脑上的文本文件中，用于存储 web 页面的用户信息</li>
<li>Cookie 数据是以键值对的形式存在的，每个键值对都有过期时间。如果不设置时间，浏览器关闭，cookie 就会消失，当然</li>
<li>用户也可以手动清除 cookie</li>
<li>Cookie 每次都会携带在 HTTP 头中，如果使用 cookie 保存过多数据会带来性能问题</li>
<li>Cookie 内存大小受限，一般每个域名下是 4K 左右，每个域名大概能存储 50 个键值对</li>
</ul>
<p><strong>基本操作</strong></p>
<ul>
<li>通过访问 document.cookie 可以对 cookie 进行创建，修改与获取。</li>
<li>默认情况下，cookie 在浏览器关闭时删除，你还可以为 cookie 的某个键值对添加一个过期时间</li>
<li>如果设置新的 cookie 时，某个 key 已经存在，则会更新这个 key 对应的值，否则他们会同时存在 cookie 中</li>
</ul>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">//设置cookie </span>
document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">"username=orochiz"</span><span class="token punctuation">;</span>
document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">"age=20"</span><span class="token punctuation">;</span>
<span class="token comment">//读取cookie </span>
<span class="token keyword">var</span> msg <span class="token operator">=</span> document<span class="token punctuation">.</span>cookie
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span> <span class="token comment">//username=orochiz;age=20 </span>

<span class="token comment">//添加过期时间（单位：天） </span>
<span class="token keyword">var</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//当前时间2019-9-25 </span>
<span class="token keyword">var</span> days <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">//3天</span>
date<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> days<span class="token punctuation">)</span>
document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">"username=orochiz;"</span> <span class="token operator">+</span> <span class="token string">"expires="</span> <span class="token operator">+</span> date<span class="token punctuation">;</span>
<span class="token comment">//删除cookie（给某个键值对设置过期的时间） </span>
date<span class="token punctuation">.</span><span class="token function">setDate</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>cookie<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token operator">&lt;</span>script<span class="token operator">></span>
			<span class="token comment">/*
			  设置 cookie 
			  直接写 document.cookie = "key=value"设置一条cookie
			  一次只能设置一条 cookie 
			  默认的过期时间 是 session 
			  如果需要设置过期时间，直接在本条 cookie 后面添加一个 expires 
			  过期时间的值 是一个时间对象
			  如果传递当前时间，就是会话级别 
			  如果传递的是未来时间，会在将来的某一个时间过期
			*/</span>
		   <span class="token comment">// document.cookie = "a=100";</span>
		   <span class="token comment">// console.log(document.cookie)</span>
		   <span class="token comment">// 时间对象</span>
		   <span class="token keyword">var</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span><span class="token string">'000'</span><span class="token punctuation">)</span>
		   <span class="token comment">// 设置 过期时间</span>
		   <span class="token comment">//document.cookie = "a=100;expires="+time;</span>
		   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'70年到现在的时间戳'</span><span class="token punctuation">)</span>
		   <span class="token comment">// 匹配 cookie 的时间</span>
		   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1000</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		   time<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1000</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">8</span><span class="token operator">+</span><span class="token number">1000</span><span class="token operator">*</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">,</span><span class="token string">'设置后的时间'</span><span class="token punctuation">)</span>
		   document<span class="token punctuation">.</span>cookie <span class="token operator">=</span> <span class="token string">"a=100;expires="</span><span class="token operator">+</span>time<span class="token punctuation">;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h3 id="总结以及sessionstoragelocalstoragecookie区别"><a class="markdownIt-Anchor" href="#总结以及sessionstoragelocalstoragecookie区别">#</a> 总结以及 sessionStorage,localStorage,cookie 区别</h3>
<p>** 相同点：** 都保存在浏览器端，可以下图位置查看储存的信息</p>
<p><strong>不同点：</strong></p>
<p>①传递方式不同</p>
<p>cookie 数据始终在同源的 http 请求中携带（即使不需要），即 cookie 在浏览器和服务器间来回传递。</p>
<p>sessionStorage 和 localStorage 不会自动把数据发给服务器，仅在本地保存。</p>
<p>②数据大小不同</p>
<p>cookie 数据还有路径（path）的概念，可以限制 cookie 只属于某个路径下。<br>
存储大小限制也不同，cookie 数据不能超过 4k，同时因为每次 http 请求都会携带 cookie，所以 cookie 只适合保存很小的数据，如会话标识。</p>
<p>sessionStorage 和 localStorage 虽然也有存储大小的限制，但比 cookie 大得多，可以达到 5M 或更大。</p>
<p>③数据有效期不同</p>
<p>sessionStorage：仅在当前浏览器窗口关闭前有效，自然也就不可能持久保持；</p>
<p>localStorage：始终有效，窗口或浏览器关闭也一直保存，因此用作持久数据；</p>
<p>cookie 只在设置的 cookie 过期时间之前一直有效，即使窗口或浏览器关闭。</p>
<p>④作用域不同</p>
<p>sessionStorage 不在不同的浏览器窗口中共享，即使是同一个页面；</p>
<p>localStorage 在所有同源窗口中都是共享的；</p>
<p>cookie 也是在所有同源窗口中都是共享的。</p>
<p>WebStorage 支持事件通知机制，可以将数据更新的通知发送给监听者。</p>
<p>WebStorage 的 api 接口使用更方便。</p>
<hr>
<h1 id="json"><a class="markdownIt-Anchor" href="#json">#</a> JSON</h1>
<p>JSON 指 <strong>JavaScript 对象表示法</strong>（<strong>J</strong>ava<strong>S</strong>cript <strong>O</strong>bject <strong>N</strong>otation），是一种轻量级的数据交换格式，用于存储和交换文本信息。JSON 采用了类似 C 语言家族的习惯，易于人阅读和编写，同时也易于机器解析和生成。</p>
<p>JSON 在用途上类似 XML，但比 XML 更小、更快，更易解析。</p>
<h2 id="简介"><a class="markdownIt-Anchor" href="#简介">#</a> 简介</h2>
<h3 id="什么是-json"><a class="markdownIt-Anchor" href="#什么是-json">#</a> 什么是 JSON</h3>
<ul>
<li>JSON 指的是 JavaScript 对象表示法（<strong>J</strong>ava<strong>S</strong>cript <strong>O</strong>bject <strong>N</strong>otation）。</li>
<li>JSON 是轻量级的文本数据交换格式。</li>
<li>JSON 独立于语言。</li>
<li>JSON 具有自我描述性，更易理解。</li>
</ul>
<p>JSON 使用 JavaScript 语法来描述数据对象，但是 JSON 仍然独立于语言和平台。JSON 解析器和 JSON 库支持许多不同的编程语言。目前很多动态编程语言（如 PHP、JSP、.NET）都支持 JSON。</p>
<h3 id="json-转换为-javascript-对象"><a class="markdownIt-Anchor" href="#json-转换为-javascript-对象">#</a> JSON 转换为 JavaScript 对象</h3>
<p>JSON 文本格式在语法上与创建 JavaScript 对象的代码相同。</p>
<p>由于这种相似性，无需解析器，JavaScript 程序能够使用内置的  <code>eval()</code>  函数，用 JSON 数据来生成原生的 JavaScript 对象。</p>
<p>JSON 是一种轻量级的基于文本的开放标准，被设计用于可读的数据交换。约定使用 JSON 的程序包括 C、C++、Java、Python、Perl 等等。</p>
<ul>
<li>用于可读的数据交换。</li>
<li>从 JavaScript 脚本语言中演变而来。</li>
<li>文件扩展名是 <strong>.json</strong>。</li>
<li>JSON 的互联网媒体类型是 <strong>application/json</strong>。</li>
</ul>
<h3 id="json-的适用范围"><a class="markdownIt-Anchor" href="#json-的适用范围">#</a> JSON 的适用范围</h3>
<ul>
<li>用于编写基于 JavaScript 的应用程序，包括浏览器扩展和网站。</li>
<li>JSON 格式可以用于通过网络连接序列化和传输结构化数据。</li>
<li>主要用于在服务器和 Web 应用程序之间传输数据。</li>
<li>Web 服务和 APIs 可以使用 JSON 格式提供公用数据。</li>
<li>还可以用于现代编程语言中。</li>
</ul>
<h3 id="json-的特点"><a class="markdownIt-Anchor" href="#json-的特点">#</a> JSON 的特点</h3>
<ul>
<li>JSON 容易阅读和编写。</li>
<li>它是一种轻量级的基于文本的交换格式。</li>
<li>与语言无关。</li>
</ul>
<h3 id="简单示例"><a class="markdownIt-Anchor" href="#简单示例">#</a> 简单示例</h3>
<p>鉴于书籍数据有语言和版本信息，下面的例子展示了使用 JSON 存储书籍信息：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"book"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"01"</span><span class="token punctuation">,</span>
            <span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"Java"</span><span class="token punctuation">,</span>
            <span class="token property">"edition"</span><span class="token operator">:</span> <span class="token string">"third"</span><span class="token punctuation">,</span>
            <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"Herbert Schildt"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"07"</span><span class="token punctuation">,</span>
            <span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"C++"</span><span class="token punctuation">,</span>
            <span class="token property">"edition"</span><span class="token operator">:</span> <span class="token string">"second"</span><span class="token punctuation">,</span>
            <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"E.Balagurusamy"</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="与-xml-相似之处"><a class="markdownIt-Anchor" href="#与-xml-相似之处">#</a> 与 XML 相似之处</h3>
<ul>
<li>JSON 是纯文本。</li>
<li>JSON 具有 “自我描述性”（人类可读）。</li>
<li>JSON 具有层级结构（值中存在值）。</li>
<li>JSON 可通过 JavaScript 进行解析。</li>
<li>JSON 数据可使用 AJAX 进行传输。</li>
</ul>
<h3 id="与-xml-不同之处"><a class="markdownIt-Anchor" href="#与-xml-不同之处">#</a> 与 XML 不同之处</h3>
<ul>
<li>没有结束标签。</li>
<li>更短。</li>
<li>读写的速度更快。</li>
<li>能够使用内建的 JavaScript  <code>eval()</code>  方法进行解析。</li>
<li>使用数组。</li>
<li>不使用保留字。</li>
</ul>
<h3 id="为什么使用-json"><a class="markdownIt-Anchor" href="#为什么使用-json">#</a> 为什么使用 JSON</h3>
<p>对于 AJAX 应用程序来说，JSON 比 XML 更快更易使用：</p>
<h4 id="使用-xml"><a class="markdownIt-Anchor" href="#使用-xml">#</a> 使用 XML</h4>
<ol>
<li>读取 XML 文档；</li>
<li>使用 XML DOM 来循环遍历文档；</li>
<li>读取值并存储在变量中。</li>
</ol>
<h4 id="使用-json"><a class="markdownIt-Anchor" href="#使用-json">#</a> 使用 JSON</h4>
<ol>
<li>读取 JSON 字符串；</li>
<li>用  <code>eval()</code>  处理 JSON 字符串。</li>
</ol>
<h2 id="语法"><a class="markdownIt-Anchor" href="#语法">#</a> 语法</h2>
<p>JSON 使用 JavaScript 语法来描述数据对象，但是 JSON 仍然独立于语言和平台。</p>
<p>JSON 的语法基本上可以视为 JavaScript 语法的一个子集，包括以下内容：</p>
<ul>
<li>数据使用名称－值对表示。</li>
<li>使用大括号保存对象，每个键后面跟着一个冒号  <code>:</code> ，名称－值对之间使用逗号  <code>,</code>  分隔。</li>
<li>使用方括号保存数组，数组之间使用逗号  <code>,</code>  分隔。</li>
<li><mark>注意: JSON 对象需要 键 被双引号包括住，然后值可以是…(看下面)</mark></li>
</ul>
<p>下面是一个简单的示例：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"book"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"01"</span><span class="token punctuation">,</span>
            <span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"Java"</span><span class="token punctuation">,</span>
            <span class="token property">"edition"</span><span class="token operator">:</span> <span class="token string">"third"</span><span class="token punctuation">,</span>
            <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"Herbert Schildt"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"07"</span><span class="token punctuation">,</span>
            <span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"C++"</span><span class="token punctuation">,</span>
            <span class="token property">"edition"</span><span class="token operator">:</span> <span class="token string">"second"</span><span class="token punctuation">,</span>
            <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"E.Balagurusamy"</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>JSON 支持以下两种数据结构：</p>
<ul>
<li><strong>名称－值对集合</strong>：这一数据结构由不同的编程语言支持。</li>
<li><strong>有序的值列表</strong>：包括数组、列表、向量或序列等等。</li>
</ul>
<h3 id="json-语法规则"><a class="markdownIt-Anchor" href="#json-语法规则">#</a> JSON 语法规则</h3>
<p>JSON 语法是 JavaScript 对象表示法语法的子集。</p>
<p>JSON 语法规则不复杂，它参考了 C 语言家族的一些习惯，学习起来并不会感到陌生。</p>
<ul>
<li>数据在名称－值对中；</li>
<li>数据由逗号分隔；</li>
<li>花括号保存对象；</li>
<li>方括号保存数组。</li>
</ul>
<h3 id="json-名称-值对"><a class="markdownIt-Anchor" href="#json-名称-值对">#</a> JSON 名称－值对</h3>
<p>JSON 数据的书写格式是：名称－值对。</p>
<p>名称－值对包括字段名称（在双引号中），后面跟一个冒号，然后是值：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token property">"firstName"</span> <span class="token operator">:</span> <span class="token string">"John"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>这很容易理解，等价于这条 JavaScript 语句：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">firstName <span class="token operator">=</span> <span class="token string">"John"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="json-值"><a class="markdownIt-Anchor" href="#json-值">#</a> JSON 值</h3>
<p>JSON 值可以是：</p>
<ul>
<li>数字（整数或浮点数）</li>
<li>字符串（在双引号中）</li>
<li>布尔值（true 或 false）</li>
<li>数组（在方括号中）</li>
<li>对象（在花括号中）</li>
<li>null</li>
</ul>
<h3 id="json-对象"><a class="markdownIt-Anchor" href="#json-对象">#</a> JSON 对象</h3>
<p>JSON 对象在花括号中书写。对象可以包含多个名称－值对：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"firstName"</span><span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
    <span class="token property">"lastName"</span><span class="token operator">:</span> <span class="token string">"Doe"</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>这一点也容易理解，与这条 JavaScript 语句等价：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">firstName <span class="token operator">=</span> <span class="token string">"John"</span><span class="token punctuation">;</span>
lastName <span class="token operator">=</span> <span class="token string">"Doe"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="json-数组"><a class="markdownIt-Anchor" href="#json-数组">#</a> JSON 数组</h3>
<p>JSON 数组在方括号中书写。数组可包含多个对象：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"employees"</span><span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">//键一定是双引号,这个键本身是个复杂数据类型,存的对象里面的键也需要双引号</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"firstName"</span><span class="token operator">:</span> <span class="token string">"John"</span><span class="token punctuation">,</span>
            <span class="token property">"lastName"</span><span class="token operator">:</span> <span class="token string">"Doe"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"firstName"</span><span class="token operator">:</span> <span class="token string">"Anna"</span><span class="token punctuation">,</span>
            <span class="token property">"lastName"</span><span class="token operator">:</span> <span class="token string">"Smith"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"firstName"</span><span class="token operator">:</span> <span class="token string">"Peter"</span><span class="token punctuation">,</span>
            <span class="token property">"lastName"</span><span class="token operator">:</span> <span class="token string">"Jones"</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在上面的例子中，对象 “employees” 是包含三个对象的数组。每个对象代表一条关于某人（有姓和名）的记录。</p>
<h3 id="json-文件"><a class="markdownIt-Anchor" href="#json-文件">#</a> JSON 文件</h3>
<ul>
<li>JSON 文件的文件类型是 “.json”。</li>
<li>JSON 文本的 MIME 类型是 “application/json”。</li>
</ul>
<h3 id="javascript-对象转换为-json-文本"><a class="markdownIt-Anchor" href="#javascript-对象转换为-json-文本">#</a> JavaScript 对象转换为 JSON 文本</h3>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201151440646.png" alt="image-20220115144053511"></p>
<p>或者执行如下命令即可：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">String myObjectInJSON <span class="token operator">=</span> myObject<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="数据类型"><a class="markdownIt-Anchor" href="#数据类型">#</a> 数据类型</h2>
<p>JSON 格式支持以下数据类型：</p>
<table>
<thead>
<tr>
<th style="text-align:center">类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">数字型（Number）</td>
<td>JavaScript 中的双精度浮点型格式</td>
</tr>
<tr>
<td style="text-align:center">字符串型（String）</td>
<td>双引号包裹的 Unicode 字符和反斜杠转义字符</td>
</tr>
<tr>
<td style="text-align:center">布尔型（Boolean）</td>
<td>true 或 false</td>
</tr>
<tr>
<td style="text-align:center">数组（Array）</td>
<td>有序的值序列</td>
</tr>
<tr>
<td style="text-align:center">值（Value）</td>
<td>可以是字符串、数字、true 或 false、null 等等</td>
</tr>
<tr>
<td style="text-align:center">对象（Object）</td>
<td>无序的名称－值对集合</td>
</tr>
<tr>
<td style="text-align:center">空格（Whitespace）</td>
<td>可用于任意符号对之间</td>
</tr>
<tr>
<td style="text-align:center">null</td>
<td>空</td>
</tr>
</tbody>
</table>
<h3 id="数字型"><a class="markdownIt-Anchor" href="#数字型">#</a> 数字型</h3>
<ul>
<li>JavaScript 中的双精度浮点型格式，取决于实现。</li>
<li>不能使用八进制和十六进制格式。</li>
<li>在数字中不能使用 NaN 和 Infinity。</li>
</ul>
<p>下表展示了数字类型：</p>
<table>
<thead>
<tr>
<th style="text-align:center">类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">整型（Integer）</td>
<td>数字 1～9，0 和正负数</td>
</tr>
<tr>
<td style="text-align:center">分数（Fraction）</td>
<td>分数，比如 .3、.9</td>
</tr>
<tr>
<td style="text-align:center">指数（Exponent）</td>
<td>指数，比如 e，e+，e-，E，E+，E-</td>
</tr>
</tbody>
</table>
<h4 id="语法-2"><a class="markdownIt-Anchor" href="#语法-2">#</a> 语法</h4>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> json<span class="token operator">-</span>object<span class="token operator">-</span>name <span class="token operator">=</span> <span class="token punctuation">&#123;</span> string <span class="token operator">:</span> number_value<span class="token punctuation">,</span> … <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="示例"><a class="markdownIt-Anchor" href="#示例">#</a> 示例</h4>
<p>下面的示例展示了数字类型，<strong>其<mark>值</mark>不应该使用引号包裹</strong>：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>marks<span class="token operator">:</span> <span class="token number">97</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="字符串型"><a class="markdownIt-Anchor" href="#字符串型">#</a> 字符串型</h3>
<ul>
<li>零个或多个双引号包裹的 Unicode 字符以及反斜杠转义序列。</li>
<li>字符就是只有一个字符的字符串，长度为 1。</li>
</ul>
<p>下表展示了字符串类型：</p>
<table>
<thead>
<tr>
<th style="text-align:center">类型</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">&quot;</td>
<td style="text-align:center">双引号</td>
</tr>
<tr>
<td style="text-align:center">\</td>
<td style="text-align:center">反斜杠</td>
</tr>
<tr>
<td style="text-align:center">/</td>
<td style="text-align:center">斜杠</td>
</tr>
<tr>
<td style="text-align:center">\b</td>
<td style="text-align:center">退格符</td>
</tr>
<tr>
<td style="text-align:center">\f</td>
<td style="text-align:center">换页符</td>
</tr>
<tr>
<td style="text-align:center">\n</td>
<td style="text-align:center">换行符</td>
</tr>
<tr>
<td style="text-align:center">\r</td>
<td style="text-align:center">回车符</td>
</tr>
<tr>
<td style="text-align:center">\t</td>
<td style="text-align:center">水平制表符</td>
</tr>
<tr>
<td style="text-align:center">\u</td>
<td style="text-align:center">四位十六进制数字</td>
</tr>
</tbody>
</table>
<h4 id="语法-3"><a class="markdownIt-Anchor" href="#语法-3">#</a> 语法</h4>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> json<span class="token operator">-</span>object<span class="token operator">-</span>name <span class="token operator">=</span> <span class="token punctuation">&#123;</span> string <span class="token operator">:</span> <span class="token string">"string value"</span><span class="token punctuation">,</span> … <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="示例-2"><a class="markdownIt-Anchor" href="#示例-2">#</a> 示例</h4>
<p>下面的示例展示了字符串数据类型：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>name<span class="token operator">:</span> <span class="token string">'Amit'</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="布尔型"><a class="markdownIt-Anchor" href="#布尔型">#</a> 布尔型</h3>
<p>它包含 true 和 false 两个值。</p>
<h4 id="语法-4"><a class="markdownIt-Anchor" href="#语法-4">#</a> 语法</h4>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> json<span class="token operator">-</span>object<span class="token operator">-</span>name <span class="token operator">=</span> <span class="token punctuation">&#123;</span> string <span class="token operator">:</span> <span class="token boolean">true</span><span class="token operator">/</span><span class="token boolean">false</span><span class="token punctuation">,</span> … <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="示例-3"><a class="markdownIt-Anchor" href="#示例-3">#</a> 示例</h4>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'Amit'</span><span class="token punctuation">,</span> marks<span class="token operator">:</span> <span class="token number">97</span><span class="token punctuation">,</span> distinction<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="数组"><a class="markdownIt-Anchor" href="#数组">#</a> 数组</h3>
<ul>
<li>是一个有序的值集合。</li>
<li>使用方括号闭合，这意味着数组以  <code>[</code>  开始，以  <code>]</code>  结尾。</li>
<li>值使用逗号  <code>,</code>  分割。</li>
<li>数组索引可以从 0 或 1 开始。</li>
<li>当键名是连续的整数时应该使用数组。</li>
</ul>
<h4 id="语法-5"><a class="markdownIt-Anchor" href="#语法-5">#</a> 语法</h4>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span> value<span class="token punctuation">,</span> … <span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="示例-4"><a class="markdownIt-Anchor" href="#示例-4">#</a> 示例</h4>
<p>下面的示例展示了一个包含多个对象的数组：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"books"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"Java"</span><span class="token punctuation">,</span>
            <span class="token property">"edition"</span><span class="token operator">:</span> <span class="token string">"second"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"C++"</span><span class="token punctuation">,</span>
            <span class="token property">"lastName"</span><span class="token operator">:</span> <span class="token string">"fifth"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            <span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"C"</span><span class="token punctuation">,</span>
            <span class="token property">"lastName"</span><span class="token operator">:</span> <span class="token string">"third"</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="对象"><a class="markdownIt-Anchor" href="#对象">#</a> 对象</h3>
<ul>
<li>是一个__无序的名称－值对集合__。</li>
<li>对象使用大括号闭合，以  <code>&#123;</code>  开始，以  <code>&#125;</code>  结尾。</li>
<li>每个名称后面都跟随一个冒号  <code>:</code> ，名称－值对使用逗号  <code>,</code>  分隔。</li>
<li>键名必须是字符串，并且不能同名。</li>
<li>当键名是任意字符串时应该使用对象。</li>
</ul>
<h4 id="语法-6"><a class="markdownIt-Anchor" href="#语法-6">#</a> 语法</h4>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span> string <span class="token operator">:</span> value<span class="token punctuation">,</span> … <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="示例-5"><a class="markdownIt-Anchor" href="#示例-5">#</a> 示例</h4>
<p>下面的例子展示了对象：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"011A"</span><span class="token punctuation">,</span>
    <span class="token property">"language"</span><span class="token operator">:</span> <span class="token string">"JAVA"</span><span class="token punctuation">,</span>
    <span class="token property">"price"</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="空格"><a class="markdownIt-Anchor" href="#空格">#</a> 空格</h3>
<p>可以在任意一对符号之间插入。可以添加用来让代码更可读。下面的例子展示了使用空格和不使用空格的声明：</p>
<h4 id="语法-7"><a class="markdownIt-Anchor" href="#语法-7">#</a> 语法</h4>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span> string <span class="token operator">:</span> <span class="token string">"   "</span><span class="token punctuation">,</span> … <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="示例-6"><a class="markdownIt-Anchor" href="#示例-6">#</a> 示例</h4>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token string">"   sachin"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token string">"  saurav"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h3 id="null"><a class="markdownIt-Anchor" href="#null">#</a> null</h3>
<p>意味着空类型。</p>
<h4 id="语法-8"><a class="markdownIt-Anchor" href="#语法-8">#</a> 语法</h4>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token null keyword">null</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="示例-7"><a class="markdownIt-Anchor" href="#示例-7">#</a> 示例</h4>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;h1>value is 1&lt;/h1>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"&lt;h1>value is null&lt;/h1>"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="json-基础结构"><a class="markdownIt-Anchor" href="#json-基础结构">#</a> JSON 基础结构</h3>
<p>JSON 包含两种基础结构：</p>
<ol>
<li>
<p>无序的对象结构</p>
<p>无序的对象结构在不同语言中称法不同，比如在 Python 中称为字典，在 JSON 中称为 JSON 对象……</p>
<p>总之就是键－值对组合形式。</p>
</li>
<li>
<p>有序的数组结构</p>
<p><strong>将数组作为有序数组进行转换 JSON，就可以得到有序的 JSON 数组结构。</strong></p>
</li>
</ol>
<h2 id="模式"><a class="markdownIt-Anchor" href="#模式">#</a> 模式</h2>
<p>JSON 模式（Schema）是一种基于 JSON 格式定义 JSON 数据结构的规范。JSON 模式：</p>
<ul>
<li>描述现有数据格式。</li>
<li>干净的、人类和机器可读的文档。</li>
<li>完整的结构验证，有利于自动化测试。</li>
<li>完整的结构验证，可用于验证客户端提交的数据。</li>
</ul>
<h3 id="json-模式示例"><a class="markdownIt-Anchor" href="#json-模式示例">#</a> JSON 模式示例</h3>
<p>下面是一个基本的 JSON 模式，其中涵盖了一个经典的产品目录说明：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
    <span class="token property">"$schema"</span><span class="token operator">:</span> <span class="token string">"https://json-schema.org/draft-04/schema#"</span><span class="token punctuation">,</span>
    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Product"</span><span class="token punctuation">,</span>
    <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"A product from Acme's catalog"</span><span class="token punctuation">,</span>
    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"object"</span><span class="token punctuation">,</span>
    <span class="token property">"properties"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"The unique identifier for a product"</span><span class="token punctuation">,</span>
            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"integer"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"Name of the product"</span><span class="token punctuation">,</span>
            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"string"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token property">"price"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
            <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"number"</span><span class="token punctuation">,</span>
            <span class="token property">"minimum"</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">"exclusiveMinimum"</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token property">"required"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"price"</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>我们来看一下可以用于这一模式中的各种重要关键字：</p>
<table>
<thead>
<tr>
<th style="text-align:center">关键字</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>$schema</code></td>
<td><code>$schema</code>  关键字状态，表示这个模式与 v4 规范草案书写一致。</td>
</tr>
<tr>
<td style="text-align:center"><code>title</code></td>
<td>用它给我们的模式提供了标题。</td>
</tr>
<tr>
<td style="text-align:center"><code>description</code></td>
<td>关于模式的描述。</td>
</tr>
<tr>
<td style="text-align:center"><code>type</code></td>
<td><code>type</code>  关键字在我们的 JSON 数据上定义了第一个约束：必须是一个 JSON 对象。</td>
</tr>
<tr>
<td style="text-align:center"><code>properties</code></td>
<td>定义各种键和它们的值类型，以及用于 JSON 文件中的最小值和最大值。</td>
</tr>
<tr>
<td style="text-align:center"><code>required</code></td>
<td>存放必要属性列表。</td>
</tr>
<tr>
<td style="text-align:center"><code>minimum</code></td>
<td>给值设置的约束条件，表示可以接受的最小值。</td>
</tr>
<tr>
<td style="text-align:center"><code>exclusiveMinimum</code></td>
<td>如果存在  <code>exclusiveMinimum</code>  并且具有布尔值 true，如果它严格意义上大于  <code>minimum</code>  的值则实例有效。</td>
</tr>
<tr>
<td style="text-align:center"><code>maximum</code></td>
<td>给值设置的约束条件，表示可以接受的最大值。</td>
</tr>
<tr>
<td style="text-align:center"><code>exclusiveMaximum</code></td>
<td>如果存在  <code>exclusiveMinimum</code>  并且具有布尔值 true，且它严格意义上小于  <code>maximum</code>  的值则实例有效。</td>
</tr>
<tr>
<td style="text-align:center"><code>multipleOf</code></td>
<td>如果通过这个关键字的值分割实例的结果是一个数字则表示紧靠  <code>multipleOf</code>  的数字实例是有效的。</td>
</tr>
<tr>
<td style="text-align:center"><code>maxLength</code></td>
<td>字符串实例字符的最大长度数值。</td>
</tr>
<tr>
<td style="text-align:center"><code>minLength</code></td>
<td>字符串实例字符的最小长度数值。</td>
</tr>
<tr>
<td style="text-align:center"><code>pattern</code></td>
<td>如果正则表达式匹配实例成功则字符串实例被认为是有效的。</td>
</tr>
</tbody>
</table>
<p>可以在 <a target="_blank" rel="noopener" href="http://json-schema.org/">JSON Schema</a> 上检出可用于定义 JSON 模式的完整关键字列表。上面的模式可用于测试下面给出的 JSON 代码的有效性：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"An ice sculpture"</span><span class="token punctuation">,</span>
        <span class="token property">"price"</span><span class="token operator">:</span> <span class="token number">12.50</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
        <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"A blue mouse"</span><span class="token punctuation">,</span>
        <span class="token property">"price"</span><span class="token operator">:</span> <span class="token number">25.50</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="使用"><a class="markdownIt-Anchor" href="#使用">#</a> 使用</h2>
<p>JSON 常见的应用场景是：在后台应用程序中将响应数据封装成 JSON 格式，传到前台页面之后，需要将 JSON 格式转换为 JavaScript 对象，然后在网页中使用该数据。</p>
<h3 id="把-json-文本转换为-javascript-对象"><a class="markdownIt-Anchor" href="#把-json-文本转换为-javascript-对象">#</a> 把 JSON 文本转换为 JavaScript 对象</h3>
<p>JSON 最常见的用法之一，是从 Web 服务器上读取 JSON 数据（作为文件或 HttpRequest），将 JSON 数据转换为 JavaScript 对象，然后在网页中使用该数据。</p>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201151437694.png" alt="image-20220115143744125"></p>
<p>下面使用字符串作为输入进行演示（而不是文件）。</p>
<h3 id="实例来自字符串的对象"><a class="markdownIt-Anchor" href="#实例来自字符串的对象">#</a> 实例：来自字符串的对象</h3>
<p>创建包含 JSON 语法的 JavaScript 字符串：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> txt <span class="token operator">=</span> <span class="token string">'&#123;"employees": ['</span> <span class="token operator">+</span>
    <span class="token string">'&#123;"firstName" : "John", "lastName" : "Doe"&#125;, '</span> <span class="token operator">+</span>
    <span class="token string">'&#123;"firstName" : "Anna", "lastName" : "Smith"&#125;, '</span> <span class="token operator">+</span>
    <span class="token string">'&#123;"firstName" : "Peter", "lastName" : "Jones"&#125; ]&#125;'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>由于 JSON 语法是 JavaScript 语法的子集，JavaScript 函数  <code>eval()</code>  可用于将 JSON 文本转换为 JavaScript 对象。</p>
<p><code>eval()</code>  函数使用的是 JavaScript 解释器，可解析 JSON 文本，然后生成 JavaScript 对象。<strong>必须把文本包围在括号中</strong>，这样才能避免语法错误：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token function">eval</span> <span class="token punctuation">(</span><span class="token string">"("</span> <span class="token operator">+</span> txt <span class="token operator">+</span> <span class="token string">")"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="json-解析器"><a class="markdownIt-Anchor" href="#json-解析器">#</a> JSON 解析器</h3>
<p><code>eval()</code>  函数可解释执行任何 JavaScript 代码。这隐藏了一个潜在的安全问题。</p>
<p>使用 JSON 解析器将 JSON 转换为 JavaScript 对象是更安全的做法。JSON 解析器只能识别 JSON 文本，而不会解释脚本。</p>
<p>浏览器提供了原生的 JSON 支持，而且 JSON 解析器的速度更快。</p>
<h2 id="jsonp"><a class="markdownIt-Anchor" href="#jsonp">#</a> JSONP</h2>
<p>JSONP（JSON with Padding）是 JSON 的一种 “使用模式”，可以让网页从别的域名（网站）获取资料，即跨域读取数据。</p>
<p>为什么我们从不同的域（网站）访问数据需要一个特殊的技术（JSONP）呢？这是因为同源策略。</p>
<p>同源策略是由网景提出的一个著名的安全策略，现在所有支持 JavaScript 的浏览器都会使用这个策略。</p>
<p>JSONP 的实现原理是利用  <code>&lt;script&gt;</code>  标签可以获取不同源资源的特点，来达到跨域访问某个资源的目的。</p>
<h3 id="jsonp-应用"><a class="markdownIt-Anchor" href="#jsonp-应用">#</a> JSONP 应用</h3>
<h4 id="服务端-jsonp-格式数据"><a class="markdownIt-Anchor" href="#服务端-jsonp-格式数据">#</a> 服务端 JSONP 格式数据</h4>
<p>如客户想访问 : /try/ajax/jsonp.php?jsonp=callbackFunction。</p>
<p>假设客户期望返回 JSON 数据：[“customername1”, “customername2”]。</p>
<p>真正返回到客户端的数据显示为：callbackFunction ([“customername1”, “customername2”])。</p>
<p>服务端文件 jsonp.php 代码为：</p>
<pre class="line-numbers language-php" data-language="php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token function">header</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Content-type: application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// 获取回调函数名 </span>
<span class="token variable">$jsoncallback</span> <span class="token operator">=</span> <span class="token function">htmlspecialchars</span><span class="token punctuation">(</span><span class="token variable">$_REQUEST</span> <span class="token punctuation">[</span><span class="token string single-quoted-string">'jsoncallback'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// JSON 数据 </span>
<span class="token variable">$json_data</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'["customername1", "customername2"]'</span><span class="token punctuation">;</span> 
<span class="token comment">// 输出 JSONP 格式的数据 </span>
<span class="token keyword">echo</span> <span class="token variable">$jsoncallback</span> <span class="token operator">.</span> <span class="token string double-quoted-string">"("</span> <span class="token operator">.</span> <span class="token variable">$json_data</span> <span class="token operator">.</span> <span class="token string double-quoted-string">")"</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="客户端实现-callbackfunction-函数"><a class="markdownIt-Anchor" href="#客户端实现-callbackfunction-函数">#</a> 客户端实现 callbackFunction () 函数</h4>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">function</span> <span class="token function">onCustomerLoaded</span><span class="token punctuation">(</span><span class="token parameter">result<span class="token punctuation">,</span> methodName</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token string">'&lt;ul>'</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> result<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        html <span class="token operator">+=</span> <span class="token string">'&lt;li>'</span> <span class="token operator">+</span> result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&lt;/li>'</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    html <span class="token operator">+=</span> <span class="token string">'&lt;/ul>'</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'divCustomers'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> html<span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="页面展示"><a class="markdownIt-Anchor" href="#页面展示">#</a> 页面展示</h4>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>divCustomers<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="客户端页面完整代码"><a class="markdownIt-Anchor" href="#客户端页面完整代码">#</a> 客户端页面完整代码</h4>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span> <span class="token name">PUBLIC</span> <span class="token string">"-//W3C//DTD XHTML 1.0 Transitional//EN"</span> <span class="token string">"https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://www.w3.org/1999/xhtml/<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>JSONP 实例<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>divCustomers<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">function</span> <span class="token function">onCustomerLoaded</span><span class="token punctuation">(</span><span class="token parameter">result<span class="token punctuation">,</span> methodName</span><span class="token punctuation">)</span>         <span class="token punctuation">&#123;</span>
            <span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token string">'&lt;ul>'</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> result<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                html <span class="token operator">+=</span> <span class="token string">'&lt;li>'</span> <span class="token operator">+</span> result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&lt;/li>'</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            html <span class="token operator">+=</span> <span class="token string">'&lt;/ul>'</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'divCustomers'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> html<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/try/ajax/jsonp.php?jsoncallback=callbackFunction<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="jquery-使用-jsonp"><a class="markdownIt-Anchor" href="#jquery-使用-jsonp">#</a> jQuery 使用 JSONP</h3>
<p>以上代码可以使用 jQuery 代码实例：</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>JSONP 实例<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://apps.bdimg.com/libs/jquery/1.8.3/jquery.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>divCustomers<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
$<span class="token punctuation">.</span><span class="token function">getJSON</span><span class="token punctuation">(</span><span class="token string">"/try/ajax/jsonp.php?jsoncallback=?"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">var</span> html <span class="token operator">=</span> <span class="token string">'&lt;ul>'</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        html <span class="token operator">+=</span> <span class="token string">'&lt;li>'</span> <span class="token operator">+</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'&lt;/li>'</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    html <span class="token operator">+=</span> <span class="token string">'&lt;/ul>'</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#divCustomers'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="在-python-中使用-json"><a class="markdownIt-Anchor" href="#在-python-中使用-json">#</a> 在 Python 中使用 JSON</h2>
<p>先准备环境以便针对 JSON 进行 Python 编程。</p>
<h3 id="环境"><a class="markdownIt-Anchor" href="#环境">#</a> 环境</h3>
<p>在我们使用 Python 编码和解码 JSON 之前，我们需要安装一个可用 JSON 模块。我们采用 <a target="_blank" rel="noopener" href="http://deron.meranda.us/python/demjson/">Demjson</a>：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token variable">$tar</span> xvfz demjson-1.6.tar.gz
<span class="token variable">$cd</span> demjson-1.6
<span class="token variable">$python</span> setup.py <span class="token function">install</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="json-函数"><a class="markdownIt-Anchor" href="#json-函数">#</a> JSON 函数</h3>
<table>
<thead>
<tr>
<th style="text-align:center">函数</th>
<th>程序库</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>encode()</code></td>
<td>将 Python 对象编码为 JSON 字符串表示。</td>
</tr>
<tr>
<td style="text-align:center"><code>decode()</code></td>
<td>将 JSON 编码的字符串解码为 Python 对象。</td>
</tr>
</tbody>
</table>
<h3 id="使用-python-编码-jsonencode"><a class="markdownIt-Anchor" href="#使用-python-编码-jsonencode">#</a> 使用 Python 编码 JSON（encode）</h3>
<p>Python 的  <code>encode()</code>  函数用于将 Python 对象编码为 JSON 字符串表示。</p>
<h4 id="语法-9"><a class="markdownIt-Anchor" href="#语法-9">#</a> 语法</h4>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">demjson<span class="token punctuation">.</span>encode<span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> nest_level <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="示例-8"><a class="markdownIt-Anchor" href="#示例-8">#</a> 示例</h4>
<p>下面的例子展示了使用 Python 将数组转换为 JSON：</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/bin/python</span>
<span class="token keyword">import</span> demjson

data <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token punctuation">&#123;</span> <span class="token string">'a'</span> <span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'b'</span> <span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'c'</span> <span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'d'</span> <span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'e'</span> <span class="token punctuation">:</span> <span class="token number">5</span> <span class="token punctuation">&#125;</span> <span class="token punctuation">]</span>

json <span class="token operator">=</span> demjson<span class="token punctuation">.</span>encode<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token keyword">print</span> json<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行时会生成如下结果：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span><span class="token punctuation">&#123;</span><span class="token property">"a"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token property">"b"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token property">"c"</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token property">"d"</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token property">"e"</span><span class="token operator">:</span><span class="token number">5</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="使用-python-解码-jsondecode"><a class="markdownIt-Anchor" href="#使用-python-解码-jsondecode">#</a> 使用 Python 解码 JSON（decode）</h3>
<p>Python 可以使用  <code>demjson.decode()</code>  函数处理 JSON 解码。这个函数返回从 JSON 解码到适当 Python 类型的值。</p>
<h4 id="语法-10"><a class="markdownIt-Anchor" href="#语法-10">#</a> 语法</h4>
<pre class="line-numbers language-python" data-language="python"><code class="language-python">demjson<span class="token punctuation">.</span>decode<span class="token punctuation">(</span>self<span class="token punctuation">,</span> txt<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="示例-9"><a class="markdownIt-Anchor" href="#示例-9">#</a> 示例</h4>
<p>下面的例子展示了如何使用 Python 解码 JSON 对象。</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token comment">#!/usr/bin/python</span>
<span class="token keyword">import</span> demjson

json <span class="token operator">=</span> <span class="token string">'&#123;"a":1,"b":2,"c":3,"d":4,"e":5&#125;'</span>

text <span class="token operator">=</span> demjson<span class="token punctuation">.</span>decode<span class="token punctuation">(</span>json<span class="token punctuation">)</span>
<span class="token keyword">print</span> text<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>执行时生成如下结果：</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token punctuation">&#123;</span><span class="token string">u'a'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">u'c'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">u'b'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">u'e'</span><span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">u'd'</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="在-java-中使用-json"><a class="markdownIt-Anchor" href="#在-java-中使用-json">#</a> 在 Java 中使用 JSON</h2>
<p>先准备环境以便针对 JSON 进行 Java 编程。</p>
<h3 id="环境-2"><a class="markdownIt-Anchor" href="#环境-2">#</a> 环境</h3>
<p>在我们使用 Java 编码和解码 JSON 之前，我们需要安装一个可用的 JSON 模块。我们采用 <a target="_blank" rel="noopener" href="https://code.google.com/p/json-simple/">JSON.simple</a>，然后导入 <strong>jsonsimple-1.1.1.jar</strong> 。</p>
<h3 id="json-和-java-实体映射"><a class="markdownIt-Anchor" href="#json-和-java-实体映射">#</a> JSON 和 Java 实体映射</h3>
<p>JSON.simple 实体映射从左侧到右侧为解码或解析，实体映射从右侧到左侧为编码。</p>
<table>
<thead>
<tr>
<th style="text-align:center">JSON</th>
<th style="text-align:center">Java</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">字符串</td>
<td style="text-align:center"><code>java.lang.String</code></td>
</tr>
<tr>
<td style="text-align:center">数字</td>
<td style="text-align:center"><code>java.lang.Number</code></td>
</tr>
<tr>
<td style="text-align:center">bool</td>
<td style="text-align:center"><code>java.lang.Boolean</code></td>
</tr>
<tr>
<td style="text-align:center">null</td>
<td style="text-align:center"><code>null</code></td>
</tr>
<tr>
<td style="text-align:center">数组</td>
<td style="text-align:center"><code>java.util.List</code></td>
</tr>
<tr>
<td style="text-align:center">对象</td>
<td style="text-align:center"><code>java.util.Map</code></td>
</tr>
</tbody>
</table>
<p>解码时，<em> <code>java.util.List</code> </em> 的默认具体类是 <em> <code>org.json.simple.JSONArray</code> </em>，<em> <code>java.util.Map</code> </em> 的默认具体类是 <em> <code>org.simple.JSONObject</code> </em>。</p>
<h3 id="在-java-中编码-json"><a class="markdownIt-Anchor" href="#在-java-中编码-json">#</a> 在 Java 中编码 JSON</h3>
<p>下面这个简单的示例展示了使用  <code>java.util.HashMap</code>  的子类  <code>JSONObject</code>  编码一个 JSON 对象。这里并没有提供顺序。如果需要严格的元素顺序，请使用  <code>JSONValue.toJSONString(map)</code>  方法的有序映射实现，比如  <code>java.util.LinkedHashMap</code> 。</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>json<span class="token punctuation">.</span>simple<span class="token punctuation">.</span></span><span class="token class-name">JSONObject</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">JsonEncodeDemo</span> 
<span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token class-name">JSONObject</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        obj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"num"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"balance"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Double</span><span class="token punctuation">(</span><span class="token number">1000.21</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"is_vip"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>生成如下结果：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span><span class="token property">"balance"</span><span class="token operator">:</span> <span class="token number">1000.21</span><span class="token punctuation">,</span> <span class="token property">"num"</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token property">"is_vip"</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"foo"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>下面是另一个示例，使用 Java JSONObject 展示了 JSON 对象流：</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>json<span class="token punctuation">.</span>simple<span class="token punctuation">.</span></span><span class="token class-name">JSONObject</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">JsonEncodeDemo</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token class-name">JSONObject</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        obj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span> <span class="token string">"foo"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"num"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Integer</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"balance"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Double</span><span class="token punctuation">(</span><span class="token number">1000.21</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"is_vip"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">StringWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span><span class="token function">writeJSONString</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> jsonText <span class="token operator">=</span> out<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">print</span><span class="token punctuation">(</span>jsonText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>生成如下结果：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span><span class="token property">"balance"</span><span class="token operator">:</span> <span class="token number">1000.21</span><span class="token punctuation">,</span> <span class="token property">"num"</span><span class="token operator">:</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token property">"is_vip"</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"foo"</span><span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="在-java-中解码-json"><a class="markdownIt-Anchor" href="#在-java-中解码-json">#</a> 在 Java 中解码 JSON</h3>
<p>下面的例子使用了 <strong> <code>JSONObject</code> </strong> 和 <strong> <code>JSONArray</code> </strong>，其中  <code>JSONObject</code>  就是  <code>java.util.Map</code> ， <code>JSONArray</code>  就是  <code>java.util.List</code> ，因此我们可以使用 Map 或 List 的标准操作访问它们。</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>json<span class="token punctuation">.</span>simple<span class="token punctuation">.</span></span><span class="token class-name">JSONObject</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>json<span class="token punctuation">.</span>simple<span class="token punctuation">.</span></span><span class="token class-name">JSONArray</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>json<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>parser<span class="token punctuation">.</span></span><span class="token class-name">ParseException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>json<span class="token punctuation">.</span>simple<span class="token punctuation">.</span>parser<span class="token punctuation">.</span></span><span class="token class-name">JSONParser</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">JsonDecodeDemo</span>
<span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">&#123;</span>
        <span class="token class-name">JSONParser</span> parser<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">JSONParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token string">"[0,&#123;\"1\":&#123;\"2\":&#123;\"3\":&#123;\"4\":[5,&#123;\"6\":7&#125;]&#125;&#125;&#125;&#125;]"</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Object</span> obj <span class="token operator">=</span> parser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">JSONArray</span> array <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">JSONArray</span><span class="token punctuation">)</span>obj<span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"The 2nd element of array"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>array<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">JSONObject</span> obj2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">JSONObject</span><span class="token punctuation">)</span>array<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Field \"1\""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj2<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            s <span class="token operator">=</span> <span class="token string">"&#123;&#125;"</span><span class="token punctuation">;</span>
            obj <span class="token operator">=</span> parser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

            s<span class="token operator">=</span> <span class="token string">"[5,]"</span><span class="token punctuation">;</span>
            obj <span class="token operator">=</span> parser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

            s<span class="token operator">=</span> <span class="token string">"[5,,2]"</span><span class="token punctuation">;</span>
            obj <span class="token operator">=</span> parser<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">ParseException</span> pe<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"position: "</span> <span class="token operator">+</span> pe<span class="token punctuation">.</span><span class="token function">getPosition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>pe<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>生成如下结果：</p>
<pre class="line-numbers language-csharp" data-language="csharp"><code class="language-csharp">The 2nd element <span class="token return-type class-name">of</span> array
<span class="token punctuation">&#123;</span><span class="token string">"1"</span><span class="token punctuation">:</span><span class="token punctuation">&#123;</span><span class="token string">"2"</span><span class="token punctuation">:</span><span class="token punctuation">&#123;</span><span class="token string">"3"</span><span class="token punctuation">:</span><span class="token punctuation">&#123;</span><span class="token string">"4"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string">"6"</span><span class="token punctuation">:</span><span class="token number">7</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>

Field <span class="token string">"1"</span>
<span class="token punctuation">&#123;</span><span class="token string">"2"</span><span class="token punctuation">:</span><span class="token punctuation">&#123;</span><span class="token string">"3"</span><span class="token punctuation">:</span><span class="token punctuation">&#123;</span><span class="token string">"4"</span><span class="token punctuation">:</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span><span class="token string">"6"</span><span class="token punctuation">:</span><span class="token number">7</span><span class="token punctuation">&#125;</span><span class="token punctuation">]</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span>
<span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h1 id="eval"><a class="markdownIt-Anchor" href="#eval">#</a> eval()</h1>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201151447154.png" alt="image-20220115144744918"><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201151448663.png" alt="image-20220115144831487"></p>
<p><strong>这么干只能 JSON 文本对象 (也就是那个字符串) 转换为 JS 对象，而不能从 JS 转为 JSON.</strong></p>
<p>__== 而且还患有安全隐患，不要使用！！！==__</p>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201151452659.png" alt="image-20220115145216427"> 而不是使用 eval 来兼容 ie7 或更低的版本</p>
<p><code>**eval()**</code>  函数会将传入的字符串当做 JavaScript 代码进行执行。</p>
<iframe class="interactive" height="490" src="https://interactive-examples.mdn.mozilla.net/pages/js/globalprops-eval.html" title="MDN Web Docs Interactive Example" loading="lazy" style="box-sizing: border-box; background-color: rgb(244, 244, 244); border: 0px; color: rgb(27, 27, 27); padding: 10px; width: 1002px; max-width: 100%;"></iframe>
<h2 id="语法-11"><a class="markdownIt-Anchor" href="#语法-11">#</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval#%E8%AF%AD%E6%B3%95">语法</a></h2>
<pre class="line-numbers language-none"><code class="language-none">eval(string)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="参数"><a class="markdownIt-Anchor" href="#参数">#</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval#%E5%8F%82%E6%95%B0">参数</a></h3>
<ul>
<li>
<p><code>string</code></p>
<p>一个表示 JavaScript 表达式、语句或一系列语句的字符串。表达式可以包含变量与已存在对象的属性。</p>
</li>
</ul>
<h3 id="返回值"><a class="markdownIt-Anchor" href="#返回值">#</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval#%E8%BF%94%E5%9B%9E%E5%80%BC">返回值</a></h3>
<p>返回字符串中代码的返回值。如果返回值为空，则返回 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/undefined"> <code>undefined</code> </a>。</p>
<h2 id="描述"><a class="markdownIt-Anchor" href="#描述">#</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval#%E6%8F%8F%E8%BF%B0">描述</a></h2>
<p><code>eval()</code>  是全局对象的一个函数属性。</p>
<p><code>eval()</code>  的参数是一个字符串。如果字符串表示的是表达式， <code>eval()</code>  会对表达式进行求值。如果参数表示一个或多个 JavaScript 语句，那么 <code>eval()</code>  就会执行这些语句。不需要用  <code>eval()</code>  来执行一个算术表达式：因为 JavaScript 可以自动为算术表达式求值。</p>
<p>如果你以字符串的形式构造了算术表达式，那么可以在后面用  <code>eval()</code>  对它求值。例如，假设你有一个变量  <code>x</code> ，您可以通过将表达式的字符串值（例如  <code>3 * x + 2</code> ）赋值给一个变量，然后在你的代码后面的其他地方调用  <code>eval()</code> ，来推迟涉及  <code>x</code>  的表达式的求值。</p>
<p>如果  <code>eval()</code>  的参数不是字符串，  <code>eval()</code>  会将参数原封不动地返回。在下面的例子中， <code>String</code>  构造器被指定，而  <code>eval()</code>  返回了  <code>String</code>  对象而不是执行字符串。</p>
<pre class="line-numbers language-none"><code class="language-none">eval(new String(&quot;2 + 2&quot;)); &#x2F;&#x2F; 返回了包含&quot;2 + 2&quot;的字符串对象
eval(&quot;2 + 2&quot;);             &#x2F;&#x2F; returns 4<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>你可以使用一些通用的方法来绕过这个限制，例如使用  <code>toString()</code> 。</p>
<pre class="line-numbers language-none"><code class="language-none">var expression &#x3D; new String(&quot;2 + 2&quot;);
eval(expression.toString());<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>如果你间接的使用  <code>eval()</code> ，比如通过一个引用来调用它，而不是直接的调用  <code>eval</code> 。 从 <a target="_blank" rel="noopener" href="https://www.ecma-international.org/ecma-262/5.1/#sec-10.4.2">ECMAScript 5</a> 起，它工作在全局作用域下，而不是局部作用域中。这就意味着，例如，下面的代码的作用声明创建一个全局函数，并且  <code>eval</code>  中的这些代码在执行期间不能在被调用的作用域中访问局部变量。</p>
<pre class="line-numbers language-none"><code class="language-none">function test() &#123;
  var x &#x3D; 2, y &#x3D; 4;
  console.log(eval(&#39;x + y&#39;));  &#x2F;&#x2F; 直接调用，使用本地作用域，结果是 6
  var geval &#x3D; eval; &#x2F;&#x2F; 等价于在全局作用域调用
  console.log(geval(&#39;x + y&#39;)); &#x2F;&#x2F; 间接调用，使用全局作用域，throws ReferenceError 因为&#96;x&#96;未定义
  (0, eval)(&#39;x + y&#39;); &#x2F;&#x2F; 另一个间接调用的例子
&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="永远不要使用"><a class="markdownIt-Anchor" href="#永远不要使用">#</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval#don.27t_use_eval.21">永远不要使用  <code>eval</code> ！</a></h2>
<p><code>eval()</code>  是一个危险的函数， 它使用与调用者相同的权限执行代码。如果你用  <code>eval()</code>  运行的字符串代码被恶意方（不怀好意的人）修改，您最终可能会在您的网页 / 扩展程序的权限下，在用户计算机上运行恶意代码。更重要的是，第三方代码可以看到某一个  <code>eval()</code>  被调用时的作用域，这也有可能导致一些不同方式的攻击。相似的 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function"> <code>Function</code> </a> 就不容易被攻击。</p>
<p><code>eval()</code>  通常比其他替代方法更慢，因为它必须调用 JS 解释器，而许多其他结构则可被现代 JS 引擎进行优化。</p>
<p>此外，现代 JavaScript 解释器将 javascript 转换为机器代码。 这意味着任何变量命名的概念都会被删除。 因此，任意一个 eval 的使用都会强制浏览器进行冗长的变量名称查找，以确定变量在机器代码中的位置并设置其值。 另外，新内容将会通过  <code>eval()</code>  引进给变量， 比如更改该变量的类型，因此会强制浏览器重新执行所有已经生成的机器代码以进行补偿。 但是，（谢天谢地）存在一个非常好的 eval 替代方法：只需使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function">window.Function</a>。 这有个例子方便你了解如何将 <code>eval()</code>  的使用转变为 <code>Function()</code> 。</p>
<p>使用 eval 的糟糕代码:</p>
<pre class="line-numbers language-none"><code class="language-none">function looseJsonParse(obj)&#123;
    return eval(&quot;(&quot; + obj + &quot;)&quot;);
&#125;
console.log(looseJsonParse(
   &quot;&#123;a:(4-1), b:function()&#123;&#125;, c:new Date()&#125;&quot;
))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>不用 eval 的更好的代码:</p>
<pre class="line-numbers language-none"><code class="language-none">function looseJsonParse(obj)&#123;
    return Function(&#39;&quot;use strict&quot;;return (&#39; + obj + &#39;)&#39;)();
&#125;
console.log(looseJsonParse(
   &quot;&#123;a:(4-1), b:function()&#123;&#125;, c:new Date()&#125;&quot;
))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>比较上面的两个代码片段，两个代码片段似乎是以相同的方式工作，但再想一想：eval 的这个代码的速度要慢得多。 注意 <code>c: new Date()</code>  在执行体中。 在没有 eval 的函数中，对象在全局范围内被用来进行计算，因此浏览器可以放心的假设 <code>Date</code>  是来自 <code>window.Date</code>  的而不是一个名为 <code>Date</code>  的局部变量。 然而，在使用 <code>eval()</code>  的代码中，浏览器不能假设这一点，因为如果您的代码是下面这个：</p>
<pre class="line-numbers language-none"><code class="language-none">function Date(n)&#123;
    return [&quot;Monday&quot;,&quot;Tuesday&quot;,&quot;Wednesday&quot;,&quot;Thursday&quot;,&quot;Friday&quot;,&quot;Saturday&quot;,&quot;Sunday&quot;][n%7 || 0];
&#125;
function looseJsonParse(obj)&#123;
    return eval(&quot;(&quot; + obj + &quot;)&quot;);
&#125;
console.log(looseJsonParse(
   &quot;&#123;a:(4-1), b:function()&#123;&#125;, c:new Date()&#125;&quot;
))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>因此，在 <code>eval()</code>  版本的代码中，浏览器被迫进行高代价的查找调用以检查是否存在名为 Date () 的任何局部变量。 与 <code>Function()</code>  相比，这是非常低效的。</p>
<p>在类似的情况下，如果您确实希望能够从 <code>Function()</code>  内部的代码调用 <code>Date</code>  函数，该怎么办？ 你应该躲避并退回到 <code>eval()</code>  吗？ 绝对不是，永远不要这么做。 而是尝试下面的方法。</p>
<pre class="line-numbers language-none"><code class="language-none">function Date(n)&#123;
    return [&quot;Monday&quot;,&quot;Tuesday&quot;,&quot;Wednesday&quot;,&quot;Thursday&quot;,&quot;Friday&quot;,&quot;Saturday&quot;,&quot;Sunday&quot;][n%7 || 0];
&#125;
function runCodeWithDateFunction(obj)&#123;
    return Function(&#39;&quot;use strict&quot;;return (&#39; + obj + &#39;)&#39;)()(
        Date
    );
&#125;
console.log(runCodeWithDateFunction(
   &quot;function(Date)&#123; return Date(5) &#125;&quot;
))<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>由于三重嵌套函数，上面的代码似乎效率低下，但让我们分析一下上述有效方法的好处：</p>
<p>1. 它使得传递给 <code>runCodeWithDateFunction</code>  的字符串中的代码更少。</p>
<p>2. 函数调用开销很小，使得代码尺寸小得多，值得获益</p>
<p>\3.  <code>Function()</code>  更容易让你的代码利用特性修饰 <code>&quot;use strict&quot;</code> ;</p>
<p>4. 代码不使用 eval（），使其比其他方式快几个数量级。</p>
<p>最后，我们来看看简化版。 使用如上所示的 <code>Function()</code> ，您可以更有效地缩小传递给 <code>runCodeWithDateFunction</code>  的代码字符串，因为函数参数名称也可以缩小，如下面的缩小代码所示。</p>
<pre class="line-numbers language-none"><code class="language-none">console.log(Function(&#39;&quot;use strict&quot;;return(function(a)&#123;return a(5)&#125;)&#39;)()(function(a)&#123;
return&quot;Monday Tuesday Wednesday Thursday Friday Saturday Sunday&quot;.split(&quot; &quot;)[a%7||0]&#125;));<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>对于常见用例， <code>eval()</code>  或 <code>Function()</code>  还有更安全 (而且更快！) 的替代方案。</p>
<h3 id="访问成员属性"><a class="markdownIt-Anchor" href="#访问成员属性">#</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval#%E8%AE%BF%E9%97%AE%E6%88%90%E5%91%98%E5%B1%9E%E6%80%A7">访问成员属性</a></h3>
<p>你不应该去使用  <code>eval()</code>  来将属性名字转化为属性。考虑下面的这个例子，被访问对象的属性在它被执行之前都会未知的。这里可以用 eval 处理：</p>
<pre class="line-numbers language-none"><code class="language-none">var obj &#x3D; &#123; a: 20, b: 30 &#125;;
var propName &#x3D; getPropName(); &#x2F;&#x2F; 返回 &quot;a&quot; 或 &quot;b&quot;

eval( &#39;var result &#x3D; obj.&#39; + propsName )<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>但是，这里并不是必须得使用  <code>eval()</code>  。事实上，这里并不建议这样使用。可以使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Property_Accessors">属性访问器</a> 进行代替，它更快、更安全：</p>
<pre class="line-numbers language-none"><code class="language-none">var obj &#x3D; &#123; a: 20, b: 30 &#125;
var propName &#x3D; getPropName(); &#x2F;&#x2F; 返回 &quot;a&quot; 或 &quot;b&quot;
var result &#x3D; obj[ propName ]; &#x2F;&#x2F; obj[ &quot;a&quot; ] 与 obj.a 等价<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>你还可以使用这个方法去访问子代的属性。如下：</p>
<pre class="line-numbers language-none"><code class="language-none">var obj &#x3D; &#123;a: &#123;b: &#123;c: 0&#125;&#125;&#125;;
var propPath &#x3D; getPropPath(); &#x2F;&#x2F; 例如返回 &quot;a.b.c&quot;

eval( &#39;var result &#x3D; obj.&#39; + propPath )<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>这里，可以通过分割属性路径、循环遍历不同的属性，来避免  <code>eval()</code> ：</p>
<pre class="line-numbers language-none"><code class="language-none">function getDescendantProp(obj, desc) &#123;
  var arr &#x3D; desc.split(&#39;.&#39;);
  while (arr.length) &#123;
    obj &#x3D; obj[arr.shift()];
  &#125;
  return obj;
&#125;

var obj &#x3D; &#123;a: &#123;b: &#123;c: 0&#125;&#125;&#125;;
var propPath &#x3D; getPropPath(); &#x2F;&#x2F; 例如返回 &quot;a.b.c&quot;
var result &#x3D; getDescendantProp(obj, propPath);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>同样的方法也可实现设置子代的属性值：</p>
<pre class="line-numbers language-none"><code class="language-none">function setDescendantProp(obj, desc, value) &#123;
  var arr &#x3D; desc.split(&#39;.&#39;);
  while (arr.length &gt; 1) &#123;
    obj &#x3D; obj[arr.shift()];
  &#125;
  return obj[arr[0]] &#x3D; value;
&#125;

var obj &#x3D; &#123;a: &#123;b: &#123;c: 0&#125;&#125;&#125;;
var propPath &#x3D; getPropPath();  &#x2F;&#x2F; 例如，返回 &quot;a.b.c&quot;
var result &#x3D; setDescendantProp(obj, propPath, 1);  &#x2F;&#x2F; a.b.c 值为 1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="使用函数而非代码段"><a class="markdownIt-Anchor" href="#使用函数而非代码段">#</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval#%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E8%80%8C%E9%9D%9E%E4%BB%A3%E7%A0%81%E6%AE%B5">使用函数而非代码段</a></h3>
<p>JavaScript 拥有 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/First-class_Function">first-class functions</a>，这意味着你可以将函数直接作为参数传递给其他接口，将他们保存在变量中或者对象的属性中，等等。很多 DOM 的 API 都用这种思路进行设计，你也可以（或者应该）这样子设计你的代码：</p>
<pre class="line-numbers language-none"><code class="language-none">&#x2F;&#x2F; 代替 setTimeout(&quot; ... &quot;, 1000) 写法:
setTimeout(function() &#123; ... &#125;, 1000);

&#x2F;&#x2F; 代替 elt.setAttribute(&quot;onclick&quot;, &quot;...&quot;) 写法:
elt.addEventListener(&#39;click&#39;, function() &#123; ... &#125; , false);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Closures">闭包</a> 也有助于创建参数化函数而不用连接字符串。</p>
<h3 id="解析-json将字符串转化为-javascript-对象"><a class="markdownIt-Anchor" href="#解析-json将字符串转化为-javascript-对象">#</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval#%E8%A7%A3%E6%9E%90_json%EF%BC%88%E5%B0%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E5%8C%96%E4%B8%BA_javascript_%E5%AF%B9%E8%B1%A1%EF%BC%89">解析 JSON（将字符串转化为 JavaScript 对象）</a></h3>
<p>如果你在调用  <code>eval()</code>  传入的字符串参数中包含数据（如：一个数组 “[1,2,3]”）而不是代码，你应该考虑将其转换为 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Glossary/JSON">JSON</a> 对象，这允许你用 JavaScript 语法的子集来表示数据。<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Downloading_JSON_and_JavaScript_in_extensions">在扩展中下载 JSON 和 JavaScript</a></p>
<p>提示：因为 JSON 语法子集相对于 JavaScript 语法子集比较有局限性，很多在 JavaScript 中可用的特性在 JSON 中就不起作用了。比如，后缀逗号在 JSON 中不支持，并且对象中的属性名在 JSON 中必须用引号括起来。请务必使用 JSON 序列化方法来生成稍后将被解析为 JSON 的字符串。</p>
<h3 id="尽量传递数据而非代码"><a class="markdownIt-Anchor" href="#尽量传递数据而非代码">#</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval#%E5%B0%BD%E9%87%8F%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE%E8%80%8C%E9%9D%9E%E4%BB%A3%E7%A0%81">尽量传递数据而非代码</a></h3>
<p>例如，设计为抓取网页内容的扩展，可能会在 XPath 中定义抓取规则，而不是在 JavaScript 代码中。</p>
<h3 id="以有限权限运行代码"><a class="markdownIt-Anchor" href="#以有限权限运行代码">#</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval#%E4%BB%A5%E6%9C%89%E9%99%90%E6%9D%83%E9%99%90%E8%BF%90%E8%A1%8C%E4%BB%A3%E7%A0%81">以有限权限运行代码</a></h3>
<p>如果你必须执行这段代码，应考虑以更低的权限运行。此建议主要适用于扩展和 XUL 应用程序，可以使用 <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Components.utils.evalInSandbox">Components.utils.evalInSandbox</a> 做到降低权限。</p>
<h2 id="例子"><a class="markdownIt-Anchor" href="#例子">#</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval#%E4%BE%8B%E5%AD%90">例子</a></h2>
<h3 id="使用-2"><a class="markdownIt-Anchor" href="#使用-2">#</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval#%E4%BD%BF%E7%94%A8_eval">使用  <code>eval</code> </a></h3>
<p>在下面的代码中，两种包含了  <code>eval()</code>  的声明都返回了 42。第一种是对字符串 “ <code>x + y + 1</code> ” 求值；第二种是对字符串 “ <code>42</code> ” 求值。</p>
<pre class="line-numbers language-none"><code class="language-none">var x &#x3D; 2;
var y &#x3D; 39;
var z &#x3D; &quot;42&quot;;
eval(&quot;x + y + 1&quot;); &#x2F;&#x2F; returns 42
eval(z);           &#x2F;&#x2F; returns 42<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="使用-3"><a class="markdownIt-Anchor" href="#使用-3">#</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval#%E4%BD%BF%E7%94%A8_eval_%E6%89%A7%E8%A1%8C%E4%B8%80%E4%B8%B2_javascript_%E8%AF%AD%E5%8F%A5">使用  <code>eval</code>  执行一串 JavaScript 语句</a></h3>
<p>下面的例子使用  <code>eval()</code>  来执行  <code>str</code>  字符串。这个字符串包含了如果  <code>x</code>  等于 5，就打开一个 Alert 对话框并对  <code>z</code>  赋值 42，否则就对  <code>z</code>  赋值 0 的 JavaScript 语句。 当第二个声明被执行， <code>eval()</code>  将会令字符串被执行，并最终返回赋值给  <code>z</code>  的 42。</p>
<pre class="line-numbers language-none"><code class="language-none">var x &#x3D; 5;
var str &#x3D; &quot;if (x &#x3D;&#x3D; 5) &#123;console.log(&#39;z is 42&#39;); z &#x3D; 42;&#125; else z &#x3D; 0;&quot;;

console.log(&#39;z is &#39;, eval(str));<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>如果您定义了多个值，则会返回最后一个值。</p>
<pre class="line-numbers language-none"><code class="language-none">var x &#x3D; 5;
var str &#x3D; &quot;if (x &#x3D;&#x3D; 5) &#123;console.log(&#39;z is 42&#39;); z &#x3D; 42; x &#x3D; 420; &#125; else z &#x3D; 0;&quot;;

console.log(&#39;x is &#39;, eval(str)); &#x2F;&#x2F; z is 42  x is 420<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="返回值-2"><a class="markdownIt-Anchor" href="#返回值-2">#</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval#%E8%BF%94%E5%9B%9E%E5%80%BC_2">返回值</a></h3>
<p><code>eval</code>  返回最后一个表达式的值。</p>
<pre class="line-numbers language-none"><code class="language-none">var str &#x3D; &#39;if ( a ) &#123; 1 + 1; &#125; else &#123; 1 + 2; &#125;&#39;;
var a &#x3D; true;
var b &#x3D; eval(str);  &#x2F;&#x2F; returns 2

console.log(&#39;b is : &#39; + b);

a &#x3D; false;
b &#x3D; eval(str);  &#x2F;&#x2F; returns 3

console.log(&#39;b is : &#39; + b);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="eval-2"><a class="markdownIt-Anchor" href="#eval-2">#</a> <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/eval#eval_%E4%B8%AD%E5%87%BD%E6%95%B0%E4%BD%9C%E4%B8%BA%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%A2%AB%E5%AE%9A%E4%B9%89%E9%9C%80%E8%A6%81%E2%80%9C%EF%BC%88%E2%80%9D%E5%92%8C%E2%80%9C%EF%BC%89%E2%80%9D%E4%BD%9C%E4%B8%BA%E5%89%8D%E7%BC%80%E5%92%8C%E5%90%8E%E7%BC%80"> <code>eval</code>  中函数作为字符串被定义需要 “（” 和 “）” 作为前缀和后缀</a></h3>
<pre class="line-numbers language-none"><code class="language-none">var fctStr1 &#x3D; &#39;function a() &#123;&#125;&#39;
var fctStr2 &#x3D; &#39;(function a() &#123;&#125;)&#39;
var fct1 &#x3D; eval(fctStr1)  &#x2F;&#x2F; 返回undefined
var fct2 &#x3D; eval(fctStr2)  &#x2F;&#x2F; 返回一个函数<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Harry Qu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://harryqu1229.github.io/2022/02/01/JS%20DOM,BOM,PC%E7%AB%AF%E5%AE%9E%E4%BE%8B%E7%89%B9%E6%95%88,%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8/">https://harryqu1229.github.io/2022/02/01/JS%20DOM,BOM,PC%E7%AB%AF%E5%AE%9E%E4%BE%8B%E7%89%B9%E6%95%88,%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/frontend/">frontend</a><a class="post-meta__tags" href="/tags/javascript/">javascript</a></div><div class="post_share"><div class="addthis_inline_share_toolbox"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-621848f44e1c3724" async="async"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/01/12/CSS%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93-YK%E8%8F%8C/"><img class="prev-cover" src="https://w.wallhaven.cc/full/wq/wallhaven-wqvov7.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">css Interview Questions</div></div></a></div><div class="next-post pull-right"><a href="/2022/02/01/ES6-11/"><img class="next-cover" src="https://w.wallhaven.cc/full/wq/wallhaven-wqvov7.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">My Javascript ES6-11 notes</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2022/02/01/JS%E6%A8%A1%E5%9D%97%E5%8C%96/" title="My Javascript modularity notes"><img class="cover" src="https://w.wallhaven.cc/full/72/wallhaven-72myve.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-01</div><div class="title">My Javascript modularity notes</div></div></a></div><div><a href="/2021/02/12/JS%E9%9D%A2%E8%AF%95%E9%A2%98--YK%E8%8F%8C/" title="some JS Frontend Interview Quesitions"><img class="cover" src="https://w.wallhaven.cc/full/q2/wallhaven-q2vzx5.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-12</div><div class="title">some JS Frontend Interview Quesitions</div></div></a></div><div><a href="/2022/02/02/js,css%E7%AD%89%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/" title="css and JS Frontend Interview Quesitions"><img class="cover" src="https://w.wallhaven.cc/full/8o/wallhaven-8oply1.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-02</div><div class="title">css and JS Frontend Interview Quesitions</div></div></a></div><div><a href="/2022/02/02/js%E9%AB%98%E7%BA%A7%E7%9F%A5%E8%AF%86%E7%82%B9/" title="JS Frontend Knowledge Points"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-02</div><div class="title">JS Frontend Knowledge Points</div></div></a></div><div><a href="/2022/02/01/Javascript/" title="My Javascript notes"><img class="cover" src="https://w.wallhaven.cc/full/28/wallhaven-28wymm.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-01</div><div class="title">My Javascript notes</div></div></a></div><div><a href="/2022/02/01/Javascript%E8%BF%9B%E9%98%B6(pink)/" title="My Javascript Advanced notes"><img class="cover" src="https://w.wallhaven.cc/full/8o/wallhaven-8o6rmo.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-01</div><div class="title">My Javascript Advanced notes</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div><div id="comment-switch"><span class="first-comment">Disqus</span><span class="switch-btn"></span><span class="second-comment">Gitalk</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/6aca34ee52f40fe1b2d637474f90111e2c151939/notes-img/%E5%85%B6%E4%B8%AD%E5%8C%85%E6%8B%AC%E5%9B%BE%E7%89%87%EF%BC%9A%7B%7B%20pinTitle%20%7D%7D_m6kogp.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Harry Qu</div><div class="author-info__description">Software Engineering Student</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">171</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">89</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">60</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/HarryQu1229"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://www.linkedin.com/in/harry-qu-a0a38220a" target="_blank" title="LinkedIn"><i class="fab fa-linkedin"></i></a><a class="social-icon" href="https://github.com/HarryQu1229" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:Harryqu666@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="weixin://dl/chat?harry666ya" target="_blank" title="Wechat"><i class="fab fa-weixin"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">be healthy, stay safe</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#javascript-dom-and-bom"><span class="toc-number">1.</span> <span class="toc-text"> Javascript DOM and BOM</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-web-api"><span class="toc-number">2.</span> <span class="toc-text"> 1. Web API</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#web-apis%E4%B8%8Ejs%E5%9F%BA%E7%A1%80%E5%85%B3%E8%81%94%E6%80%A7"><span class="toc-number">2.1.</span> <span class="toc-text"> Web APIs 与 JS 基础关联性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#js%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-number">2.1.1.</span> <span class="toc-text"> js 的组成</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#api%E5%92%8Cweb-api"><span class="toc-number">2.2.</span> <span class="toc-text"> API 和 Web API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#api"><span class="toc-number">2.2.1.</span> <span class="toc-text"> API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#web-api"><span class="toc-number">2.2.2.</span> <span class="toc-text"> Web API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#api%E5%92%8Cweb-api%E6%80%BB%E7%BB%93"><span class="toc-number">2.2.3.</span> <span class="toc-text"> API 和 Web API 总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-dom"><span class="toc-number">3.</span> <span class="toc-text"> 2. DOM</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#dom%E7%AE%80%E4%BB%8B"><span class="toc-number">3.1.</span> <span class="toc-text"> DOM 简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0"><span class="toc-number">3.2.</span> <span class="toc-text"> 获取元素</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%A0%B9%E6%8D%AEid%E8%8E%B7%E5%8F%96"><span class="toc-number">3.2.1.</span> <span class="toc-text"> 1. 根据 ID 获取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%A0%B9%E6%8D%AE%E6%A0%87%E7%AD%BE%E5%90%8D%E8%8E%B7%E5%8F%96"><span class="toc-number">3.2.2.</span> <span class="toc-text"> 2. 根据标签名获取</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%B9%E6%8D%AE%E5%AD%90%E6%A0%87%E7%AD%BE%E5%90%8D%E4%BB%8E%E7%88%B6%E6%A0%87%E7%AD%BE%E8%8E%B7%E5%8F%96%E6%89%80%E6%9C%89%E5%AD%90%E5%85%83%E7%B4%A0"><span class="toc-number">3.2.2.1.</span> <span class="toc-text"> 根据子标签名从父标签获取所有子元素</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E9%80%9A%E8%BF%87h5%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95%E8%8E%B7%E5%8F%96%E9%80%9A%E8%BF%87%E7%B1%BB%E5%90%8Dclass%E7%AD%89"><span class="toc-number">3.2.3.</span> <span class="toc-text"> 3. 通过 H5 新增方法获取 (通过类名 (class) 等)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%89%B9%E6%AE%8A%E5%85%83%E7%B4%A0"><span class="toc-number">3.2.4.</span> <span class="toc-text"> 获取特殊元素</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E4%BA%8B%E4%BB%B6%E5%9F%BA%E7%A1%80event"><span class="toc-number">4.</span> <span class="toc-text"> 3. 事件基础 (EVENT)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E6%A6%82%E8%BF%B0"><span class="toc-number">4.1.</span> <span class="toc-text"> 事件概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E4%B8%89%E8%A6%81%E7%B4%A0"><span class="toc-number">4.1.1.</span> <span class="toc-text"> 事件三要素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E4%BA%8B%E4%BB%B6%E7%9A%84%E6%AD%A5%E9%AA%A4"><span class="toc-number">4.1.2.</span> <span class="toc-text"> 执行事件的步骤</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6"><span class="toc-number">4.2.</span> <span class="toc-text"> 鼠标事件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E5%85%83%E7%B4%A0"><span class="toc-number">4.3.</span> <span class="toc-text"> 操作元素</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%94%B9%E5%8F%98%E5%85%83%E7%B4%A0%E5%86%85%E5%AE%B9"><span class="toc-number">4.3.1.</span> <span class="toc-text"> 1. 改变元素内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%94%B9%E5%8F%98%E5%85%83%E7%B4%A0%E5%B1%9E%E6%80%A7"><span class="toc-number">4.3.2.</span> <span class="toc-text"> 2. 改变元素属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%94%B9%E5%8F%98%E6%A0%B7%E5%BC%8F%E5%B1%9E%E6%80%A7"><span class="toc-number">4.3.3.</span> <span class="toc-text"> 3. 改变样式属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">4.3.4.</span> <span class="toc-text"> 总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%92%E4%BB%96%E6%80%9D%E6%83%B3"><span class="toc-number">4.3.5.</span> <span class="toc-text"> 排他思想</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7"><span class="toc-number">4.4.</span> <span class="toc-text"> 自定义属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E5%B1%9E%E6%80%A7%E5%80%BC"><span class="toc-number">4.4.1.</span> <span class="toc-text"> 获取属性值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%B1%9E%E6%80%A7%E5%80%BC"><span class="toc-number">4.4.2.</span> <span class="toc-text"> 设置属性值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%BB%E9%99%A4%E5%B1%9E%E6%80%A7"><span class="toc-number">4.4.3.</span> <span class="toc-text"> 移除属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#h5%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7"><span class="toc-number">4.4.4.</span> <span class="toc-text"> H5 自定义属性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E8%8A%82%E7%82%B9%E6%93%8D%E4%BD%9C"><span class="toc-number">5.</span> <span class="toc-text"> 4. 节点操作</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8A%82%E7%82%B9%E6%A6%82%E8%BF%B0"><span class="toc-number">5.1.</span> <span class="toc-text"> 节点概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%88%B6%E7%BA%A7%E8%8A%82%E7%82%B9"><span class="toc-number">5.1.1.</span> <span class="toc-text"> 父级节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E8%8A%82%E7%82%B9"><span class="toc-number">5.1.2.</span> <span class="toc-text"> 子节点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%AD%90%E8%8A%82%E7%82%B9"><span class="toc-number">5.1.2.1.</span> <span class="toc-text"> 第一个子节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E5%AD%90%E8%8A%82%E7%82%B9"><span class="toc-number">5.1.2.2.</span> <span class="toc-text"> 最后一个子节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">5.1.2.3.</span> <span class="toc-text"> 解决方案</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%84%E5%BC%9F%E8%8A%82%E7%82%B9"><span class="toc-number">5.1.3.</span> <span class="toc-text"> 兄弟节点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8B%E4%B8%80%E4%B8%AA%E5%85%84%E5%BC%9F%E8%8A%82%E7%82%B9"><span class="toc-number">5.1.3.1.</span> <span class="toc-text"> 下一个兄弟节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8A%E4%B8%80%E4%B8%AA%E5%85%84%E5%BC%9F%E8%8A%82%E7%82%B9"><span class="toc-number">5.1.3.2.</span> <span class="toc-text"> 上一个兄弟节点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8A%82%E7%82%B9%E6%93%8D%E4%BD%9C"><span class="toc-number">5.2.</span> <span class="toc-text"> 节点操作</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%8A%82%E7%82%B9"><span class="toc-number">5.2.1.</span> <span class="toc-text"> 创建节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E8%8A%82%E7%82%B9"><span class="toc-number">5.2.2.</span> <span class="toc-text"> 添加节点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%8A%82%E7%82%B9"><span class="toc-number">5.2.3.</span> <span class="toc-text"> 删除节点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8C%89a%E6%A0%87%E7%AD%BE%E9%98%B2%E6%AD%A2%E9%93%BE%E6%8E%A5%E8%B7%B3%E8%BD%AC"><span class="toc-number">5.2.3.1.</span> <span class="toc-text"> 按 a 标签防止链接跳转</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E5%88%B6%E8%8A%82%E7%82%B9%E5%85%8B%E9%9A%86%E8%8A%82%E7%82%B9"><span class="toc-number">5.2.4.</span> <span class="toc-text"> 复制节点（克隆节点）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-number">5.2.5.</span> <span class="toc-text"> 面试题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dom%E6%A0%B8%E5%BF%83%E6%80%BB%E7%BB%93"><span class="toc-number">5.2.6.</span> <span class="toc-text"> DOM 核心，总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E4%BA%8B%E4%BB%B6%E9%AB%98%E7%BA%A7"><span class="toc-number">6.</span> <span class="toc-text"> 5. 事件高级</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6"><span class="toc-number">6.1.</span> <span class="toc-text"> 注册事件 (绑定事件)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#addeventlistener%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E6%96%B9%E5%BC%8F"><span class="toc-number">6.1.1.</span> <span class="toc-text">  addEventListener  事件监听方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#attachevent%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC%E6%96%B9%E5%BC%8F%E5%85%BC%E5%AE%B9"><span class="toc-number">6.1.2.</span> <span class="toc-text">  attachEvent  事件监听方式 (兼容)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%A8%E5%86%8C%E4%BA%8B%E4%BB%B6%E5%85%BC%E5%AE%B9%E6%80%A7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">6.1.3.</span> <span class="toc-text"> 注册事件兼容性解决方案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E4%BA%8B%E4%BB%B6%E8%A7%A3%E7%BB%91%E4%BA%8B%E4%BB%B6"><span class="toc-number">6.2.</span> <span class="toc-text"> 删除事件 (解绑事件)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#removeeventlistener%E5%88%A0%E9%99%A4%E4%BA%8B%E4%BB%B6%E6%96%B9%E5%BC%8F"><span class="toc-number">6.2.1.</span> <span class="toc-text">  removeEventListener  删除事件方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#detachevent%E5%88%A0%E9%99%A4%E4%BA%8B%E4%BB%B6%E6%96%B9%E5%BC%8F%E5%85%BC%E5%AE%B9"><span class="toc-number">6.2.2.</span> <span class="toc-text">  detachEvent  删除事件方式 (兼容)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9F%E4%BA%8B%E4%BB%B6%E5%88%A0%E9%99%A4%E6%96%B9%E5%BC%8F"><span class="toc-number">6.2.3.</span> <span class="toc-text"> 传统事件删除方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E4%BA%8B%E4%BB%B6%E5%85%BC%E5%AE%B9%E6%80%A7%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">6.2.4.</span> <span class="toc-text"> 删除事件兼容性解决方案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dom%E4%BA%8B%E4%BB%B6%E6%B5%81"><span class="toc-number">6.3.</span> <span class="toc-text"> DOM 事件流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8D%95%E8%8E%B7%E9%98%B6%E6%AE%B5"><span class="toc-number">6.3.1.</span> <span class="toc-text"> 捕获阶段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%92%E6%B3%A1%E9%98%B6%E6%AE%B5"><span class="toc-number">6.3.2.</span> <span class="toc-text"> 冒泡阶段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">6.3.3.</span> <span class="toc-text"> 小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1"><span class="toc-number">6.4.</span> <span class="toc-text"> 事件对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%85%BC%E5%AE%B9%E6%80%A7%E6%96%B9%E6%A1%88"><span class="toc-number">6.4.1.</span> <span class="toc-text"> 事件对象的兼容性方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B8%B8%E8%A7%81%E5%B1%9E%E6%80%A7%E5%92%8C%E6%96%B9%E6%B3%95"><span class="toc-number">6.4.2.</span> <span class="toc-text"> 事件对象的常见属性和方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%E9%98%BB%E6%AD%A2%E9%BB%98%E8%AE%A4%E8%A1%8C%E4%B8%BA"><span class="toc-number">6.4.3.</span> <span class="toc-text"> 事件对象阻止默认行为</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%BB%E6%AD%A2%E4%BA%8B%E4%BB%B6%E5%86%92%E6%B3%A1"><span class="toc-number">6.4.4.</span> <span class="toc-text"> 阻止事件冒泡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#etarget-%E4%B8%8E-this"><span class="toc-number">6.4.5.</span> <span class="toc-text">  e.target  与  this</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%85%BC%E5%AE%B9%E6%80%A7"><span class="toc-number">6.4.6.</span> <span class="toc-text"> 事件对象的兼容性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E5%A7%94%E6%89%98"><span class="toc-number">6.5.</span> <span class="toc-text"> 事件委托</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6"><span class="toc-number">6.6.</span> <span class="toc-text"> 常见的鼠标事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A6%81%E6%AD%A2%E9%BC%A0%E6%A0%87%E5%8F%B3%E9%94%AE%E4%B8%8E%E9%BC%A0%E6%A0%87%E9%80%89%E4%B8%AD"><span class="toc-number">6.6.1.</span> <span class="toc-text"> 禁止鼠标右键与鼠标选中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BC%A0%E6%A0%87%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1"><span class="toc-number">6.6.2.</span> <span class="toc-text"> 鼠标事件对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84%E9%94%AE%E7%9B%98%E4%BA%8B%E4%BB%B6"><span class="toc-number">6.7.</span> <span class="toc-text"> 常用的键盘事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%AE%E7%9B%98%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7"><span class="toc-number">6.7.1.</span> <span class="toc-text"> 键盘对象属性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-bom%E6%A6%82%E8%BF%B0"><span class="toc-number">7.</span> <span class="toc-text"> 1. BOM 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#bom%E7%9A%84%E6%9E%84%E6%88%90"><span class="toc-number">7.1.</span> <span class="toc-text"> BOM 的构成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#window-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B8%B8%E8%A7%81%E4%BA%8B%E4%BB%B6"><span class="toc-number">7.2.</span> <span class="toc-text">  window  对象的常见事件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AA%97%E5%8F%A3%E5%8A%A0%E8%BD%BD%E4%BA%8B%E4%BB%B6"><span class="toc-number">7.2.1.</span> <span class="toc-text"> 窗口加载事件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E6%95%B4%E7%AA%97%E5%8F%A3%E5%A4%A7%E5%B0%8F%E4%BA%8B%E4%BB%B6"><span class="toc-number">7.2.2.</span> <span class="toc-text"> 调整窗口大小事件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">8.</span> <span class="toc-text"> 2. 定时器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#settimeout%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">8.1.</span> <span class="toc-text">  setTimeout()  定时器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#cleartimeout%E5%81%9C%E6%AD%A2%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">8.2.</span> <span class="toc-text">  clearTimeout()  停止定时器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#setinterval%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">8.3.</span> <span class="toc-text">  setInterval()  定时器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#clearinterval%E5%81%9C%E6%AD%A2%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">8.4.</span> <span class="toc-text">  clearInterval()  停止定时器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#this%E6%8C%87%E5%90%91"><span class="toc-number">8.5.</span> <span class="toc-text">  this  指向</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-js%E6%89%A7%E8%A1%8C%E6%9C%BA%E5%88%B6"><span class="toc-number">9.</span> <span class="toc-text"> 3. JS 执行机制</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#js%E6%98%AF%E5%8D%95%E7%BA%BF%E7%A8%8B"><span class="toc-number">9.1.</span> <span class="toc-text"> JS 是单线程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E5%92%8C%E5%BC%82%E6%AD%A5"><span class="toc-number">9.2.</span> <span class="toc-text"> 同步和异步</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-location%E5%AF%B9%E8%B1%A1"><span class="toc-number">10.</span> <span class="toc-text"> 4.  location  对象</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#url"><span class="toc-number">10.1.</span> <span class="toc-text"> url</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#location%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7"><span class="toc-number">10.2.</span> <span class="toc-text">  location  对象属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#location%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95"><span class="toc-number">10.3.</span> <span class="toc-text">  location  对象方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96url%E5%8F%82%E6%95%B0"><span class="toc-number">10.4.</span> <span class="toc-text"> 获取 URL 参数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-navigator%E5%AF%B9%E8%B1%A1"><span class="toc-number">11.</span> <span class="toc-text"> 5.  navigator  对象</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-history%E5%AF%B9%E8%B1%A1"><span class="toc-number">12.</span> <span class="toc-text"> 6.  history  对象</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#pc%E7%AB%AF%E7%BD%91%E9%A1%B5%E7%89%B9%E6%95%88"><span class="toc-number">13.</span> <span class="toc-text"> PC 端网页特效</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-offset"><span class="toc-number">13.1.</span> <span class="toc-text"> 1.  offset</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#offset-%E6%A6%82%E8%BF%B0"><span class="toc-number">13.1.1.</span> <span class="toc-text"> offset 概述</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#offset-%E4%B8%8E-style-%E5%8C%BA%E5%88%AB"><span class="toc-number">13.1.2.</span> <span class="toc-text"> offset 与 style 区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E8%8E%B7%E5%8F%96%E9%BC%A0%E6%A0%87%E5%9C%A8%E7%9B%92%E5%AD%90%E5%86%85%E7%9A%84%E5%9D%90%E6%A0%87"><span class="toc-number">13.1.3.</span> <span class="toc-text"> 案例：获取鼠标在盒子内的坐标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E6%A8%A1%E6%80%81%E6%A1%86%E6%8B%96%E6%8B%BD%E9%87%8D%E7%82%B9"><span class="toc-number">13.1.4.</span> <span class="toc-text"> 案例：模态框拖拽（重点）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E4%BB%BF%E4%BA%AC%E4%B8%9C%E6%94%BE%E5%A4%A7%E9%95%9C"><span class="toc-number">13.1.5.</span> <span class="toc-text"> 案例：仿京东放大镜</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-client"><span class="toc-number">13.2.</span> <span class="toc-text"> 2.  client</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%83%E7%B4%A0%E5%8F%AF%E8%A7%86%E5%8C%BA-client-%E7%B3%BB%E5%88%97"><span class="toc-number">13.2.1.</span> <span class="toc-text"> 元素可视区 client 系列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-%E6%B7%98%E5%AE%9D-flexiblejs-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%EF%B8%8F%E9%87%8D%E8%A6%81%EF%B8%8F"><span class="toc-number">13.2.2.</span> <span class="toc-text"> 案例： 淘宝 flexible.js 源码分析⭐️重要！！！⭐️</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-scroll"><span class="toc-number">13.3.</span> <span class="toc-text"> 3.  scroll</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%83%E7%B4%A0-scroll-%E7%B3%BB%E5%88%97%E5%B1%9E%E6%80%A7"><span class="toc-number">13.3.1.</span> <span class="toc-text"> 元素 scroll 系列属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E8%A2%AB%E5%8D%B7%E5%8E%BB%E7%9A%84%E5%A4%B4%E9%83%A8"><span class="toc-number">13.3.2.</span> <span class="toc-text"> 页面被卷去的头部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%E4%BB%BF%E6%B7%98%E5%AE%9D%E5%9B%BA%E5%AE%9A%E5%8F%B3%E4%BE%A7%E4%BE%A7%E8%BE%B9%E6%A0%8F"><span class="toc-number">13.3.3.</span> <span class="toc-text"> 案例：仿淘宝固定右侧侧边栏</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#offset-client-scroll%E6%80%BB%E7%BB%93"><span class="toc-number">13.4.</span> <span class="toc-text"> offset, client, scroll 总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mouseenter%E5%92%8Cmouseover%E7%9A%84%E5%8C%BA%E5%88%AB%E9%9D%A2%E8%AF%95%E7%BB%8F%E5%B8%B8%E9%97%AE"><span class="toc-number">13.5.</span> <span class="toc-text"> mouseenter 和 mouseover 的区别（面试经常问）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%8A%A8%E7%94%BB"><span class="toc-number">13.6.</span> <span class="toc-text"> 4. 动画</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">13.6.1.</span> <span class="toc-text"> 动画实现原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB%E5%87%BD%E6%95%B0%E7%AE%80%E5%8D%95%E5%B0%81%E8%A3%85"><span class="toc-number">13.6.2.</span> <span class="toc-text"> 动画函数简单封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB%E5%87%BD%E6%95%B0%E7%BB%99%E4%B8%8D%E5%90%8C%E5%85%83%E7%B4%A0%E8%AE%B0%E5%BD%95%E4%B8%8D%E5%90%8C%E5%AE%9A%E6%97%B6%E5%99%A8"><span class="toc-number">13.6.3.</span> <span class="toc-text"> 动画函数给不同元素记录不同定时器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%93%E5%8A%A8%E6%95%88%E6%9E%9C%E5%8E%9F%E7%90%86"><span class="toc-number">13.6.4.</span> <span class="toc-text"> 缓动效果原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB%E5%87%BD%E6%95%B0%E5%A4%9A%E4%B8%AA%E7%9B%AE%E6%A0%87%E5%80%BC%E4%B9%8B%E9%97%B4%E7%A7%BB%E5%8A%A8"><span class="toc-number">13.6.5.</span> <span class="toc-text"> 动画函数多个目标值之间移动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB%E5%87%BD%E6%95%B0%E6%B7%BB%E5%8A%A0%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0%E6%9C%80%E5%90%8E%E5%8A%A8%E7%94%BB%E7%9A%84%E5%86%99%E6%B3%95"><span class="toc-number">13.6.6.</span> <span class="toc-text"> 动画函数添加回调函数 (最后动画的写法)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E7%94%BB%E5%87%BD%E6%95%B0%E5%B0%81%E8%A3%85%E5%88%B0%E5%8D%95%E7%8B%ACjs%E6%96%87%E4%BB%B6%E9%87%8C%E9%9D%A2"><span class="toc-number">13.6.7.</span> <span class="toc-text"> 动画函数封装到单独 JS 文件里面</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%B8%B8%E8%A7%81%E7%BD%91%E9%A1%B5%E7%89%B9%E6%95%88%E6%A1%88%E4%BE%8B"><span class="toc-number">13.7.</span> <span class="toc-text"> 5、常见网页特效案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E7%BD%91%E9%A1%B5%E8%BD%AE%E6%92%AD%E5%9B%BE%E9%87%8D%E7%82%B9"><span class="toc-number">13.7.1.</span> <span class="toc-text"> 1. 网页轮播图 (重点)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%BF%94%E5%9B%9E%E9%A1%B6%E9%83%A8"><span class="toc-number">13.7.2.</span> <span class="toc-text"> 2. 返回顶部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%AD%8B%E6%96%97%E4%BA%91%E6%A1%88%E4%BE%8B"><span class="toc-number">13.7.3.</span> <span class="toc-text"> 3. 筋斗云案例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#javascript%E4%B9%8B%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8"><span class="toc-number">14.</span> <span class="toc-text"> javaScript 之本地存储</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8%E7%89%B9%E6%80%A7"><span class="toc-number">14.0.1.</span> <span class="toc-text"> 本地存储特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#windowsessionstorage"><span class="toc-number">14.0.2.</span> <span class="toc-text">  window.sessionStorage</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#windowlocalstorage"><span class="toc-number">14.0.3.</span> <span class="toc-text">  window.localStorage</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#localstorage%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">14.0.3.1.</span> <span class="toc-text"> localStorage 的使用方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A2%9E%E5%8A%A0localstorage"><span class="toc-number">14.0.3.1.1.</span> <span class="toc-text"> 增加 localStorage</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96localstorage"><span class="toc-number">14.0.3.1.2.</span> <span class="toc-text"> 读取 localStorage</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4localstorage"><span class="toc-number">14.0.3.1.3.</span> <span class="toc-text"> 删除 localStorage</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%89%80%E6%9C%89%E7%9A%84localstorage"><span class="toc-number">14.0.3.1.4.</span> <span class="toc-text"> 删除所有的 localStorage</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#json%E5%AF%B9%E8%B1%A1%E4%B8%8E%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E8%BD%AC%E5%8C%96"><span class="toc-number">14.0.3.2.</span> <span class="toc-text"> JSON 对象与字符串的转化</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#json%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E6%88%90json%E5%AF%B9%E8%B1%A1"><span class="toc-number">14.0.3.2.1.</span> <span class="toc-text"> JSON 字符串转成 JSON 对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#json%E5%AF%B9%E8%B1%A1%E8%BD%AC%E6%88%90json%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">14.0.3.2.2.</span> <span class="toc-text"> JSON 对象转成 JSON 字符串</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#chrome%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E6%9F%A5%E7%9C%8Blocalstorage"><span class="toc-number">14.0.3.3.</span> <span class="toc-text"> Chrome 浏览器中查看 localStorage</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%B0%E4%BD%8F%E7%94%A8%E6%88%B7%E5%90%8D%E6%A1%88%E4%BE%8B"><span class="toc-number">14.0.4.</span> <span class="toc-text"> 记住用户名案例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cookie"><span class="toc-number">14.0.5.</span> <span class="toc-text"> cookie</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E4%BB%A5%E5%8F%8Asessionstoragelocalstoragecookie%E5%8C%BA%E5%88%AB"><span class="toc-number">14.0.6.</span> <span class="toc-text"> 总结以及 sessionStorage,localStorage,cookie 区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#json"><span class="toc-number">15.</span> <span class="toc-text"> JSON</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">15.1.</span> <span class="toc-text"> 简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-json"><span class="toc-number">15.1.1.</span> <span class="toc-text"> 什么是 JSON</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json-%E8%BD%AC%E6%8D%A2%E4%B8%BA-javascript-%E5%AF%B9%E8%B1%A1"><span class="toc-number">15.1.2.</span> <span class="toc-text"> JSON 转换为 JavaScript 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json-%E7%9A%84%E9%80%82%E7%94%A8%E8%8C%83%E5%9B%B4"><span class="toc-number">15.1.3.</span> <span class="toc-text"> JSON 的适用范围</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json-%E7%9A%84%E7%89%B9%E7%82%B9"><span class="toc-number">15.1.4.</span> <span class="toc-text"> JSON 的特点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B"><span class="toc-number">15.1.5.</span> <span class="toc-text"> 简单示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8E-xml-%E7%9B%B8%E4%BC%BC%E4%B9%8B%E5%A4%84"><span class="toc-number">15.1.6.</span> <span class="toc-text"> 与 XML 相似之处</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8E-xml-%E4%B8%8D%E5%90%8C%E4%B9%8B%E5%A4%84"><span class="toc-number">15.1.7.</span> <span class="toc-text"> 与 XML 不同之处</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8-json"><span class="toc-number">15.1.8.</span> <span class="toc-text"> 为什么使用 JSON</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-xml"><span class="toc-number">15.1.8.1.</span> <span class="toc-text"> 使用 XML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-json"><span class="toc-number">15.1.8.2.</span> <span class="toc-text"> 使用 JSON</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">15.2.</span> <span class="toc-text"> 语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#json-%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99"><span class="toc-number">15.2.1.</span> <span class="toc-text"> JSON 语法规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json-%E5%90%8D%E7%A7%B0-%E5%80%BC%E5%AF%B9"><span class="toc-number">15.2.2.</span> <span class="toc-text"> JSON 名称－值对</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json-%E5%80%BC"><span class="toc-number">15.2.3.</span> <span class="toc-text"> JSON 值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json-%E5%AF%B9%E8%B1%A1"><span class="toc-number">15.2.4.</span> <span class="toc-text"> JSON 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json-%E6%95%B0%E7%BB%84"><span class="toc-number">15.2.5.</span> <span class="toc-text"> JSON 数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json-%E6%96%87%E4%BB%B6"><span class="toc-number">15.2.6.</span> <span class="toc-text"> JSON 文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#javascript-%E5%AF%B9%E8%B1%A1%E8%BD%AC%E6%8D%A2%E4%B8%BA-json-%E6%96%87%E6%9C%AC"><span class="toc-number">15.2.7.</span> <span class="toc-text"> JavaScript 对象转换为 JSON 文本</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">15.3.</span> <span class="toc-text"> 数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E5%9E%8B"><span class="toc-number">15.3.1.</span> <span class="toc-text"> 数字型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-2"><span class="toc-number">15.3.1.1.</span> <span class="toc-text"> 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-number">15.3.1.2.</span> <span class="toc-text"> 示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%9E%8B"><span class="toc-number">15.3.2.</span> <span class="toc-text"> 字符串型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-3"><span class="toc-number">15.3.2.1.</span> <span class="toc-text"> 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-2"><span class="toc-number">15.3.2.2.</span> <span class="toc-text"> 示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B0%94%E5%9E%8B"><span class="toc-number">15.3.3.</span> <span class="toc-text"> 布尔型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-4"><span class="toc-number">15.3.3.1.</span> <span class="toc-text"> 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-3"><span class="toc-number">15.3.3.2.</span> <span class="toc-text"> 示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E7%BB%84"><span class="toc-number">15.3.4.</span> <span class="toc-text"> 数组</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-5"><span class="toc-number">15.3.4.1.</span> <span class="toc-text"> 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-4"><span class="toc-number">15.3.4.2.</span> <span class="toc-text"> 示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1"><span class="toc-number">15.3.5.</span> <span class="toc-text"> 对象</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-6"><span class="toc-number">15.3.5.1.</span> <span class="toc-text"> 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-5"><span class="toc-number">15.3.5.2.</span> <span class="toc-text"> 示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A9%BA%E6%A0%BC"><span class="toc-number">15.3.6.</span> <span class="toc-text"> 空格</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-7"><span class="toc-number">15.3.6.1.</span> <span class="toc-text"> 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-6"><span class="toc-number">15.3.6.2.</span> <span class="toc-text"> 示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#null"><span class="toc-number">15.3.7.</span> <span class="toc-text"> null</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-8"><span class="toc-number">15.3.7.1.</span> <span class="toc-text"> 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-7"><span class="toc-number">15.3.7.2.</span> <span class="toc-text"> 示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json-%E5%9F%BA%E7%A1%80%E7%BB%93%E6%9E%84"><span class="toc-number">15.3.8.</span> <span class="toc-text"> JSON 基础结构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F"><span class="toc-number">15.4.</span> <span class="toc-text"> 模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#json-%E6%A8%A1%E5%BC%8F%E7%A4%BA%E4%BE%8B"><span class="toc-number">15.4.1.</span> <span class="toc-text"> JSON 模式示例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">15.5.</span> <span class="toc-text"> 使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%8A-json-%E6%96%87%E6%9C%AC%E8%BD%AC%E6%8D%A2%E4%B8%BA-javascript-%E5%AF%B9%E8%B1%A1"><span class="toc-number">15.5.1.</span> <span class="toc-text"> 把 JSON 文本转换为 JavaScript 对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E6%9D%A5%E8%87%AA%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%AF%B9%E8%B1%A1"><span class="toc-number">15.5.2.</span> <span class="toc-text"> 实例：来自字符串的对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json-%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-number">15.5.3.</span> <span class="toc-text"> JSON 解析器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jsonp"><span class="toc-number">15.6.</span> <span class="toc-text"> JSONP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#jsonp-%E5%BA%94%E7%94%A8"><span class="toc-number">15.6.1.</span> <span class="toc-text"> JSONP 应用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF-jsonp-%E6%A0%BC%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">15.6.1.1.</span> <span class="toc-text"> 服务端 JSONP 格式数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%9E%E7%8E%B0-callbackfunction-%E5%87%BD%E6%95%B0"><span class="toc-number">15.6.1.2.</span> <span class="toc-text"> 客户端实现 callbackFunction () 函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%B1%95%E7%A4%BA"><span class="toc-number">15.6.1.3.</span> <span class="toc-text"> 页面展示</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%A1%B5%E9%9D%A2%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81"><span class="toc-number">15.6.1.4.</span> <span class="toc-text"> 客户端页面完整代码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#jquery-%E4%BD%BF%E7%94%A8-jsonp"><span class="toc-number">15.6.2.</span> <span class="toc-text"> jQuery 使用 JSONP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8-python-%E4%B8%AD%E4%BD%BF%E7%94%A8-json"><span class="toc-number">15.7.</span> <span class="toc-text"> 在 Python 中使用 JSON</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83"><span class="toc-number">15.7.1.</span> <span class="toc-text"> 环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json-%E5%87%BD%E6%95%B0"><span class="toc-number">15.7.2.</span> <span class="toc-text"> JSON 函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-python-%E7%BC%96%E7%A0%81-jsonencode"><span class="toc-number">15.7.3.</span> <span class="toc-text"> 使用 Python 编码 JSON（encode）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-9"><span class="toc-number">15.7.3.1.</span> <span class="toc-text"> 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-8"><span class="toc-number">15.7.3.2.</span> <span class="toc-text"> 示例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-python-%E8%A7%A3%E7%A0%81-jsondecode"><span class="toc-number">15.7.4.</span> <span class="toc-text"> 使用 Python 解码 JSON（decode）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-10"><span class="toc-number">15.7.4.1.</span> <span class="toc-text"> 语法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B-9"><span class="toc-number">15.7.4.2.</span> <span class="toc-text"> 示例</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8-java-%E4%B8%AD%E4%BD%BF%E7%94%A8-json"><span class="toc-number">15.8.</span> <span class="toc-text"> 在 Java 中使用 JSON</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%AF%E5%A2%83-2"><span class="toc-number">15.8.1.</span> <span class="toc-text"> 环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#json-%E5%92%8C-java-%E5%AE%9E%E4%BD%93%E6%98%A0%E5%B0%84"><span class="toc-number">15.8.2.</span> <span class="toc-text"> JSON 和 Java 实体映射</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8-java-%E4%B8%AD%E7%BC%96%E7%A0%81-json"><span class="toc-number">15.8.3.</span> <span class="toc-text"> 在 Java 中编码 JSON</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8-java-%E4%B8%AD%E8%A7%A3%E7%A0%81-json"><span class="toc-number">15.8.4.</span> <span class="toc-text"> 在 Java 中解码 JSON</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#eval"><span class="toc-number">16.</span> <span class="toc-text"> eval()</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95-11"><span class="toc-number">16.1.</span> <span class="toc-text"> 语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0"><span class="toc-number">16.1.1.</span> <span class="toc-text"> 参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">16.1.2.</span> <span class="toc-text"> 返回值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%8F%E8%BF%B0"><span class="toc-number">16.2.</span> <span class="toc-text"> 描述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B0%B8%E8%BF%9C%E4%B8%8D%E8%A6%81%E4%BD%BF%E7%94%A8"><span class="toc-number">16.3.</span> <span class="toc-text"> 永远不要使用  eval ！</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E6%88%90%E5%91%98%E5%B1%9E%E6%80%A7"><span class="toc-number">16.3.1.</span> <span class="toc-text"> 访问成员属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%87%BD%E6%95%B0%E8%80%8C%E9%9D%9E%E4%BB%A3%E7%A0%81%E6%AE%B5"><span class="toc-number">16.3.2.</span> <span class="toc-text"> 使用函数而非代码段</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E6%9E%90-json%E5%B0%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E5%8C%96%E4%B8%BA-javascript-%E5%AF%B9%E8%B1%A1"><span class="toc-number">16.3.3.</span> <span class="toc-text"> 解析 JSON（将字符串转化为 JavaScript 对象）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%BD%E9%87%8F%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE%E8%80%8C%E9%9D%9E%E4%BB%A3%E7%A0%81"><span class="toc-number">16.3.4.</span> <span class="toc-text"> 尽量传递数据而非代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A5%E6%9C%89%E9%99%90%E6%9D%83%E9%99%90%E8%BF%90%E8%A1%8C%E4%BB%A3%E7%A0%81"><span class="toc-number">16.3.5.</span> <span class="toc-text"> 以有限权限运行代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90"><span class="toc-number">16.4.</span> <span class="toc-text"> 例子</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-2"><span class="toc-number">16.4.1.</span> <span class="toc-text"> 使用  eval </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-3"><span class="toc-number">16.4.2.</span> <span class="toc-text"> 使用  eval  执行一串 JavaScript 语句</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%94%E5%9B%9E%E5%80%BC-2"><span class="toc-number">16.4.3.</span> <span class="toc-text"> 返回值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#eval-2"><span class="toc-number">16.4.4.</span> <span class="toc-text">  eval  中函数作为字符串被定义需要 “（” 和 “）” 作为前缀和后缀</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-map"><div class="card-content"><div class="item-headline"><i class="fa fa-globe-asia" aria-hidden="true"></i><span>Visitor Map</span></div><script id="clstr_globe" type="text/javascript" defer="defer" src="//clustrmaps.com/globe.js?d=4LA950xi3DtQgUHPlkO0mo-n_QgrcOu-1BIiVpExg7k"></script></div></div><div class="card-widget card-pixiv"><div class="card-content"><div class="item-headline"><i class="fa fa-image" aria-hidden="true"></i><span>Pixiv Top50</span><iframe src="https://cloud.mokeyjay.com/pixiv" frameborder="0" style="width:99%;height:380px;margin:0;"></iframe></div></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/04/02/linux%E5%B0%8F%E7%AC%94%E8%AE%B0/" title="Linux easy notes"><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/18bbc356ddf5fcd5544ddb91bb7b35a99ebfef25/notes-img/download%20(1).png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux easy notes"/></a><div class="content"><a class="title" href="/2022/04/02/linux%E5%B0%8F%E7%AC%94%E8%AE%B0/" title="Linux easy notes">Linux easy notes</a><time datetime="2022-04-01T11:00:00.000Z" title="Created 2022-04-02 00:00:00">2022-04-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/02/linux%E7%9A%84%E4%B8%80%E4%BA%9B%E5%91%BD%E4%BB%A4/" title="Linux commands"><img src="https://w.wallhaven.cc/full/q2/wallhaven-q257x7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux commands"/></a><div class="content"><a class="title" href="/2022/04/02/linux%E7%9A%84%E4%B8%80%E4%BA%9B%E5%91%BD%E4%BB%A4/" title="Linux commands">Linux commands</a><time datetime="2022-04-01T11:00:00.000Z" title="Created 2022-04-02 00:00:00">2022-04-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/02/Linux/" title="Linux notes"><img src="https://w.wallhaven.cc/full/q2/wallhaven-q257x7.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux notes"/></a><div class="content"><a class="title" href="/2022/04/02/Linux/" title="Linux notes">Linux notes</a><time datetime="2022-04-01T11:00:00.000Z" title="Created 2022-04-02 00:00:00">2022-04-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/01/nodejs/" title="Nodejs notes"><img src="https://w.wallhaven.cc/full/k7/wallhaven-k7v9yq.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nodejs notes"/></a><div class="content"><a class="title" href="/2022/03/01/nodejs/" title="Nodejs notes">Nodejs notes</a><time datetime="2022-02-28T11:00:00.000Z" title="Created 2022-03-01 00:00:00">2022-03-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/01/%E5%88%9D%E4%B8%AD%E7%BA%A7%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/" title="Frontend interview questions"><img src="https://w.wallhaven.cc/full/8o/wallhaven-8o6rmo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Frontend interview questions"/></a><div class="content"><a class="title" href="/2022/03/01/%E5%88%9D%E4%B8%AD%E7%BA%A7%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/" title="Frontend interview questions">Frontend interview questions</a><time datetime="2022-02-28T11:00:00.000Z" title="Created 2022-03-01 00:00:00">2022-03-01</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By Harry Qu</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="Chat"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Local search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'https://harryqu1229.github.io/2022/02/01/JS%20DOM,BOM,PC%E7%AB%AF%E5%AE%9E%E4%BE%8B%E7%89%B9%E6%95%88,%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8/'
    this.page.identifier = '2022/02/01/JS DOM,BOM,PC端实例特效,本地存储/'
    this.page.title = 'My Javascript DOM, BOM, storage etc notes'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://harry-study-blog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
}

if ('Disqus' === 'Disqus' || !false) {
  if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script><script>if (window.DISQUSWIDGETS === undefined) {
  var d = document, s = d.createElement('script');
  s.src = 'https://harry-study-blog.disqus.com/count.js';
  s.id = 'dsq-count-scr';
  (d.head || d.body).appendChild(s);
} else {
  DISQUSWIDGETS.getCount({reset: true});
}</script><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '5df1e915e0fa867b50de',
      clientSecret: 'ce1cb793fe49078ee9d0102d3326d0d50ff6937b',
      repo: 'blog-comments-storage',
      owner: 'HarryQu1229',
      admin: ['HarryQu1229'],
      id: 'f9edc06eefa42af36dd65e8efa995985',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Disqus' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[image]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[link]') // replace url
    content = content.replace(/<code>.*?<\/code>/gi, '[code]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    fetch('https://disqus.com/api/3.0/forums/listPosts.json?forum=harry-study-blog&related=thread&limit=6&api_key=a5KJbIVovxK3ZXvlrPvv7wgYLY4fAh3pvP4thfjXYUdM2cNymlgVhMhdyhb9e0O3')
      .then(response => response.json())
      .then(data => {
        const disqusArray = data.response.map(item => {
          return {
            'avatar': item.author.avatar.cache,
            'content': changeContent(item.message),
            'nick': item.author.name,
            'url': item.url,
            'date': item.createdAt
          }
        })

        saveToLocal.set('disqus-newest-comments', JSON.stringify(disqusArray), 10/(60*24))
        generateHtml(disqusArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "Unable to get the data, please make sure the settings are correct."
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick}</span><time> / ${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += 'No Comment'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('disqus-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="2809513713" data-server="netease" data-type="playlist" data-autoplay="false" data-fixed="true" data-order="random" data-theme="#e9ccd3"> </div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script>((window.gitter = {}).chat = {}).options = {
  disableDefaultChat: true,
};
document.addEventListener('gitter-sidecar-ready', (e) => {
  const GitterChat = e.detail.Chat
  let chat

  function initGitter () {
    chat = new GitterChat({
      room: 'HarryStudyBlog/community',
      activationElement: '#chat_btn'
    });
  }

  initGitter()

  if (true) {
    document.addEventListener('pjax:complete', () => {
      chat.destroy()
      initGitter()
    })
  }

})</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="async" defer="defer"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><div id="ghbdages" style="overflow:hidden;max-height:90px;height:auto;text-align:center;margin-top:10px"><div class="swiper-wrapper"><div class="swiper-slide"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="博客框架为Hexo_v5.4.0"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="主题版本Butterfly_v3.8.2"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://www.jsdelivr.com/" style="margin-inline:5px" title="本站使用JsDelivr为静态资源提供CDN加速"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsDelivr" alt=""/></a></div><div class="swiper-slide"><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="本站采用双线部署，默认线路托管于Vercel"><img src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="本站采用双线部署，联通线路托管于Coding"><img src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&amp;logo=Codio" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="本站项目由Github托管"><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a></div><div class="swiper-slide"><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></div></div></div><style>a.github-badge:hover:before {display:none}</style>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/footer-beautify-runtime.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-footer-beautify/lib/swiperbdage_init.min.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('已挂载gitcalendar')
      }

    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("https://gitcalendar.akilar.top/api?HarryQu1229",['#ebedf0', '#fdcdec', '#fc9bd9', '#fa6ac5', '#f838b2', '#f5089f', '#c4067e', '#92055e', '#540336', '#48022f', '#30021f'],'HarryQu1229')
    }
  </script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":300,"height":450},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>