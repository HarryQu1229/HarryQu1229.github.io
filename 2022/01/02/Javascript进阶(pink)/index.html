<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>My Javascript Advanced notes | Harry Blog</title><meta name="keywords" content="frontend,javascript"><meta name="author" content="Harry Qu"><meta name="copyright" content="Harry Qu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="# 1. 面向对象导读  面向过程 POP 就是分析出解决问题所需要的步骤，然后用函数把这些步骤一步一步实现，使用的时候再一个一个的依次调用就可以了。 面向对象 OOP 是把事务分解成为一个个对象，然后由对象之间分工与合作。面向对象更贴近我们的实际生活，可以使用面向对象描述现实世界事物。但是事物分为具体的事物和抽象的事物  面向对象的思维特点：  抽取（抽象）对象共用的属性和行为组织 (封装) 成">
<meta property="og:type" content="article">
<meta property="og:title" content="My Javascript Advanced notes">
<meta property="og:url" content="https://harryqu1229.github.io/2022/01/02/Javascript%E8%BF%9B%E9%98%B6(pink)/index.html">
<meta property="og:site_name" content="Harry Blog">
<meta property="og:description" content="# 1. 面向对象导读  面向过程 POP 就是分析出解决问题所需要的步骤，然后用函数把这些步骤一步一步实现，使用的时候再一个一个的依次调用就可以了。 面向对象 OOP 是把事务分解成为一个个对象，然后由对象之间分工与合作。面向对象更贴近我们的实际生活，可以使用面向对象描述现实世界事物。但是事物分为具体的事物和抽象的事物  面向对象的思维特点：  抽取（抽象）对象共用的属性和行为组织 (封装) 成">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://harryqu1229.github.io/img/default-covers/sun.png">
<meta property="article:published_time" content="2022-01-01T11:00:00.000Z">
<meta property="article:modified_time" content="2022-06-12T01:09:15.365Z">
<meta property="article:author" content="Harry Qu">
<meta property="article:tag" content="frontend">
<meta property="article:tag" content="javascript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://harryqu1229.github.io/img/default-covers/sun.png"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="https://harryqu1229.github.io/2022/01/02/Javascript%E8%BF%9B%E9%98%B6(pink)/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":100,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#C78550","bgDark":"#c08eaf","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'My Javascript Advanced notes',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-06-12 13:09:15'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><style type="text/css">.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover{left:0!important}</style><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">158</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">84</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">57</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-graduation-cap"></i><span> Journey</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> Hobbies</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/Photos/"><i class="fa-fw fas fa-images"></i><span> Photos</span></a></li><li><a class="site-page child" href="/Movies/"><i class="fa-fw fas fa-video"></i><span> Movies</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://geekboots.sfo2.cdn.digitaloceanspaces.com/post/javascript-1567486564472.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Harry Blog</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-graduation-cap"></i><span> Journey</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> Hobbies</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/Photos/"><i class="fa-fw fas fa-images"></i><span> Photos</span></a></li><li><a class="site-page child" href="/Movies/"><i class="fa-fw fas fa-video"></i><span> Movies</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">My Javascript Advanced notes</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2022-01-01T11:00:00.000Z" title="Created 2022-01-02 00:00:00">2022-01-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-06-12T01:09:15.365Z" title="Updated 2022-06-12 13:09:15">2022-06-12</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Frontend/">Frontend</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">24.9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>88min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="My Javascript Advanced notes"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="1-面向对象导读"><a class="markdownIt-Anchor" href="#1-面向对象导读">#</a> 1. 面向对象导读</h1>
<ul>
<li>面向过程 POP 就是分析出解决问题所需要的步骤，然后用函数把这些步骤一步一步实现，使用的时候再一个一个的依次调用就可以了。</li>
<li>面向对象 OOP 是把事务分解成为一个个对象，然后由对象之间分工与合作。面向对象更贴近我们的实际生活，可以使用面向对象描述现实世界事物。但是事物分为具体的事物和抽象的事物</li>
</ul>
<p>面向对象的思维特点：</p>
<ul>
<li>抽取（抽象）对象共用的属性和行为组织 (封装) 成一个类 (模板)</li>
<li>对类进行实例化，获取类的对象</li>
</ul>
<p>两者比较:</p>
<ul>
<li>
<p>面向过程</p>
<p>优点：性能比面向对象高，适合跟硬件联系很紧密的东西，<br>
 缺点：不易维护、不易复用、不易扩展。</p>
</li>
<li>
<p>面向对象</p>
<p>优点：易维护、易复用、易扩展，由于面向对象有封装、继承、多态性的特性，可以设计出低耦合的系统，使系统 更加灵活、更加易于维护，<br>
缺点：性能比面向过程低。</p>
</li>
</ul>
<p>举个栗子：将大象装进冰箱，面向对象做法：先找出对象，并写出这些对象的功能</p>
<ol>
<li>大象对象 进去</li>
<li>冰箱对象 打开 关闭</li>
<li>使用大象和冰箱的功能</li>
</ol>
<h2 id="11-es6模块化"><a class="markdownIt-Anchor" href="#11-es6模块化">#</a> 1.1 ES6 模块化</h2>
<p>node.js 遵循了 CommonJS 的模块化规范。其中：</p>
<ul>
<li>导入其它模块使用 require () 方法</li>
<li>模块对外共享成员使用 module.exports 对象</li>
</ul>
<p>模块化的好处：大家都遵守同样的模块化规范写代码，降低了沟通的成本，极大方便了各个模块之间的相互调用，利人利己。<br>
在 ES6 模块化规范诞生之前，JavaScript 社区已经尝试并提出了 AMD、CMD、CommonJS 等模块化规范。但是，这些由社区提出的模块化标准，还是存在一定的差异性与局限性、并不是浏览器与服务器通用的模块化标准，例如：</p>
<ul>
<li>
<p>AMD 和 CMD 适用于浏览器端的 Javascript 模块化</p>
</li>
<li>
<p>CommonJS 适用于服务器端的 Javascript 模块化</p>
<p>太多的模块化规范给开发者增加了学习的难度与开发的成本。因此，大一统的 ES6 模块化规范诞生了！</p>
</li>
</ul>
<h3 id="什么是-es6-模块化规范"><a class="markdownIt-Anchor" href="#什么是-es6-模块化规范">#</a> 什么是 ES6 模块化规范</h3>
<p>ES6 模块化规范是浏览器端与服务器端通用的模块化开发规范。它的出现极大的降低了前端开发者的模块化学习成本，开发者不需再额外学习 AMD、CMD 或 CommonJS 等模块化规范。ES6 模块化规范中定义：</p>
<ul>
<li>每个 js 文件都是一个独立的模块</li>
<li>导入其它模块成员使用 import 关键字</li>
<li>向外共享模块成员使用 export 关键字</li>
</ul>
<h3 id="nodejs-中体验-es6-模块化"><a class="markdownIt-Anchor" href="#nodejs-中体验-es6-模块化">#</a> node.js 中体验 ES6 模块化</h3>
<p>在 node.js 中体验 ES6 模块化，node.js 中默认仅支持 CommonJS 模块化规范，若想基于 node.js 体验与学习 ES6 的模块化语法，可以按照如下两个步骤进行配置：<br>
① 确保安装了 v14.15.1 或更高版本的 node.js  <code>node -version</code> <br>
② 在 package.json 的根节点中添加 “type”: “module” 节点，初始化 package.json 的命令 <code>npm init -y</code>  默认 common.js</p>
<hr>
<h2 id="12-es6-模块化的基本语法"><a class="markdownIt-Anchor" href="#12-es6-模块化的基本语法">#</a> 1.2 ES6 模块化的基本语法</h2>
<p>ES6 的模块化主要包含如下 3 种用法：<br>
① 默认导出与默认导入<br>
② 按需导出与按需导入<br>
③ 直接导入并执行模块中的代码</p>
<h3 id="默认导出与默认导入"><a class="markdownIt-Anchor" href="#默认导出与默认导入">#</a> 默认导出与默认导入</h3>
<ul>
<li>默认导出的语法： export default 默认导出的成员，每个模块中，只允许使用唯一的一次 export default，否则会报错！</li>
</ul>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 01 默认导出.js</span>
<span class="token keyword">let</span> n1 <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">let</span> n2 <span class="token operator">=</span> <span class="token number">20</span>
<span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  n1<span class="token punctuation">,</span>
  show
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>默认导入的语法： import 接收名称 from ‘模块标识符’，默认导入时的接收名称可以任意名称，只要是合法的成员名称即可：</li>
</ul>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 02 默认导入.js</span>
<span class="token keyword">import</span> m1 <span class="token keyword">from</span> <span class="token string">'./01 默认导出.js'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m1<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>命令行中输入  <code>node 02 默认导入.js</code></p>
<h3 id="按需导出与按需导入"><a class="markdownIt-Anchor" href="#按需导出与按需导入">#</a> 按需导出与按需导入</h3>
<ul>
<li>按需导出的语法： export 按需导出的成员</li>
</ul>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">export</span> <span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token string">'aaa'</span>
<span class="token keyword">export</span> <span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token string">'ccc'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<ul>
<li>按需导入的语法： import {s1} from ‘模块标识符’</li>
</ul>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> info<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> s1<span class="token punctuation">,</span>s2 <span class="token keyword">as</span> str2 <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'./03.按需导出.js'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<ul>
<li>
<p>按需导出与按需导入的注意事项</p>
<p>① 每个模块中可以使用多次按需导出<br>
② 按需导入的成员名称必须和按需导出的名称保持一致<br>
③ 按需导入时，可以使用 as 关键字进行重命名<br>
④ 按需导入可以和默认导入一起使用</p>
</li>
</ul>
<h3 id="直接导入并执行模块中的代码"><a class="markdownIt-Anchor" href="#直接导入并执行模块中的代码">#</a> 直接导入并执行模块中的代码</h3>
<p>如果只想单纯地执行某个模块中的代码，并不需要得到模块中向外共享的成员。此时，可以直接导入并执行模<br>
块代码，示例代码如下：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token comment">// 05.直接运行模块中的代码.js</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// 06.test.js</span>
<span class="token keyword">import</span> <span class="token string">'./05.直接运行模块中的代码.js'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="13-promise"><a class="markdownIt-Anchor" href="#13-promise">#</a> 1.3 Promise</h2>
<p>多层回调函数的相互嵌套，就形成了回调地狱。 为了解决回调地狱的问题，ES6（ECMAScript 2015）中新增了 Promise 的概念。<br>
回调地狱的缺点：</p>
<ul>
<li>代码耦合性太强，牵一发而动全身，难以维护</li>
<li>大量冗余的代码相互嵌套，代码的可读性变差</li>
</ul>
<h3 id="promise-的基本概念"><a class="markdownIt-Anchor" href="#promise-的基本概念">#</a> Promise 的基本概念</h3>
<ul>
<li>
<p><code>Promise</code>  是一个构造函数</p>
<p>①我们可以创建 Promise 的实例 const p = new Promise ()<br>
②new 出来的 Promise 实例对象，代表一个异步操作</p>
</li>
<li>
<p>P <code>romise.prototype</code>  上包含一个  <code>.then()</code>  方法</p>
<p>① 每一次 new Promise () 构造函数得到的实例对象，<br>
② 都可以通过原型链的方式访问到 .then () 方法，例如 p.then ()</p>
</li>
<li>
<p><code>.then()</code>  方法用来预先指定成功和失败的回调函数</p>
<p>①p.then (成功的回调函数，失败的回调函数)<br>
②p.then(result =&gt; { }, error =&gt; { })<br>
③调用 .then () 方法时，成功的回调函数是必选的、失败的回调函数是可选的</p>
</li>
</ul>
<h3 id="基于-then-fs-读取文件内容"><a class="markdownIt-Anchor" href="#基于-then-fs-读取文件内容">#</a> 基于 then-fs 读取文件内容</h3>
<p>由于 node.js 官方提供的 fs 模块仅支持以回调函数的方式读取文件，不支持 Promise 的调用方式。因此，需<br>
要先运行如下的命令，安装 then-fs 这个第三方包， <code>npm install then-fs</code>  从而支持我们基于 Promise 的方式读取文件的内容：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> thenFs <span class="token keyword">from</span> <span class="token string">'then-fs'</span>
<span class="token comment">// 注意：.then()中的失败回调是可选的，可以被省略</span>
thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./files/1.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r1</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r1<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token parameter">err1</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err1<span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./files/2.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r2</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r2<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token parameter">err2</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err2<span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./files/3.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r3</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r3<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token parameter">err3</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err3<span class="token punctuation">.</span>message<span class="token punctuation">)</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token comment">//注意：上述的代码无法保证文件的读取顺序，需要做进一步的改进！</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>
<p>then () 方法的特性</p>
<p>如果上一个 .then () 方法中返回了一个新的 Promise 实例对象，则可以通过下一个 .then () 继续进行处理。通过 .then () 方法的链式调用，就解决了回调地狱的问题</p>
</li>
</ul>
<h3 id="基于-promise-按顺序读取文件的内容"><a class="markdownIt-Anchor" href="#基于-promise-按顺序读取文件的内容">#</a> 基于 Promise 按顺序读取文件的内容</h3>
<p>Promise 支持链式调用，从而来解决回调地狱的问题。通过 .catch 捕获错误，在 Promise 的链式操作中如果发生了错误，可以使用 Promise.prototype.catch 方法进行捕获和处理，如果不希望前面的错误导致后续的 .then 无法正常执行，则可以将 .catch 的调用提前：示例代码如下：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> thenFs <span class="token keyword">from</span> <span class="token string">'then-fs'</span>

thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./files/11.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r1</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r1<span class="token punctuation">)</span>
    <span class="token keyword">return</span> thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./files/2.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r2</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r2<span class="token punctuation">)</span>
    <span class="token keyword">return</span> thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./files/3.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r3</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>r3<span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="promiseall-和race-方法"><a class="markdownIt-Anchor" href="#promiseall-和race-方法">#</a> Promise.all () 和.race () 方法</h3>
<p>Promise.all () 方法会发起并行的 Promise 异步操作，等所有的异步操作全部结束后才会执行下一步的 .then 操作（等待机制）。示例代码如下：</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">import</span> thenFs <span class="token keyword">from</span> <span class="token string">'then-fs'</span>

<span class="token keyword">const</span> promiseArr <span class="token operator">=</span> <span class="token punctuation">[</span>
  thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./files/3.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./files/2.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  thenFs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./files/1.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
<span class="token comment">// 所有异步操作结束之后，拿到所有的结果。</span>
Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>promiseArr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
  
<span class="token comment">// Promise.race() 方法会发起并行的 Promise 异步操作，只要任何一个异步操作完成，就立即执行下一步的.then 操作（赛跑机制）。</span>
Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span>promiseArr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="基于-promise-封装读文件的方法"><a class="markdownIt-Anchor" href="#基于-promise-封装读文件的方法">#</a> 基于 Promise 封装读文件的方法</h3>
<p>方法的封装要求：<br>
① 方法的名称要定义为 getFile<br>
② 方法接收一个形参 fpath，表示要读取的文件的路径<br>
③ 方法的返回值为 Promise 实例对象<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072343103.png" alt="在这里插入图片描述"><br>
注意：第 5 行代码中的 new Promise () 只是创建了一个形式上的异步操作。</p>
<h3 id="创建具体的异步操作"><a class="markdownIt-Anchor" href="#创建具体的异步操作">#</a> 创建具体的异步操作</h3>
<p>如果想要创建具体的异步操作，则需要在 new Promise () 构造函数期间，传递一个 function 函数，将具体的异步操作定义到 function 函数内部。示例代码如下：<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171613051.png" alt="在这里插入图片描述"></p>
<h3 id="获取then-的两个实参"><a class="markdownIt-Anchor" href="#获取then-的两个实参">#</a> 获取.then 的两个实参</h3>
<p>通过.then () 指定的成功和失败的回调函数，可以在 function 的形参中进行接收，示例代码如下：<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072343105.png" alt="在这里插入图片描述"></p>
<h3 id="调用resolve-和reject-回调函数"><a class="markdownIt-Anchor" href="#调用resolve-和reject-回调函数">#</a> 调用 resolve 和 reject 回调函数</h3>
<p>Promise 异步操作的结果，可以调用 resolve 或 reject 回调函数进行处理。示例代码如下：<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img-blog.csdnimg.cn/258352b3184f42728e91780c140a4a79.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pe25YC-LQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<hr>
<h2 id="14-asyncawait"><a class="markdownIt-Anchor" href="#14-asyncawait">#</a> 1.4 async/await</h2>
<ol>
<li>
<p>什么是 async/await</p>
<p>async/await 是 ES8（ECMAScript 2017）引入的新语法，用来简化 Promise 异步操作。在 async/await 出现之前，开发者只能通过链式.then () 的方式处理 Promise 异步操作。示例代码如下：<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171613981.png" alt="在这里插入图片描述"><br>
.then 链式调用的优点：解决了回调地狱的问题<br>
.then 链式调用的缺点：代码冗余、阅读性差、不易理解</p>
</li>
</ol>
<h3 id="asyncawait-的基本使用"><a class="markdownIt-Anchor" href="#asyncawait-的基本使用">#</a> async/await 的基本使用</h3>
<p>使用 async/await 简化 Promise 异步操作的示例代码如下：<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171613185.png" alt="在这里插入图片描述"></p>
<h3 id="asyncawait-的使用注意事项"><a class="markdownIt-Anchor" href="#asyncawait-的使用注意事项">#</a> async/await 的使用注意事项</h3>
<p>①如果在 function 中使用了 await，则 function 必须被 async 修饰<br>
②在 async 方法中，第一个 await 之前的代码会同步执行，await 之后的代码会异步执行<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614400.png" alt="在这里插入图片描述"></p>
<hr>
<h2 id="15-eventloop"><a class="markdownIt-Anchor" href="#15-eventloop">#</a> 1.5 EventLoop</h2>
<ol>
<li>
<p>JavaScript 是单线程的语言</p>
<p>JavaScript 是一门单线程执行的编程语言。也就是说，同一时间只能做一件事情。<br>
单线程执行任务队列的问题：如果前一个任务非常耗时，则后续的任务就不得不一直等待，从而导致程序假死的问题。<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614267.png" alt="在这里插入图片描述"></p>
</li>
</ol>
<h3 id="同步任务和异步任务"><a class="markdownIt-Anchor" href="#同步任务和异步任务">#</a> 同步任务和异步任务</h3>
<p>为了防止某个耗时任务导致程序假死的问题，JavaScript 把待执行的任务分为了两类：<br>
①同步任务（synchronous）<br>
又叫做非耗时任务，指的是在主线程上排队执行的那些任务<br>
只有前一个任务执行完毕，才能执行后一个任务<br>
②异步任务（asynchronous）<br>
又叫做耗时任务，异步任务由 JavaScript 委托给宿主环境进行执行<br>
当异步任务执行完成后，会通知 JavaScript 主线程执行异步任务的回调函数</p>
<ul>
<li>
<p>同步任务和异步任务的执行过程：</p>
<p>①同步任务由 JavaScript 主线程次序执行<br>
②__异步任务委托给宿主环境执行 (异步任务就是拥有着那些回调函数等任务，之前一直说的都是同步任务，其实是交给了宿主环境来执行__<br>
③已完成的异步任务对应的回调函数，会被加入到任务队列中等待执行<br>
④JavaScript 主线程的执行栈被清空后，会读取任务队列中的回调函数，次序执行<br>
⑤JavaScript 主线程不断重复上面的第 4 步<br>
 JavaScript 主线程从 “任务队列” 中读取异步任务的回调函数，放到执行栈中依次执行。这个过程是循环不断的，所以整个的这种运行机制又称为 EventLoop（事件循环）。<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614736.png" alt="在这里插入图片描述"></p>
</li>
</ul>
<h3 id="结合-eventloop-分析输出的顺序"><a class="markdownIt-Anchor" href="#结合-eventloop-分析输出的顺序">#</a> 结合 EventLoop 分析输出的顺序</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614882.png" alt="在这里插入图片描述"><br>
正确的输出结果：ADCB。其中：<br>
A 和 D 属于同步任务。会根据代码的先后顺序依次被执行<br>
 C 和 B 属于异步任务。它们的回调函数会被加入到任务队列中，等待主线程空闲时再执行</p>
<hr>
<h2 id="16-宏任务和微任务"><a class="markdownIt-Anchor" href="#16-宏任务和微任务">#</a> 1.6 宏任务和微任务</h2>
<h3 id="什么是宏任务和微任务"><a class="markdownIt-Anchor" href="#什么是宏任务和微任务">#</a> 什么是宏任务和微任务</h3>
<p>JavaScript 把异步任务又做了进一步的划分，异步任务又分为两类，分别是：<br>
① 宏任务（macrotask）<br>
异步 Ajax 请求、setTimeout、setInterval、 文件操作、 其它宏任务<br>
② 微任务（microtask） Promise.then、.catch 和 .finally、 process.nextTick、其它微任务<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614574.png" alt="在这里插入图片描述"></p>
<h3 id="宏任务和微任务的执行顺序"><a class="markdownIt-Anchor" href="#宏任务和微任务的执行顺序">#</a> 宏任务和微任务的执行顺序</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614923.png" alt="在这里插入图片描述"><br>
每一个宏任务执行完之后，都会检查是否存在待执行的微任务，如果有，则执行完所有微任务之后，再继续执行下一个宏任务。</p>
<p>去银行办业务的场景<br>
① 小云和小腾去银行办业务。首先，需要取号之后进行排队 ---- 宏任务队列<br>
② 假设当前银行网点只有一个柜员，小云在办理存款业务时，小腾只能等待 ---- 单线程，宏任务按次序执行<br>
③ 小云办完存款业务后，柜员询问他是否还想办理其它业务？ ---- 当前宏任务执行完，检查是否有微任务<br>
④ 小云告诉柜员：想要买理财产品、再办个信用卡、最后再兑换点马年纪念币？---- 执行微任务，后续宏任务被推迟<br>
⑤ 小云离开柜台后，柜员开始为小腾办理业务 ---- 所有微任务执行完毕，开始执行下一个宏任务</p>
<h3 id="分析以下代码输出的顺序"><a class="markdownIt-Anchor" href="#分析以下代码输出的顺序">#</a> 分析以下代码输出的顺序</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072343088.png" alt="在这里插入图片描述"><br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614903.png" alt="在这里插入图片描述"></p>
<hr>
<h2 id="17-api-接口案例"><a class="markdownIt-Anchor" href="#17-api-接口案例">#</a> 1.7 API 接口案例</h2>
<p>案例需求：<br>
基于 MySQL 数据库 + Express 对外提供用户列表的 API 接口服务。用到的技术点如下：<br>
第三方包 express 和 mysql2、 ES6 模块化、Promise、async/await</p>
<ul>
<li>
<p>主要的实现步骤</p>
<p>① 搭建项目的基本结构<br>
② 创建基本的服务器<br>
③ 创建 db 数据库操作模块<br>
④ 创建 user_ctrl 业务模块<br>
⑤ 创建 user_router 路由模块</p>
</li>
<li>
<p>搭建项目的基本结构</p>
<p>① 启用 ES6 模块化支持，在 package.json 中声明 “type”: “module”<br>
② 安装第三方依赖包，运行 npm install express@4.17.1 mysql2@2.2.5</p>
</li>
<li>
<p>创建基本的服务器</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614459.png" alt="在这里插入图片描述"></p>
</li>
<li>
<p>创建 db 数据库操作模块</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614656.png" alt="在这里插入图片描述"></p>
</li>
<li>
<p>创建 user_ctrl 模块</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614906.png" alt="在这里插入图片描述"></p>
</li>
<li>
<p>创建 user_router 模块</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072343637.png" alt="在这里插入图片描述"></p>
</li>
<li>
<p>导入并挂载路由模块</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614111.png" alt="在这里插入图片描述"></p>
</li>
<li>
<p>使用 try…catch 捕获异常</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614002.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>总结<br>
① 能够知道如何使用 ES6 的模块化语法 默认导出与默认导入、按需导出与按需导入</p>
<p>② 能够知道如何使用 Promise 解决回调地狱问题 promise.then ()、promise.catch ()</p>
<p>③ 能够使用 async/await 简化 Promise 的调用 方法中用到了 await，则方法需要被 async 修饰</p>
<p>④ 能够说出什么是 EventLoop EventLoop 示意图</p>
<p>⑤ 能够说出宏任务和微任务的执行顺序在执行下一个宏任务之前，先检查是否有待执行的微任务</p>
</blockquote>
</li>
</ul>
<hr>
<h1 id="2-es6中的类和对象"><a class="markdownIt-Anchor" href="#2-es6中的类和对象">#</a> 2. ES6 中的类和对象</h1>
<h2 id="21-对象"><a class="markdownIt-Anchor" href="#21-对象">#</a> 2.1 对象</h2>
<p>在 JavaScript 中，对象是一组无序的相关属性和方法的集合，所有的事物都是对象，例如字符串、数值、数组、函数等。<br>
对象是由属性和方法组成的。</p>
<p>现实生活中：万物皆对象，对象是一个具体的事物，看得见摸得着的实物。例如，一本书、一辆汽车、一个人可以是 “对象”，— 个数据库、一张网页、一个与远程服务器的连接也可以是 “对象”.</p>
<ul>
<li>属性：事物的特征，在对象中用属性来表示</li>
<li>方法：事物的行为，在对象中用方法来表示</li>
</ul>
<hr>
<h2 id="22-类"><a class="markdownIt-Anchor" href="#22-类">#</a> 2.2 类</h2>
<p>在 ES6 中新增加了类的概念，可以使用 class 关键字声明一个类，之后以这个类来实例化对象。</p>
<ul>
<li>类抽象了对象的公共部分，它泛指某一大类（class）</li>
<li>对象特指某一个，通过类实例化一个具体的对象</li>
</ul>
<h3 id="创建类"><a class="markdownIt-Anchor" href="#创建类">#</a> 创建类</h3>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">name</span> <span class="token punctuation">&#123;</span>
    
    <span class="token comment">// class body</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>创建实例：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token constant">XX</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 注意：类必须使用new 实例化对象</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<hr>
<h3 id="constructor-构造函"><a class="markdownIt-Anchor" href="#constructor-构造函">#</a> constructor () 构造函</h3>
<p>constructor () 方法是类的构造函数 (默认方法)，用于传递参数，返回实例对象，通过 new 命令生成对象实例时，自动调用该方法。<strong>如果没有显示定义，类内部会自动给我们创建一个 constructor (), 这点跟 java 一样</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
    <span class="token comment">// 1. 创建类 class  创建一个 明星类</span>
    <span class="token keyword">class</span> <span class="token class-name">Star</span> <span class="token punctuation">&#123;</span>
    
        <span class="token comment">// constructor 构造器或者构造函数</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">// 2. 利用类创建对象 new</span>
    <span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> zxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'张学友'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>zxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>通过 class 关键字创建类，类名我们还是习惯性定义首字母大写</li>
<li>类里面有个 constructor 函数，可以接收传递过来的参数，同时返回实例对象</li>
<li>constructor 函数只要 new 生成实例时，就会自动调用这个函数，如果我们不写这个函数，类也会自动生成这个函数</li>
<li>最后注意语法规范
<ul>
<li>创建类类名后面不要加小括号</li>
<li>生成实例类名后面加小括号</li>
<li>构造函数不需要加 function 关键字</li>
</ul>
</li>
</ul>
<hr>
<h3 id="类中添加方法"><a class="markdownIt-Anchor" href="#类中添加方法">#</a> 类中添加方法</h3>
<p>语法：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span>
    
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
       
      <span class="token comment">// constructor 称为构造器或者构造函数</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
   <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'你好'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>      
<span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
ldh<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意： 方法之间不能加逗号分隔，同时方法不需要添加 function 关键字。</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
    <span class="token comment">// 1. 创建类 class  创建一个 明星类</span>
    <span class="token keyword">class</span> <span class="token class-name">Star</span> <span class="token punctuation">&#123;</span>
    
        <span class="token comment">// 类的共有属性放到 constructor 里面</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token function">sing</span><span class="token punctuation">(</span><span class="token parameter">song</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">+</span> song<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">// 2. 利用类创建对象 new</span>
    <span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> zxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'张学友'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>zxy<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// (1) 我们类里面所有的函数不需要写function </span>
    <span class="token comment">// (2) 多个函数方法之间不需要添加逗号分隔</span>
    ldh<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token string">'冰雨'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    zxy<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token string">'李香兰'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>类的共有属性放到 constructor 里面</li>
<li>类里面的函数都不需要写 function 关键字</li>
</ul>
<hr>
<h3 id="类的继承"><a class="markdownIt-Anchor" href="#类的继承">#</a> 类的继承</h3>
<ul>
<li>
<p>现实中的继承：子承父业，比如我们都继承了父亲的姓。</p>
</li>
<li>
<p>程序中的继承：子类可以继承父类的一些属性和方法。</p>
<p>语法：</p>
</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 父类</span>
<span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token punctuation">&#123;</span>
    
    
<span class="token punctuation">&#125;</span>
<span class="token comment">// 子类继承父类</span>
<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span> <span class="token punctuation">&#123;</span>
    
    
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>实例：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
    <span class="token comment">// 父类有加法方法</span>
    <span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token punctuation">&#123;</span>
    
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">// 子类继承父类加法方法 同时 扩展减法方法</span>
    <span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span> <span class="token punctuation">&#123;</span>
    
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// 利用super 调用父类的构造函数</span>
            <span class="token comment">// super 必须在子类this之前调用</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token function">subtract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">var</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    son<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    son<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h3 id="super关键字"><a class="markdownIt-Anchor" href="#super关键字">#</a> super 关键字</h3>
<ul>
<li>
<p>super 关键字用于访问和调用对象父类上的函数，可以调用父类的构造函数，也可以调用父类的普通函数</p>
<p><strong>1. 调用父类的构造函数</strong></p>
</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 父类</span>
<span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">&#123;</span>
    
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">surname</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    
        <span class="token keyword">this</span><span class="token punctuation">.</span>surname <span class="token operator">=</span> surname<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// 子类继承父类</span>
<span class="token keyword">class</span> <span class="token class-name">Student</span> entends Person <span class="token punctuation">&#123;</span>
    
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">surname<span class="token punctuation">,</span>firstname</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        <span class="token keyword">super</span><span class="token punctuation">(</span>surname<span class="token punctuation">)</span><span class="token punctuation">;</span>					<span class="token comment">//调用父类的 constructor(surname)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>firstname <span class="token operator">=</span> firstname<span class="token punctuation">;</span>		<span class="token comment">//定义子类独有的属性</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意：子类在构造函数中使用 super, 必须放到 this 前面（必须先调用父类的构造方法，在使用子类构造方法）<br>
案例：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 父类加法操作</span>
<span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token punctuation">&#123;</span>
    
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y
  <span class="token punctuation">&#125;</span>
  <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// 子类继承父类加法方法的同时扩展减法操作</span>
<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span> <span class="token punctuation">&#123;</span>
    
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
    <span class="token comment">// 调用父类的构造函数 super必须在子类this之前调用(父亲必须放在之前)</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x
    <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y
  <span class="token punctuation">&#125;</span>
  <span class="token function">subtract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">let</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
son<span class="token punctuation">.</span><span class="token function">subtract</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>
son<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>2. 调用父类的普通函数</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token punctuation">&#123;</span>
    
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        <span class="token keyword">return</span> <span class="token string">'我是爸爸'</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span> <span class="token punctuation">&#123;</span>
    
    <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    
        <span class="token comment">// super.say() super调用父类的方法</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'的儿子'</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">var</span> damao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>damao<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>多个方法之间不需要添加逗号分隔</li>
<li>继承中属性和方法的查找原则：就近原则，先看子类，再看父类</li>
</ul>
<hr>
<h3 id="三个注意点"><a class="markdownIt-Anchor" href="#三个注意点">#</a> 三个注意点</h3>
<ol>
<li><strong><mark>在 ES6 中类没有变量提升 (声明会默认被放到代码一开始 (复习基础内容))，所以必须先定义类，才能通过类实例化对象</mark></strong></li>
<li><strong>类里面的共有属性和方法一定要加 this 使用</strong></li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201151618424.png" alt="image-20220115161853315"></p>
<ol start="3">
<li>类里面的 this 指向：</li>
</ol>
<ul>
<li><strong>constructor 里面的 this 指向实例对象</strong></li>
<li><strong>方法里面的 this 指向这个方法的调用者</strong></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>button<span class="token operator">></span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">var</span> that<span class="token punctuation">;</span>
        <span class="token keyword">var</span> _that<span class="token punctuation">;</span>
        <span class="token keyword">class</span> <span class="token class-name">Star</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                <span class="token comment">// constructor 里面的this 指向的是 创建的实例对象</span>
                that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
                <span class="token comment">// this.sing();</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>btn<span class="token punctuation">.</span>onclick <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sing<span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            
            <span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">// 这个sing方法里面的this 指向的是 btn 这个按钮,因为这个按钮调用了这个函数</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>uname<span class="token punctuation">)</span><span class="token punctuation">;</span> 
                <span class="token comment">// that里面存储的是constructor里面的this</span>
            <span class="token punctuation">&#125;</span>
            <span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                <span class="token comment">// 这个dance里面的this 指向的是实例对象 ldh 因为ldh 调用了这个函数</span>
                _that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>that <span class="token operator">===</span> ldh<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ldh<span class="token punctuation">.</span><span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>_that <span class="token operator">===</span> ldh<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 1. 在 ES6 中类没有变量提升，所以必须先定义类，才能通过类实例化对象</span>

        <span class="token comment">// 2. 类里面的共有的属性和方法一定要加this使用.</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意 sing 方法里面的 this 指向的是 btn 因为是把 sing 这个 function 赋值给 btn 的 click 事件了.</p>
<p>所以这个 sing 方法只有在 btn 的 click 事件触发了才会执行.</p>
<p>去执行他的是 btn, 而不是创造的对象.</p>
<p>如果想在 sing 这个方法里面对于当前对象进行操作，可以在构造函数里把 this 赋值给全局变量然后现在全局变量存的就是创建出来的这个对象，然后就可以在 sing 方法里面用这个全局变量. (不过我感觉这么做没什么用)</p>
</blockquote>
<blockquote>
<p>在函数或者方法里面，谁调用了那个函数或者方法，this 就指向谁.</p>
<blockquote>
<p>而在构造函数里，this 永远指向的都是创建的对象</p>
</blockquote>
</blockquote>
<hr>
<h1 id="3-构造函数和原型"><a class="markdownIt-Anchor" href="#3-构造函数和原型">#</a> 3. 构造函数和原型</h1>
<h2 id="31-概念"><a class="markdownIt-Anchor" href="#31-概念">#</a> 3.1 概念</h2>
<ul>
<li>在典型的 OOP 的语言中（如 Java），都存在类的概念，类就是对象的模板，对象就是类的实例，但在 ES6 之前， JS 中并没用引入类的概念。ES6， 全称 ECMAScript 6.0 ，2015.06 发版。但是目前浏览器的 JavaScript 是 ES5 版本，大多数高版本的浏览器也支持 ES6，不过只实现了 ES6 的部分特性和功能。</li>
<li><strong>在 ES6 之前 ，对象不是基于类创建的，而是用一种称为构建函数的特殊函数来定义对象和它们的特征。</strong></li>
<li>创建对象有三种方式：对象字面量、new Object ()、自定义构造函数</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 1. 利用 new Object() 创建对象</span>
<span class="token keyword">var</span> obj1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 2. 利用对象字面量创建对象</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token operator">...</span>
    <span class="token punctuation">&#125;</span>；

<span class="token comment">// 3.利用构造函数创建对象</span>
<span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
    <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会唱歌'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意：</p>
<ul>
<li><strong>构造函数用于创建某一类对象，其首字母要大写</strong></li>
<li><strong>构造函数要和 new 一起使用才有意义</strong></li>
</ul>
<hr>
<h2 id="32-构造函数"><a class="markdownIt-Anchor" href="#32-构造函数">#</a> 3.2 构造函数</h2>
<ul>
<li>构造函数是一种特殊的函数，主要用来初始化对象 (为对象成员变量赋初始值)，它总与 new 一起使用</li>
<li>我们可以把对象中的一些公共的属性和方法抽取出来，然后封装到这个函数里面</li>
</ul>
<blockquote>
<p>new 在执行时会做四件事</p>
<ol>
<li>在内存中创建一个新的空对象。</li>
<li>让 this 指向这个新的对象。</li>
<li>执行构造函数里面的代码，给这个新对象添加属性和方法。</li>
<li>返回这个新对象（所以构造函数里面不需要 return ）。</li>
</ol>
</blockquote>
<blockquote>
<p>⭐️⭐️⭐️⭐️⭐️仔细看！！⭐️⭐️<span class="spoiler" title="..."><span class="spoiler" title="..."><span class="spoiler" title="...">⭐️</span></span></span><span class="spoiler" title="...">⭐️</span>!⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️</p>
<p><strong><mark>这个构造函数跟我们之前 OOP 创建类然后里面有一个 constructor () 不一样，这个是直接就一个构造函数.</mark></strong></p>
<p>OOP 那种想 java 一样的方式是 es6 才有的，之前都是上面说的三种方法而来创建对象.</p>
<p><strong>(注意，目的都是为了创建对象)</strong></p>
<p>构造函数也是一个函数 (前面加了个 function), 只是他是一个特殊的函数 -&gt;<strong> 他的名字必须第一个字母大写，还有必须配合 new 使用</strong></p>
</blockquote>
<hr>
<h3 id="静态成员和实例成员"><a class="markdownIt-Anchor" href="#静态成员和实例成员">#</a> 静态成员和实例成员</h3>
<p>JavaScript 的构造函数中可以添加一些成员，可以在构造函数本身上添加，也可以在构造函数内部的 this 上添加。通过这两种方式添加的成员，就分别称为静态成员和实例成员。</p>
<ul>
<li>静态成员 (static field): 在__构造函数本身上添加的成员__为静态成员，<strong>只能由构造函数本身来访问，不能通过实例化的对象访问，这个跟 java 不一样</strong></li>
<li>实例成员 (instance field): 在__构造函数内部创建的对象成员__称为实例成员，<strong>只能由实例化的对象来访问</strong></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 构造函数中的属性和方法我们称为成员，成员可以添加</span>
<span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
    <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会唱歌'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 实例成员就是构造函数内部通过this添加的成员  uname age sing  就是实例成员</span>
<span class="token comment">// 实例成员只能通过实例化的对象来访问</span>
ldh<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Star<span class="token punctuation">.</span>uname<span class="token punctuation">;</span> <span class="token comment">// undefined     不可以通过构造函数来访问实例成员</span>

<span class="token comment">// 静态成员就是在构造函数本身上添加的成员 sex 就是静态成员</span>
<span class="token comment">// 静态成员只能通过构造函数来访问</span>
Star<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'男'</span><span class="token punctuation">;</span>
Star<span class="token punctuation">.</span>sex<span class="token punctuation">;</span>
ldh<span class="token punctuation">.</span>sex<span class="token punctuation">;</span> <span class="token comment">// undefined  不能通过对象来访问</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h3 id="构造函数的问题"><a class="markdownIt-Anchor" href="#构造函数的问题">#</a> 构造函数的问题</h3>
<p>构造函数方法很好用，但是存在浪费内存的问题。<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072343491.png" alt="在这里插入图片描述"></p>
<ul>
<li>
<p>这里 created 2 instances of class Star, each of the instance has a property storing a function object. If there are 2 instances of the class Star created, there are 2 function objects created, 1 for each instance’s “sing” property. This is wasting memory / 内存 becuase the function they are storing are the same function object.</p>
</li>
<li>
<p>我们希望所有的对象使用同一个函数，这样就比较节省内存</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614886.png" alt="image-20220115185308676"></p>
<p>because they are comparing the address of the objects.</p>
<hr>
<h3 id="构造函数原型-prototype"><a class="markdownIt-Anchor" href="#构造函数原型-prototype">#</a> 构造函数原型 prototype</h3>
<ul>
<li><strong>构造函数通过原型分配的</strong><mark>函数</mark>是__所有对象所共享的__, 这样就解决了内存浪费问题</li>
<li>JavaScript 规定，每一个__构造函数__都有一个__prototype 属性__，指向__另一个对象__，注意这个__prototype 就是一个对象__，<strong>这个对象的所有属性和方法，都会被构造函数所拥有</strong></li>
</ul>
<blockquote>
<p>构造函数本身也是个对象，而这个对象有个属性就是 prototype, 这个 prototype 也是个对象，这个对象有的属性和方法都可以被这个构造函数所拥有</p>
</blockquote>
<ul>
<li><mark><strong>我们可以把那些不变的方法，直接定义在 prototype 对象上，这样所有对象的实例就可以共享这些方法</strong></mark></li>
</ul>
<blockquote>
<p>so instead of adding the method object to a property in the constructor object, we add it to the constructor object’s property (-&gt;) prototype object’s property.</p>
<p>And this prototype object will store this method object we added as its property and can be accessed by all instances(objects) created of the type of the constructor.</p>
<p>They are sharing the same method object, it is the same method object, not different method objects stored in different addresses.</p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 1. 构造函数的问题. </span>
        <span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
    		<span class="token comment">//公共属性定义到构造函数里面</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
            <span class="token comment">// this.sing = function() &#123;</span>
    
            <span class="token comment">//     console.log('我会唱歌');</span>
            <span class="token comment">// &#125;</span>
        <span class="token punctuation">&#125;</span>
		<span class="token comment">//公共的方法我们放到原型对象身上</span>
        <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会唱歌'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> zxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'张学友'</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">.</span>sing <span class="token operator">=</span> <span class="token operator">=</span> <span class="token operator">=</span> zxy<span class="token punctuation">.</span>sing<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//结果为true</span>
        ldh<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用时不用中间加.prototype</span>
        zxy<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2. 一般情况下,我们的公共属性定义到构造函数里面, 公共的方法我们放到原型对象身上</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong>一般情况下，我们的公共属性 (就是所有 instances of same type 他们这个属性都一样，可以理解是静态变量) 定义到构造函数里面，公共的方法我们放到原型对象身上</strong></p>
<ul>
<li>问答：原型是什么？ 一个对象，我们也称为 prototype 为原型对象</li>
<li>问答：原型的作用是什么？ 共享方法 (只是共享构造函数里面的方法 (函数) 对象)</li>
</ul>
<hr>
<h3 id="对象原型-proto"><a class="markdownIt-Anchor" href="#对象原型-proto">#</a> 对象原型 <strong>proto</strong></h3>
<ol>
<li>
<p>__所有对象 (就是我们最后构造出来的对象)__都会有一个属性 <em><strong>_proto_</strong></em> <strong>指向构造函数的 prototype 原型对象</strong>，之所以我们对象可以使用构造函数 prototype 原型对象的属性和方法，就是因为对象有_proto_原型的存在。</p>
</li>
<li>
<p>_proto_对象原型和原型对象 prototype 是等价的</p>
</li>
<li>
<p>_proto_对象原型的意义就在于为对象的查找机制提供一个方向，或者说一条路线，但是它是一个非标准属性，因此实际开发中，不可以使用这个属性，它只是内部指向原型对象 prototype</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072358980.png" alt="在这里插入图片描述"></p>
</li>
</ol>
<ul>
<li><strong>Star.prototype 和 ldh.<em>proto</em> 指向相同</strong></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会唱歌'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> zxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'张学友'</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ldh<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">)</span><span class="token punctuation">;</span> 
		<span class="token comment">// 对象身上系统自己添加一个 __proto__ 指向我们构造函数的原型对象 prototype</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//返回true</span>
        <span class="token comment">// 方法的查找规则: 首先先看ldh 对象身上是否有 sing 方法,如果有就执行这个对象上的sing</span>
        <span class="token comment">// 如果没有sing 这个方法,因为有 __proto__ 的存在,就去构造函数原型对象prototype身上去查找sing这个方法</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>也就时构造函数本身会有一个 prototype 属性存的 prototype 对象，然后 prototype 对象的属性存有共享的方法对象.</p>
<p>然后当你用 new 构造出一个对象这个 instance 不是你定的构造函数的 type 的 (应该是这样，我是这么理解的，可能会是错的), 而是本身自己就是一个对象.</p>
<p>系统会默认自动给这个构建出来的对象设置一个_proto_属性这个属性存的就是构造函数的 prototype 属性存的 prototype 对象.</p>
<p>所以，构造出来的对象可以直接使用.</p>
<blockquote>
<pre><code>   方法的查找规则: 

   - 首先先看ldh 对象身上是否有 sing 方法,如果有就执行这个对象上的sing
   - 如果没有sing 这个方法,因为有 \_\_proto\_\_ 的存在,就去构造函数原型对象prototype身上去查找sing这个方法
</code></pre>
</blockquote>
</blockquote>
<hr>
<h3 id="constructor-构造函数"><a class="markdownIt-Anchor" href="#constructor-构造函数">#</a> constructor 构造函数</h3>
<ul>
<li>对象原型 (__ proto __) 和构造函数 (prototype) 原型对象 里面都有一个属性 constructor 属性，constructor 我们称为构造函数，因为它指回构造函数本身。</li>
<li>constructor 主要用于记录该对象引用于哪个构造函数，它可以让原型对象重新指向原来的构造函数</li>
<li>一般情况下，对象的方法都在构造函数 (prototype) 的原型对象中设置</li>
<li>如果有多个对象的方法，我们可以给原型对象 prototype 采取对象形式赋值，但是这样会覆盖构造函数原型对象原来的内容，这样修改后的原型对象 constructor 就不再指向当前构造函数了。此时，我们可以在修改后的原型对象中，添加一个 constructor 指向原来的构造函数</li>
</ul>
<p>具体请看实例配合理解</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">// 很多情况下,我们需要手动的利用constructor 这个属性指回 原来的构造函数</span>
        <span class="token comment">// Star.prototype.sing = function() &#123;</span>
    
        <span class="token comment">//     console.log('我会唱歌');</span>
        <span class="token comment">// &#125;;</span>
        <span class="token comment">// Star.prototype.movie = function() &#123;</span>
    
        <span class="token comment">//     console.log('我会演电影');</span>
        <span class="token comment">// &#125;</span>
        <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// 如果我们修改了原来的原型对象,给原型对象赋值的是一个对象,则必须手动的利用constructor指回原来的构造函数</span>
            constructor<span class="token operator">:</span> Star<span class="token punctuation">,</span>
            <span class="token function-variable function">sing</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会唱歌'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
            <span class="token function-variable function">movie</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会演电影'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> zxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'张学友'</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>这么做就可以更方便的直接设置那个构造函数的属性存的原型 (prototype) 对象，然后直接设置和这个原型对象的属性，也就是想给我们那个构造函数构造的对象的公用方法，而不是像之前一样一个一个设 (加).</p>
<p>但是注意了，如果要是直接赋值给原型对象 (给这个原型对象构造对象然后给值), 会覆盖掉之前系统自动给我们配的，之前自动给我们配的会带有 constructor 属性，这里面存的就是我们构造函数对象的地址，也就是指回了那个构造函数.</p>
<p>所以在我们直接赋值的时候，记得也要填写 constructor 属性，然后这个属性的值也就是构造函数的名字.</p>
</blockquote>
<blockquote>
<p>这样就能知道对象是通过哪个构造函数创建出来的</p>
</blockquote>
<hr>
<h3 id="构造函数-实例-原型对象三者关系"><a class="markdownIt-Anchor" href="#构造函数-实例-原型对象三者关系">#</a> 构造函数、实例、原型对象三者关系</h3>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img-blog.csdnimg.cn/00efcf255760452aa224110ecbfd0cb5.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pe25YC-LQ==,size_20,color_FFFFFF,t_70,g_se,x_16" alt="在这里插入图片描述"></p>
<hr>
<h2 id="33-原型链"><a class="markdownIt-Anchor" href="#33-原型链">#</a> 3.3 原型链</h2>
<h3 id="查找规则"><a class="markdownIt-Anchor" href="#查找规则">#</a> 查找规则</h3>
<ol>
<li>
<p>当访问一个对象的__<mark>属性 (包括方法) 时</mark>__，首先查找这个对象自身有没有该属性</p>
</li>
<li>
<p><strong>如果没有，就查找它的原型 (也就是_proto_指向的 prototype 原型对象)<mark> 都会这样，所有对象都是！！！</mark></strong></p>
</li>
<li>
<p><strong>如果还没有就查找原型对象的原型 (Object 的原型对象),(有点 java 的意思)</strong></p>
</li>
<li>
<p><strong>依次类推一直找到 Object 为止 (null)</strong></p>
</li>
<li>
<p>__ proto __对象原型的意义就在于为对象成员查找机制提供一个方向，或者说一条路线。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072343125.png" alt="在这里插入图片描述"></p>
</li>
</ol>
<blockquote>
<p><mark>注意：每个对象，每个对象 (任何对象！！！) 都会有一个____proto____属性，这是系统自动给你添加上的</mark>这个属性就是指向你这个当前对象的构造函数对象的 prototype 属性存的原型对象.</p>
<p>记住所有的对象都会有__proto__属性，包括比如说这个 prototype 属性存的原型对象，这个原型对象也有__proto__属性，这个原型对象的__proto__属性指向了 Object 原型对象，也就是 Object 构造函数对象的 prototype 属性存 (指向) 的原型对象.</p>
<p>然后这个 Object 原型对象也有__proto__属性，只不过指向的是 null.</p>
<p>⭐️所以在看访问一个对象的属性 (方法或者成员等), 会先看当前对象有没有这个属性，如果有就用，如果没有就去__proto__属性指向的原型对象去找这个属性，如果还是没有就会去这个原型对象的__proto__属性指向的原型对象也就是 Object 的原型对象 (一般都是), 去找这个属性，如果还是没有就会去找 Object 的原型对象的__proto__属性也就是 null, 到 null 就会停止.</p>
</blockquote>
<blockquote>
<p>也就是找对象，没有就找对象的构造函数的原型对象，再没有就找 Object 的原型对象，再没有就是 null, 返回 undefined 了.</p>
<p>(这样看来所有对象都会有 Object 的属性 (方法和成员等), 这么看来有几分相似 java)</p>
<p>别忘了一个对象当然会有在构造函数对象里面的设的属性等因为构造函数本身作用就是为了构造这个对象，作用就是给这个对象属性以及属性的值 (别误把构造函数当做有自己属性 (方法或成员) 而构造出来的对象不能 access,<mark> 是可以有的，因为构造函数对象的作用就是构造我们这个对象</mark>)</p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会唱歌'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1. 只要是对象就有__proto__ 原型, 指向原型对象</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2.我们Star原型对象里面的__proto__原型指向的是 Object.prototype</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3. 我们Object.prototype原型对象里面的__proto__原型  指向为 null</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h3 id="原型对象this指向"><a class="markdownIt-Anchor" href="#原型对象this指向">#</a> 原型对象 this 指向</h3>
<ul>
<li><strong>构造函数中的 this 像之前 es6 的做法 constructor 构造函数一样，一直都是指向我们的实例对象</strong></li>
<li><strong>原型对象里面放的是方法，这个方法里面的 this 指向的是这个方法的调用者，<mark>也就是这个实例对象</mark></strong></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">var</span> that<span class="token punctuation">;</span>
        <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我会唱歌'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1. 在构造函数中,里面this指向的是对象实例 ldh</span>
        ldh<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>that <span class="token operator">===</span> ldh<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2.原型对象函数里面的this 指向的是 实例对象 ldh</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h3 id="扩展内置对象"><a class="markdownIt-Anchor" href="#扩展内置对象">#</a> 扩展内置对象</h3>
<ul>
<li>可以通过原型对象，对原来的内置对象进行扩展自定义的方法</li>
<li>比如给数组增加自定义求偶数和的功能</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 原型对象的应用 扩展内置对象方法</span>

        <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                sum <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
            <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token comment">// Array.prototype = &#123;</span>
    
        <span class="token comment">//     sum: function() &#123;</span>
    
        <span class="token comment">//         var sum = 0;</span>
        <span class="token comment">//         for (var i = 0; i &lt; this.length; i++) &#123;</span>
    
        <span class="token comment">//             sum += this[i];</span>
        <span class="token comment">//         &#125;</span>
        <span class="token comment">//         return sum;</span>
        <span class="token comment">//     &#125;</span>

        <span class="token comment">// &#125;</span>
        <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意：</p>
<ul>
<li>数组和字符串内置对象__不能给原型对象覆盖操作__ <code>Array.prototype = &#123;&#125;</code> ，<strong>只能是</strong> <code>Array.prototype.xxx = function()&#123;&#125;</code>  的方式</li>
</ul>
</blockquote>
<hr>
<h2 id="34-继承"><a class="markdownIt-Anchor" href="#34-继承">#</a> 3.4 继承</h2>
<p>ES6 之前并没有给我们提供 extends 继承</p>
<ul>
<li>我们可以通过__构造函数 + 原型对象__模拟实现继承，被称为组合继承</li>
</ul>
<h3 id="call"><a class="markdownIt-Anchor" href="#call">#</a>  <code>call()</code></h3>
<p>调用这个函数，<strong>并且修改 函数 运行时的 this 指向</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token function">fun</span><span class="token punctuation">(</span>函数<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span>arg1<span class="token punctuation">,</span>arg2<span class="token punctuation">,</span><span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>thisArg：当前调用函数 this 的指向对象，也就是现在你这个函数里面的 this 的指向的对象</li>
<li>arg1,arg2： 传递的其他参数</li>
</ul>
<p>示例：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// call 方法</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我希望我的希望有希望'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// Object&#123;...&#125;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x <span class="token operator">+</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 3</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    
            name<span class="token operator">:</span> <span class="token string">'andy'</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token comment">// fn();</span>
        <span class="token comment">// 1. call() 可以调用函数</span>
        <span class="token comment">// fn.call();</span>
        <span class="token comment">// 2. call() 可以改变这个函数的this指向 此时这个函数的this 就指向了o这个对象</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 后面普通参数照样传</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>call 函数 / 方法是每一个函数或者方法对象的属性，它本身也是个函数 / 方法.</p>
<p>上面如果直接 <code>fn();</code>  是用 window 调用的 ( <code>window.fn();</code> ), 只不过 window 省略掉了，fn 这个函数里面的 this 指向函数调用者也就是 window 对象.</p>
<p>但是我们用 fn 的 call 方法然后传进我们这个 o 对象，现在这个 this 指向的就是 o 这个对象了.</p>
</blockquote>
<hr>
<h3 id="借用构造函数继承父类型属性"><a class="markdownIt-Anchor" href="#借用构造函数继承父类型属性">#</a> 借用构造函数继承父类型属性</h3>
<ul>
<li>核心原理: <strong>通过 call () 把父类型的 this 指向子类型的 this，这样就可以实现子类型继承父类型的属性</strong></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 借用父构造函数继承属性</span>
        <span class="token comment">// 1. 父构造函数</span>
        <span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// this 指向父构造函数的对象实例</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">// 2 .子构造函数 </span>
        <span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age<span class="token punctuation">,</span> score</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// this 指向子构造函数的对象实例</span>
            <span class="token function">Father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> uname<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>score <span class="token operator">=</span> score<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">var</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>这样创建一个子对象传进对应的值，这个值，along with 实例对象本身 this (构造函数里面的 this 指的就是实例对象) 就会在自构造函数里面传给 <code>Father.call(this, uname, age);</code>  这个实例化对象就会成为父构造函数里面的 this 的指向。然后其他参数通过等号赋给了这个实例化对象的新设的属性上，也就是从父继承下来的属性.</p>
</blockquote>
<blockquote>
<p>这样就只是继承了成员，还没继承方法，看以下方式继承方法.</p>
</blockquote>
<hr>
<h3 id="借用原型对象继承父类型方法"><a class="markdownIt-Anchor" href="#借用原型对象继承父类型方法">#</a> 借用原型对象继承父类型方法</h3>
<ul>
<li>
<p>一般情况下，对象的方法都在构造函数的原型对象中设置，通过构造函数无法继承父类方法</p>
</li>
<li>
<p>核心原理：</p>
<ol>
<li>将子类所共享的方法提取出来，让子类的 prototype 原型对象 = new 父类 ()</li>
<li>本质：子类原型对象等于是实例化父类，因为父类实例化之后另外开辟空间，就不会影响原来父 类原型对象</li>
<li>将子类的 constructor 重新指向子类的构造函数</li>
</ol>
</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
    <span class="token comment">// 借用父构造函数继承属性</span>
    <span class="token comment">// 1. 父构造函数</span>
    <span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

        <span class="token comment">// this 指向父构造函数的对象实例</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">money</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">    <span class="token comment">// 2 .子构造函数 </span>
    <span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age<span class="token punctuation">,</span> score</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

        <span class="token comment">// this 指向子构造函数的对象实例</span>
        <span class="token function">Father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> uname<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>score <span class="token operator">=</span> score<span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">// Son.prototype = Father.prototype;  这样直接赋值会有问题,如果修改了子原型对象,父原型对象也会跟着一起变化</span>
    <span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 如果利用对象的形式修改了原型对象,别忘了利用constructor 指回原来的构造函数</span>
    <span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Son<span class="token punctuation">;</span>
    <span class="token comment">// 这个是子构造函数专门的方法</span>
    <span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">exam</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'孩子要考试'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">&#125;</span>
    <span class="token keyword">var</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>这里不能用__proto__方式因为还没有实例化的对象。只能是 prototype.</p>
<p>要是用 <code>Son.prototype = Father.prototype;</code> , 直接把 Son 的 prototype 设为 Father 的 prototype, 确实可以继承然后用里面父类的一些方法，也就是直接获得了 Father 的 prototype 存的原型对象地址，要是 Son 有自己__特有的__方法然后想放进 portotype 里面，就会往这个 prototype 里面存的原型对象里面加，这么做会修改父亲属性 prototype 指向的原型对象因为都是指向的是同一个对象。所以这个 Father 也会有这个方法，而不是 Son 独有的</p>
</blockquote>
<blockquote>
<pre><code>   要是用`Son.prototype = new Father();`,这里用new实例化了一个Father实例对象,然后让Son的prototype指向这个新建出来的实例对象. 因为Father实例化对象可以用Father原型对象里面的方法, Son的prototype属性指向这个实例化的对象就也可以让之后Son实例化出来的对象也使用Father原型对象里面的方法.

   也就是在实例化对象本身里面找这个方法,找不到去\_\_proto\_\_属性里面存的那个对象找,也就是这个实例化的Father对象,这个实例化的Father对象也没有,那就去他的\_\_proto\_\_属性里面存的那个对象找,也就是Father的原型对象,这样就可以找到Father设的共享方法,达到继承效果. 这么做要是给Son原型对象添加Son特有的共享方法,也只会让Son原型对象,也就是往那个我们之前实例化出来的Father对象上加. 之后要是再实例化出来个新的其他的Father实例对象也是无法使用这个方法,因为这个方法给__之前实例化出来的Father对象__上加了.

   &gt; ==注意!这种方式会用new新构建出来一个Father对象然后赋值给Son.prototype,这样会__覆盖Son原本的原型对象,所以需要在这个新的Son.prototype指向的Father实例化对象上重新给constructor属性赋值指回这个Son,就像我们之前说的.这样这个Father实例对象才真正成为了Son的(新)原型对象(只是一种叫法).要是不重新给constructor属性赋值,这个Father对象本身找不到这个属性会去他的\_\_proto\_\_属性里面存的那个对象找,也就是去Father原型对象,然后找到的会是指回Father构造函数,所以需要给Son.prototype指向的Father实例化对象上重新给constructor属性赋值指回这个Son,这样就会就近原则先找近的.__==

   &gt; 这里理解到了让一个构造函数的prototype属性指向哪,通过那个构造函数创建的实例化对象的\_\_proto\_\_属性就会指向哪

   &gt; 都是对象,没什么区别,想让一个实例化出来的对象成为一个构造函数的原型对象也行,都行.
</code></pre>
</blockquote>
<hr>
<h3 id="类的本质"><a class="markdownIt-Anchor" href="#类的本质">#</a> 类的本质</h3>
<ol>
<li>class 本质还是 function,<strong><mark> 可以认为类就是构造函数的另外一种写法</mark></strong></li>
<li><strong>类的所有方法都定义在类的 prototype 属性上</strong></li>
</ol>
<blockquote>
<p>也就是说像我们之前 ES6 方法用类的方式就那样，会默认把我们类里面写的放到这个类的 prototype 属性存的那个类的原型对象上.</p>
</blockquote>
<ol start="3">
<li>
<p>类创建的实例，里面也有_proto_指向类的 prototype 原型对象<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614012.png" alt="image-20220116105257557"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614518.png" alt="image-20220116105207236"></p>
<p>上面这种写法只是为了证明类就是另一种构造函数写法，不要这么用，直接向我们之前 ES6 (像 java) 那样操作就行。很多都是系统默认给我们设置.</p>
</li>
<li>
<p>所以 ES6 的类它的绝大部分功能，ES5 都可以做到，<strong>新的 class 写法只是让对象原型的写法更加清晰、更像面向对象编程的语法而已</strong>。</p>
</li>
<li>
<p>所以 ES6 的类其实就是语法糖</p>
</li>
<li>
<p><strong>语法糖：语法糖就是一种便捷写法，简单理解.<mark> 所以就像我们之前 ES6 的那种用类像 java 的写法就最好的！</mark></strong></p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614361.png" alt="image-20220116105556754"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614368.png" alt="image-20220116105601691"></p>
<hr>
<h1 id="4-es5新增方法"><a class="markdownIt-Anchor" href="#4-es5新增方法">#</a> 4. ES5 新增方法</h1>
<p>ES5 给我们新增了一些方法，可以很方便的操作数组或者字符串：</p>
<ul>
<li>数组方法</li>
<li>字符串方法</li>
<li>对象方法</li>
</ul>
<h2 id="41-数组方法"><a class="markdownIt-Anchor" href="#41-数组方法">#</a> 4.1 数组方法</h2>
<p>迭代 (遍历) 方法：foreach () ，map ()，filter ()，some () ，every () ;</p>
<h3 id="foreach"><a class="markdownIt-Anchor" href="#foreach">#</a> forEach()</h3>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">array<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">currentValue<span class="token punctuation">,</span>index<span class="token punctuation">,</span>arr</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>currentValue : 数组当前项的值</li>
<li>index: 数组当前项的索引</li>
<li>arr: 数组对象本身</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// forEach 迭代(遍历) 数组</span>
        <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'每个数组元素'</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'每个数组元素的索引号'</span> <span class="token operator">+</span> index<span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'数组本身'</span> <span class="token operator">+</span> array<span class="token punctuation">)</span><span class="token punctuation">;</span>
            sum <span class="token operator">+=</span> value<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="filter筛选数组"><a class="markdownIt-Anchor" href="#filter筛选数组">#</a> filter () 筛选数组</h3>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">array<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">currentValue<span class="token punctuation">,</span>index<span class="token punctuation">,</span>arr</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>filter () 方法创建一个新的数组，新数组中的元素是通过检查指定数组中符合条件的所有元素，主要用于筛选数组</li>
<li><strong><mark>注意它直接返回一个新数组</mark></strong></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// filter 筛选数组</span>
        <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">88</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// return value >= 20;</span>
            <span class="token keyword">return</span> value <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">=</span> <span class="token operator">=</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newArr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>直接 return 想要数组中想要留下的值 (或者 index 操作等) 然后拿一个新变量接受返回的数组就可 (可能是空，可能是 1 个元素的数组)</p>
</blockquote>
<h3 id="some"><a class="markdownIt-Anchor" href="#some">#</a> some()</h3>
<ul>
<li>some () 方法用于检测数组中的元素是否满足指定条件（查找数组中是否有满足条件的元素）</li>
<li><strong><mark>注意它返回的是布尔值，如果查找到这个元素，就返回 true，如果查找不到就返回 false</mark></strong></li>
<li><strong>如果找到第一个满足条件的元素，则终止循环，不再继续查找，所以有时候不用遍历整个数组，效率更好</strong></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// some 查找数组中是否有满足条件的元素 </span>
        <span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'pink'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> flag1 <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">return</span> value <span class="token operator">==</span> <span class="token string">'pink'</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>flag1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1. filter 也是查找满足条件的元素 返回的是一个数组 而且是把所有满足条件的元素返回回来</span>
        <span class="token comment">// 2. some 也是查找满足条件的元素是否存在  返回的是一个布尔值 如果查找到第一个满足条件的元素就终止循环</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>(some 还可以这么写：)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614429.png" alt="image-20220116111856140"></p>
<p>这里 return true 说明找到了想找的 value, 所以必须返回 true</p>
<p>filter 和 some 区别</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201161226532.png" alt="image-20220116110654298"></p>
<p>foreach 和 some 区别</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201161227692.png" alt="image-20220116122748564"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614650.png" alt="image-20220116122824644"></p>
<p>foreach 必定是循环整个数组，return 都不管用</p>
<hr>
<h2 id="42-字符串方法"><a class="markdownIt-Anchor" href="#42-字符串方法">#</a> 4.2 字符串方法</h2>
<ul>
<li>trim () 方法会从一个字符串的__两端__删除空白字符</li>
<li>trim () 方法并不影响原字符串本身，它返回的是一个新的字符串</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span><span class="token operator">></span> <span class="token operator">&lt;</span>button<span class="token operator">></span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// trim 方法去除字符串两侧空格</span>
        <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'   an  dy   '</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> str1 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> input <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">var</span> str <span class="token operator">=</span> input<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">===</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'请输入内容'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
                div<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> str<span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="43-对象方法"><a class="markdownIt-Anchor" href="#43-对象方法">#</a> 4.3 对象方法</h2>
<h3 id="objectkeys"><a class="markdownIt-Anchor" href="#objectkeys">#</a> Object.keys()</h3>
<ul>
<li>Object.keys () 用于获取对象自身所有的属性</li>
<li>效果类似 for…in</li>
<li><strong>返回一个由属性名组成的数组</strong></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 用于获取对象自身所有的属性</span>
        <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>	
            id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            pname<span class="token operator">:</span> <span class="token string">'小米'</span><span class="token punctuation">,</span>
            price<span class="token operator">:</span> <span class="token number">1999</span><span class="token punctuation">,</span>
            num<span class="token operator">:</span> <span class="token number">2000</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> arr <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// id</span>
            <span class="token comment">// pname</span>
            <span class="token comment">// price</span>
            <span class="token comment">// num</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="objectdefineproperty"><a class="markdownIt-Anchor" href="#objectdefineproperty">#</a> Object.defineProperty()</h3>
<ul>
<li>Object.defineProperty()<strong> 定义对象中新属性或修改原有的属性</strong> (了解)</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span>prop<span class="token punctuation">,</span>descriptor<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>obj : 目标对象</li>
<li>prop : 需定义或修改的属性的名字</li>
<li>descriptor : 目标属性所拥有的特性</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// Object.defineProperty() 定义新属性或修改原有的属性</span>
        <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    
            id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            pname<span class="token operator">:</span> <span class="token string">'小米'</span><span class="token punctuation">,</span>
            price<span class="token operator">:</span> <span class="token number">1999</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token comment">// 1. 以前的对象添加和修改属性的方式</span>
        <span class="token comment">// obj.num = 1000;</span>
        <span class="token comment">// obj.price = 99;</span>
        <span class="token comment">// console.log(obj);</span>
        <span class="token comment">// 2. Object.defineProperty() 定义新属性或修改原有的属性</span>
        Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'num'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
            value<span class="token operator">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
            enumerable<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'price'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
    
            value<span class="token operator">:</span> <span class="token number">9.9</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'id'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// 如果值为false 不允许修改这个属性值 默认值也是false</span>
            writable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        obj<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'address'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
    
            value<span class="token operator">:</span> <span class="token string">'中国山东蓝翔技校xx单元'</span><span class="token punctuation">,</span>
            <span class="token comment">// 如果只为false 不允许修改这个属性值 默认值也是false</span>
            writable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token comment">// enumerable 如果值为false 则不允许遍历, 默认的值是 false</span>
            enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token comment">// configurable 如果为false 则不允许删除这个属性 不允许在修改第三个参数里面的特性 默认为false</span>
            configurable<span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> obj<span class="token punctuation">.</span>address<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> obj<span class="token punctuation">.</span>pname<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'address'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
    
            value<span class="token operator">:</span> <span class="token string">'中国山东蓝翔技校xx单元'</span><span class="token punctuation">,</span>
            <span class="token comment">// 如果值为false 不允许修改这个属性值 默认值也是false</span>
            writable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token comment">// enumerable 如果值为false 则不允许遍历, 默认的值是 false</span>
            enumerable<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token comment">// configurable 如果为false 则不允许删除这个属性 默认为false</span>
            configurable<span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>address<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong><mark>第三个参数 descriptor 说明：以对象形式 { } 书写</mark></strong></p>
<ul>
<li><code>value:...</code>  设置属性的值，默认为 undefined</li>
<li><code>writeable:...</code>  值是否可以重写 true | false <strong>默认为 false, 不可重写</strong></li>
<li><code>enumerable:...</code>  目标属性是否可以被枚举 true | false <strong>默认为 false</strong>, 也就是这个属性不允许遍历，你遍历对象属性不会显示他等</li>
<li><code>configurable:...</code>  目标属性是否可以被删除或是否可以再次修改特性 true | false <strong>默认为 false</strong>, 也就是这个属性任何修改都不可以包括不能删除，不能改 value,writeable,enumerable 和 configurable (他自己) 的 (一开始的) 设置<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201161247486.png" alt="image-20220116124735377"></li>
</ul>
<hr>
<h1 id="5-函数进阶"><a class="markdownIt-Anchor" href="#5-函数进阶">#</a> 5. 函数进阶</h1>
<h2 id="51-函数的定义"><a class="markdownIt-Anchor" href="#51-函数的定义">#</a> 5.1 函数的定义</h2>
<ol>
<li>函数声明方式 function 关键字 (命名函数)</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614049.png" alt="image-20220116125004805"></p>
<ol start="2">
<li>函数表达式 (匿名函数)</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614462.png" alt="image-20220116125023715"></p>
<ol start="3">
<li>new Function()</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">'参数1'</span><span class="token punctuation">,</span><span class="token string">'参数2'</span><span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span><span class="token string">'函数体'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ul>
<li>
<p><strong>Function</strong> 里面__参数__都__必须是字符串格式__</p>
</li>
<li>
<p><strong>第三种方式执行效率低，也不方便书写，因此较少使用</strong></p>
</li>
<li>
<p><mark>所有函数不管是声明方式还是匿名函数还是什么什么都是 Function 的实例 (对象)</mark></p>
</li>
<li>
<p><strong>函数也属于对象</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614253.png" alt="在这里插入图片描述"></p>
</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">//  函数的定义方式</span>

        <span class="token comment">// 1. 自定义函数(命名函数) </span>

        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

        <span class="token comment">// 2. 函数表达式 (匿名函数)</span>

        <span class="token keyword">var</span> <span class="token function-variable function">fun</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>


        <span class="token comment">// 3. 利用 new Function('参数1','参数2', '函数体');</span>
		<span class="token comment">//             Function 里面参数都必须是字符串格式，执行效率低，较少写</span>

        <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">,</span> <span class="token string">'console.log(a + b)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 4. 所有函数都是 Function 的实例(对象)</span>
        console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 5. 函数也属于对象</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="52-函数的调用方式"><a class="markdownIt-Anchor" href="#52-函数的调用方式">#</a> 5.2 函数的调用方式</h2>
<ol>
<li>普通函数</li>
<li>对象的方法</li>
<li>构造函数</li>
<li>绑定事件函数</li>
<li>定时器函数</li>
<li>立即执行函数</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 函数的调用方式</span>

        <span class="token comment">// 1. 普通函数</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'人生的巅峰'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment">// 2. 对象的方法</span>
        <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
            <span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'人生的巅峰'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        o<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 3. 构造函数</span>
        <span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    	<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 4. 绑定事件函数</span>
        btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    点击了按钮就可以调用这个函数

        <span class="token comment">// 5. 定时器函数</span>
        <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  这个函数是定时器自动<span class="token number">1</span>秒钟调用一次
        
        <span class="token comment">// 6. 立即执行函数</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>  
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'人生的巅峰'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 立即执行函数是自动调用</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="53-函数内this的指向"><a class="markdownIt-Anchor" href="#53-函数内this的指向">#</a> 5.3 函数内 this 的指向</h2>
<ul>
<li>this 指向，是当我们调用函数的时候确定的，调用方式的不同决定了 this 的指向不同，一般我们指向我们的调用者</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">调用方式</th>
<th style="text-align:left">this 指向</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">普通函数调用</td>
<td style="text-align:left">window, 因为是 window 来调用的</td>
</tr>
<tr>
<td style="text-align:left">构造函数调用</td>
<td style="text-align:left"><strong>实例对象</strong>，__原型对象__里面的方法也指向实例对象，因为都是拿实例对象调用的</td>
</tr>
<tr>
<td style="text-align:left">对象方法调用</td>
<td style="text-align:left">该方法所属对象 (也就是创建了一个对象 (不是类的那些，看上面), 然后这个对象里面的函数的 this 指向的就是他自己 (这个对象)(这里说的是里面没有什么定时器啊啥的))</td>
</tr>
<tr>
<td style="text-align:left">事件绑定方法</td>
<td style="text-align:left">绑定事件对象，因为事件触发了然后绑定这个事件的对象会调用这个绑定的方法</td>
</tr>
<tr>
<td style="text-align:left">定时器函数</td>
<td style="text-align:left">window</td>
</tr>
<tr>
<td style="text-align:left">立即执行函数</td>
<td style="text-align:left">window, 这个也是指向 window!</td>
</tr>
</tbody>
</table>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>button<span class="token operator">></span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 函数的不同调用方式决定了this 的指向不同</span>
        <span class="token comment">// 1. 普通函数 this 指向window</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'普通函数的this'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        window<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2. 对象的方法 this指向的是对象 o</span>
        <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function-variable function">sayHi</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'对象方法的this:'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        o<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 3. 构造函数 this 指向 ldh 这个实例对象 原型对象里面的this 指向的也是 ldh这个实例对象</span>
        <span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    

        <span class="token punctuation">&#125;</span>
        <span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 4. 绑定事件函数 this 指向的是函数的调用者 btn这个按钮对象</span>
        <span class="token keyword">var</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'绑定时间函数的this:'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token comment">// 5. 定时器函数 this 指向的也是window</span>
        window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'定时器的this:'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 6. 立即执行函数 this还是指向window</span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'立即执行函数的this'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="54-改变函数内部this指向"><a class="markdownIt-Anchor" href="#54-改变函数内部this指向">#</a> 5.4 改变函数内部 this 指向</h2>
<ul>
<li>JavaScript 为我们专门提供了一些函数方法来帮我们处理函数内部 this 的指向问题，常用的有 bind (),call (),apply () 三种方法</li>
</ul>
<h3 id="call-方法"><a class="markdownIt-Anchor" href="#call-方法">#</a> call () 方法</h3>
<ul>
<li>call () 方法调用一个对象，简单理解为调用函数的方式，但是它可以改变函数的 this 指向</li>
<li><code>fun.call(thisArg,arg1,arg2,…)</code></li>
<li>thisArg: 在 fun 函数运行时指定的 this 值</li>
<li>arg1,arg2: 传递的其他参数</li>
<li><strong>返回值就是函数的返回值，因为它就是调用函数</strong></li>
<li>因此当我们想改变 this 指向，同时想调用这个函数的时候，可以使用 call，<strong>比如 (ES6 之前的) 继承</strong></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 改变函数内this指向  js提供了三种方法  call()  apply()  bind()</span>

        <span class="token comment">// 1. call()</span>
        <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    
            name<span class="token operator">:</span> <span class="token string">'andy'</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// call 第一个可以调用函数 第二个可以改变函数内的this 指向</span>
        <span class="token comment">// call 的主要作用可以实现继承</span>
        <span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">this</span><span class="token punctuation">.</span>uname <span class="token operator">=</span> uname<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> sex<span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">uname<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token function">Father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> uname<span class="token punctuation">,</span> age<span class="token punctuation">,</span> sex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">var</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">'刘德华'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token string">'男'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="apply方法"><a class="markdownIt-Anchor" href="#apply方法">#</a> apply () 方法</h3>
<ul>
<li>apply () 方法调用一个函数，简单理解为调用函数的方式，但是它可以改变函数的 this 指向</li>
<li><code>fun.apply(thisArg,[argsArray])</code></li>
<li><code>thisArg:</code>  在 fun 函数运行时指定的 this 值</li>
<li><code>argsArray:</code>  传递的值，<strong><mark>必须包含在 数组 / 伪数组 里面，这个就是跟 call 的区别所在</mark></strong></li>
<li>返回值就是函数的返回值，因为它就是调用函数</li>
<li>因此 apply 主要跟数组有关系，<strong>比如使用 Math.max () 求数组的最大值。这个方法只有 Math 内置对象里面有，而数组是没有这个方法，所以可以 <code>Math.max.apply(Math(Math对象他自己,这样this还是指向他自己), arr(数组));</code>  这么做也就是把一个数组当做参数传给了 Math.max () 方法，然后也可以接收返回值</strong></li>
</ul>
<blockquote>
<p>这个 Math.max 本身接收的参数不是数组，但我们这么多就可以传数组进去了.</p>
<p><mark>因为传的是数组实则会把这个数组看成一个又一个对象，如果数组里面是一个又一个的__数字类型__, 那么实际传递给 Math.max 函数的是__一个又一个数组类型的数字__, 而不是一整个数组.</mark></p>
<p><mark>同理，如果数组里面是一个又一个的字符串那么传到那个函数的其实是一个又一个的__字符串__, 而不是一整个数组</mark></p>
<p><mark>so on…</mark></p>
</blockquote>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 改变函数内this指向  js提供了三种方法  call()  apply()  bind()</span>

        <span class="token comment">// 2. apply()  应用 运用的意思</span>
        <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span>  
            name<span class="token operator">:</span> <span class="token string">'andy'</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'pink'</span>

        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'pink'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1. 也是调用函数 第二个可以改变函数内部的this指向</span>
        <span class="token comment">// 2. 但是他的参数必须是数组(伪数组)</span>
        <span class="token comment">// 3. apply 的主要应用 比如说我们可以利用 apply 借助于数学内置对象求数组最大值 </span>
        <span class="token comment">// Math.max();</span>
        <span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">66</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'pink'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token comment">// var max = Math.max.apply(null, arr);</span>
        <span class="token keyword">var</span> max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>Math<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> min <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>Math<span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span> min<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><code>apply()</code>  精髓就是把传入的数组参数打碎变成参数列表，然后把这个参数列表再传递给用这个 apply 而调用的函数 / 方法</p>
</blockquote>
<h3 id="bind方法"><a class="markdownIt-Anchor" href="#bind方法">#</a> bind () 方法</h3>
<ul>
<li><strong><mark>bind () 方法不会调用函数 (跟上面两个区别之处)。但是能改变函数内部 this 指向</mark></strong></li>
<li>fun.bind(thisArg,arg1,arg2,…)</li>
<li><strong>返回由 (被被这个修改过) 指定的 this 值和初始化参数改造的 <mark>原函数拷贝</mark></strong></li>
<li>因此当我们只是想改变 this 指向，<em>并且不想调用这个函数的时候</em>，可以使用 bind</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>button<span class="token operator">></span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>button<span class="token operator">></span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>button<span class="token operator">></span>点击<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 改变函数内this指向  js提供了三种方法  call()  apply()  bind()</span>

        <span class="token comment">// 3. bind()  绑定 捆绑的意思</span>
        <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    
            name<span class="token operator">:</span> <span class="token string">'andy'</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 1. 不会调用原来的函数   可以改变原来函数内部的this 指向</span>
        <span class="token comment">// 2. 返回的是原函数改变this之后产生的新函数</span>
        <span class="token comment">// 3. 如果有的函数我们不需要立即调用,但是又想改变这个函数内部的this指向此时用bind</span>
        <span class="token number">4.</span> 我们有一个按钮<span class="token punctuation">,</span>当我们点击了之后<span class="token punctuation">,</span>就禁用这个按钮<span class="token punctuation">,</span><span class="token number">3</span>秒钟之后开启这个按钮   
		<span class="token comment">// var btn1 = document.querySelector('button');</span>
        <span class="token comment">// btn1.onclick = function() &#123;</span>
    
        <span class="token comment">//     this.disabled = true; // 这个this 指向的是 btn 这个按钮</span>
        <span class="token comment">//     // var that = this;</span>
        <span class="token comment">//     setTimeout(function() &#123;</span>
    
        <span class="token comment">//         // that.disabled = false; // 定时器函数里面的this 指向的是window</span>
        <span class="token comment">//         this.disabled = false; // 此时定时器函数里面的this 指向的是btn</span>
        <span class="token comment">//     &#125;.bind(this), 3000); // 这个this 指向的是btn 这个对象</span>
        <span class="token comment">// &#125;</span>
        
        这样可以用bind来达成想要的效果
        <span class="token keyword">var</span> btns <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> btns<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            btns<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 
                <span class="token keyword">this</span><span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//这里必须是this而不是btns[i]</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>这里的情况就是给按钮绑定了一个事件，但是这个事件里面有定时器，监听器__里面的函数__里面的 this 是指向 window 的.</p>
<p>这个时候我们可以用 bind 把这个定时器__里面的函数__的 this 给绑定 (设为) 在那个事件触发函数里面的 this 也就是绑定事件的那个对象。这个样子既没有调用这个定时器__里面的函数__(因为我们想让定时器到了才调用而不是现在就调用), 也可以让定时器__里面的函数__的 this 给指向了事件触发函数里面的 this 指向的这个绑定了这个事件的对象.</p>
<p>这么做就可以让在绑定事件__触发的函数__里面和绑定事件触发的函数里面使用的这个定时器__里面的函数__, 两个函数里面的 this 都指向的是这个事件的绑定的对象.</p>
</blockquote>
<blockquote>
<p>函数里面能用 this 就用 this, 而不是用 DOM 选出的节点对象的变量等，因为可能会给好几个对象用这个函数，所以函数里面用 this 就可以让谁调用这个函数谁做出相对应的操作等等等</p>
</blockquote>
<blockquote>
<p>== 重点！！！== 在上面的定时器里面的函数里面的代码必须是 <code>this.disabled = false;</code>  而不能是 <code>btns[i].disabled = false;</code>  因为外面 for 循环 (很快地，电脑非常快) 已经给每一个 button 设了一个 click 事件，然后 i 变成了 btns.length 不是 &lt; btns.length 就会退出循环.<strong><mark>for 肯定会先执行因为他是同步任务，而 click 事件触发调用的函数是异步任务</mark></strong></p>
<p>这样这个 button 在之后触发了 click 事件，他会执行里面的代码，这个时候这个定时器会在过两秒之后执行它里面的函数，这个函数里面现在 btns [i], 这个 i 的值已经不对了 (i = btns.length 现在), 所以这个就会出错.</p>
<p>如果用 this 然后再 (bind) 绑定好了 (也就是绑定为当前按的按钮，因为这个按钮是绑定的对象里面的绑定事件触发的函数用的 this 指的就是当前被按的按钮), 这样在这个定时器里面的函数里面用的 this 也明确知道指向的是谁，是我们按的哪个按钮.</p>
</blockquote>
<p>⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️</p>
<p>重点！比如说像之前我们 ES6 那样用类的方法，类里面有很多方法，然后有些方法是通过某一个对象触发的事件，所以那个方法里面的 this 是不会指向我们创造出来这个类的实例对象，而是我们设定的那个事件绑定的对象.</p>
<p>我们可以在那个类里面，在构造函数 (因为构造函数里面的 this 指向就是实例化出来的对象) 里把 this 给绑定到那些通过别的对象触发的方法，这样这些方法就可以用 this 来指向这个实例对象本身，<a target="_blank" rel="noopener" href="http://xn--this-kf5fu2b80vbh88wl4n3qz93si6mionis1hhsg.XXX"> 然后在这个方法里就可以用 this.XXX</a> (这个类里面的其他方法或者函数 (看上方复习，用自己的需要用 this (or… 只要是指向自己这个类里面的都行) 来表明)).</p>
<p>但是这么做就无法用 this 来代表那些触发这些函数的绑定事件的那些对象了，因为之前这些方法是事件触发了那些对象调用这些方法，现在绑定了这个方法里面的 this 指向我们实例化对象本身，而不是绑定事件触发了的那些对象.</p>
<p>所以这时候我们就可以在绑定 (bind) 的时候，传两个参数<mark>注意以下代码是在构造函数里 (or…) 写的，所以 this 指向的是实例化对象本身</mark></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">那个在类里面但是是绑定了某事件的对象在事件被触发的时候而调用的方法</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>绑定了事件的那个对象<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">(</span>也就是实例化对象本身<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><strong>这个样子那个方法照样还是用 this 来调用他的绑定事件的对象</strong></p>
<p><strong>而这个实例化对象本身是作为一个参数传进来了</strong></p>
<p>也就是说这个方法现在的声明需要是</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token function">那个方法</span><span class="token punctuation">(</span><span class="token parameter"><span class="token constant">AAA</span></span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span> <span class="token comment">//注意这里需要一个传参来接收bind传来的那个实例化对象本身</span>
    <span class="token keyword">this</span> <span class="token comment">//这个指向了这上面bind"修改的"this指向,也就是那个bind里面给的第一个参数->那个绑定了事件的那个对象.		这个其实没修改,因为这个方法是按我们的说法在这个类里面,但是调用他的是绑定某事件的那个对象,那个对象的事件被触发的时候而调用的方法,所以这个本来要是不bind,this指向的就是绑定事件的那个对象.</span>
    
    <span class="token constant">AAA</span> <span class="token comment">//这个就是指向了这个类,这个实例化对象本身,可以用这个来调用当前这个类里面的属性和其他方法等</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️⭐️</p>
<h3 id="call-apply-bind总结"><a class="markdownIt-Anchor" href="#call-apply-bind总结">#</a> call apply bind 总结</h3>
<ul>
<li>
<p>__相同点：__都可以改变函数内部的 this 指向</p>
</li>
<li>
<p><strong>区别点：</strong></p>
<ol>
<li>call 和 apply 会调用函数，- 并且改变函数内部的 this 指向</li>
<li>call 和 apply 传递的参数不一样，call 传递参数，apply 必须数组形式</li>
<li>bind 不会调用函数，可以改变函数内部 this 指向</li>
</ol>
</li>
<li>
<p><strong>主要应用场景</strong></p>
<ol>
<li>call 经常做继承</li>
<li>apply 经常跟数组有关系，比如借助于数学对线实现数组最大值与最小值</li>
<li>bind 不调用函数，但是还想改变 this 指向，比如改变定时器内部的 this 指向</li>
</ol>
</li>
</ul>
<p>思维导图：<br>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201072343462.png" alt="在这里插入图片描述"></p>
<hr>
<h1 id="6-严格模式"><a class="markdownIt-Anchor" href="#6-严格模式">#</a> 6. 严格模式</h1>
<ul>
<li>JavaScript 除了提供正常模式外，还提供了严格模式</li>
<li>ES5 的严格模式是采用具有限制性 JavaScript 变体的一种方式，即在严格的条件下运行 JS 代码</li>
<li>严格模式在 IE10 以上版本的浏览器才会被支持，旧版本浏览器会被忽略</li>
<li>严格模式对正常的 JavaScript 语义做了一些更改：
<ul>
<li>消除了 Javascript 语法的一些不合理、不严谨之处，减少了一些怪异行为</li>
<li>消除代码运行的一些不安全之处，保证代码运行的安全</li>
<li>提高编译器效率，增加运行速度</li>
<li>禁用了在 ECMAScript 的未来版本中可能会定义的一些语法，为未来新版本的 Javascript 做好铺垫。比如一些保留字如：class, enum, export, extends, import, super 不能做变量名</li>
</ul>
</li>
</ul>
<h2 id="61-开启严格模式"><a class="markdownIt-Anchor" href="#61-开启严格模式">#</a> 6.1 开启严格模式</h2>
<ul>
<li>严格模式可以应用到整个脚本或个别函数中。</li>
<li>因此在使用时，我们可以将严格模式分为为脚本开启严格模式和为函数开启严格模式两种情况</li>
</ul>
<h3 id="为脚本开启严格模式"><a class="markdownIt-Anchor" href="#为脚本开启严格模式">#</a> 为脚本开启严格模式</h3>
<ul>
<li>为整个脚本文件开启严格模式，需要在所有语句之前放一个特定语句</li>
<li>“ <code>use strict</code> ” 或’ <code>use strict</code> ’</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
    <span class="token string">'user strict'</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"这是严格模式。"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>因为 &quot;use strict&quot; 加了引号，所以老版本的浏览器会把它当作一行普通字符串而忽略。</li>
<li>有的 script 基本是严格模式，有的 script 脚本是正常模式，这样不利于文件合并，<strong>所以可以将整个脚本文件放在一个立即执行的匿名函数之中。这样独立创建一个作用域而不影响其他 script 脚本文件</strong>。</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
	<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    	<span class="token string">'use strict'</span><span class="token punctuation">;</span>
    	 <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    	 <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>
	<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="为函数开启严格模式"><a class="markdownIt-Anchor" href="#为函数开启严格模式">#</a> 为函数开启严格模式</h3>
<ul>
<li><strong>若要给某个函数开启严格模式，需要把 &quot; <code>use strict</code> &quot; 或’ <code>use strict</code> ' 声明放在函数体所有语句之前</strong></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token function">为整个脚本</span><span class="token punctuation">(</span>script标签<span class="token punctuation">)</span>开启严格模式 <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token string">'use strict'</span><span class="token punctuation">;</span>
        <span class="token comment">//   下面的js 代码就会按照严格模式执行代码</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token string">'use strict'</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 为某个函数开启严格模式 <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 此时只是给fn函数开启严格模式</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token string">'use strict'</span><span class="token punctuation">;</span>
            <span class="token comment">// 下面的代码按照严格模式执行</span>
        <span class="token punctuation">&#125;</span>

        <span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// 里面的还是按照普通模式执行</span>
        <span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><strong>将 &quot; <code>use strict</code> &quot;放在函数体的第一行，则整个函数以&quot; 严格模式 &quot; 运行。</strong></li>
</ul>
<blockquote>
<p>如果只是给一个函数严格模式，同文件下其他函数没设严格模式就还会是正常模式</p>
</blockquote>
<hr>
<h2 id="62-严格模式中的变化"><a class="markdownIt-Anchor" href="#62-严格模式中的变化">#</a> 6.2 严格模式中的变化</h2>
<ul>
<li>严格模式对 JavaScript 的语法和行为，都做了一些改变</li>
</ul>
<h3 id="变量规定"><a class="markdownIt-Anchor" href="#变量规定">#</a> 变量规定</h3>
<ul>
<li>在正常模式中，如果一个变量没有声明就赋值，默认是全局变量</li>
<li><strong>严格模式禁止这种用法，变量都必须先用 var (或者其他 let 等等) 命令声明，然后再使用</strong></li>
<li>严禁删除已经声明变量，例如， <code>delete x</code>  语法是错误的</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token string">'use strict'</span><span class="token punctuation">;</span>
        <span class="token comment">// 1. 我们的变量名必须先声明再使用</span>
        <span class="token comment">// num = 10;</span>
        <span class="token comment">// console.log(num);</span>
        <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 2.我们不能随意删除已经声明好的变量</span>
        <span class="token comment">// delete num;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="严格模式下this指向问题"><a class="markdownIt-Anchor" href="#严格模式下this指向问题">#</a> 严格模式下 this 指向问题</h3>
<ol>
<li><strong>以前在 == 全局作用域函数 (就正常函数)== 中的 this 指向 window 对象</strong></li>
<li><strong>严格模式下<mark>全局作用域中函数</mark>中的 this 是 undefined</strong></li>
</ol>
<blockquote>
<p>如果是 ES5 的构造函数创建实例化对象的方法，那个构造函数本身就是个函数所以可以不用 new 直接调用，之前这么干会让构造函数里面的 this 指向 window (正常，因为这个构造函数没加 new 当做是普通函数来执行了，所以跟正常模式的普通函数一样，调用的是 window)</p>
<p>不过要是严格模式，如果不用 new 当做普通函数直接调用构造函数，会让里面的 this 指向 undefined, 这样就无法设值了</p>
</blockquote>
<ol>
<li>以前构造函数时不加 new 也可以调用，<mark>当成普通函数用</mark>，<strong>this 指向全局对象，也就是 window</strong></li>
<li>严格模式下，<strong><mark>如果构造函数不加 new 调用</mark>，构造函数里面的 this 指向的是 undefined</strong>，如果给它赋值，会报错</li>
</ol>
<blockquote>
<p>不过要是加了 new, 就会是构造函数创建一个实例化对象那个的正常操作，构造函数里面的 this 还是会指向那个实例化对象</p>
</blockquote>
<ol>
<li>new 实例化的构造函数还是指向创建的对象实例</li>
</ol>
<blockquote>
<p>其他的 this 还跟正常模式中的都一样</p>
</blockquote>
<ol>
<li>定时器 this 还是指向 window</li>
<li>事件、对象还是指向调用者</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token string">'use strict'</span><span class="token punctuation">;</span>
		<span class="token comment">//3. 严格模式下全局作用域中函数中的 this 是 undefined。</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined。</span>
        <span class="token punctuation">&#125;</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4. 严格模式下,如果 构造函数不加new调用, this 指向的是undefined 如果给他赋值则 会报错.</span>
        <span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">this</span><span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'男'</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">// Star();</span>
        <span class="token keyword">var</span> ldh <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ldh<span class="token punctuation">.</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//5. 定时器 this 还是指向 window </span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="函数变化"><a class="markdownIt-Anchor" href="#函数变化">#</a> 函数变化</h3>
<ul>
<li>函数不能有重名的参数，正常模式下比如说如果函数有两个一样名字的参数 (传参), 那么后面赋值的参数会覆盖之前的.</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614571.png" alt="image-20220116151223149"></p>
<p>严格模式下不允许函数有重名的参数</p>
<ul>
<li><strong><mark>函数必须声明在顶层</mark></strong>，<strong>新版本的 JavaScript 会引入 “块级作用域”（ES6 中已引入）。为了与新版本接轨，不允许在非函数的代码块内声明函数</strong></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token string">'use strict'</span><span class="token punctuation">;</span>
        <span class="token comment">// 6. 严格模式下函数里面的参数不允许有重名</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> a</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
        <span class="token comment">// fn(1, 2);</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>也就是说不能在不是函数的代码块里面声明一个函数，比如说 for,if, 等等</p>
<p><strong>可以在函数代码块里面声明函数</strong></p>
</blockquote>
<hr>
<h1 id="7-高阶函数"><a class="markdownIt-Anchor" href="#7-高阶函数">#</a> 7. 高阶函数</h1>
<ul>
<li>高阶函数是对其他函数进行操作的函数，<strong>它接收函数作为参数__或将__函数作为返回值输出</strong> (符合这俩的任何一个都是高阶函数)</li>
</ul>
<p>⭐️<strong>接收函数作为参数：</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 高阶函数- 函数可以作为参数传递</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            callback <span class="token operator">&amp;&amp;</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是最后调用的'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>⭐️<strong>将函数作为返回值：</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">></span>
    <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    
        <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    	<span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>此时 fn 就是一个高阶函数</li>
<li>函数也是一种数据类型，同样可以作为参数，传递给另外一个参数使用。最典型的就是作为回调函数</li>
<li>同理函数也可以作为返回值传递回来</li>
</ul>
<hr>
<h1 id="8-闭包"><a class="markdownIt-Anchor" href="#8-闭包">#</a> 8. 闭包</h1>
<h2 id="81-变量作用域"><a class="markdownIt-Anchor" href="#81-变量作用域">#</a> 8.1 变量作用域</h2>
<p>变量根据作用域的不同分为两种：全局变量和局部变量：</p>
<ol>
<li>函数内部可以使用全局变量</li>
<li>函数外部不可以使用局部变量</li>
<li>当函数执行完毕，本作用域内的局部变量会销毁。</li>
</ol>
<h2 id="82-什么是闭包"><a class="markdownIt-Anchor" href="#82-什么是闭包">#</a> 8.2 什么是闭包</h2>
<ul>
<li>闭包指__有权<mark>访问</mark>另一个函数作用域中的<mark>变量</mark>的函数__</li>
<li>简单理解：<mark>一个作用域可以访问另外一个函数内部的__局部变量__</mark></li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 闭包（closure）指有权访问另一个函数作用域中变量的函数。</span>
        <span class="token comment">// 闭包: 我们fn2 这个函数作用域 访问了另外一个函数 fn1 里面的局部变量 num</span>
        <span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    		<span class="token comment">// fn1就是闭包函数</span>
            <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
            <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span> 	<span class="token comment">//10</span>
            <span class="token punctuation">&#125;</span>
            <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>也就是说闭包是一个函数可以访问到另外一个函数里面 (也就是那个函数里的作用域里) 的__局部变量__, 那么就产生了闭包.</p>
<p>这个可以访问到另外一个函数里面的变量的这个函数就是个闭包.</p>
<blockquote>
<p>闭包 (closure) is nothing more than a function and has a reference to a private (free) variable.</p>
<p>A closure is a function <strong>(or method) that refers to free variables in their lexical context</strong>.</p>
<p>A free variable is <strong>simply a variable which is not declared inside a given function, but is used inside it</strong>. By the way, all global variables are free variables, but not all the free variables are global.</p>
<p>A lexical scope in JavaScript means that <strong>a variable defined outside a function can be accessible inside another function defined after the variable declaration</strong>.</p>
</blockquote>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614575.png" alt="image-20220117140932016"></p>
<blockquote>
<p>一个函数和对其周围状态（lexical environment，词法环境）的引用捆绑在一起（或者说函数被引用包围），这样的组合就是<strong>闭包</strong>（closure）。 也就是说，<strong>闭包</strong>让你可以在一个内层函数中访问到其外层函数的作用域。 在 JavaScript 中，每当创建一个函数，<strong>闭包</strong>就会在函数创建的同时被创建出来。</p>
</blockquote>
<p><strong>我觉得最好理解的:</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614511.png" alt="image-20220117141616159"></p>
<h3 id="在chrome中调试闭包"><a class="markdownIt-Anchor" href="#在chrome中调试闭包">#</a> 在 chrome 中调试闭包</h3>
<ol>
<li>
<p>打开浏览器，按 F12 键启动 chrome 调试工具。</p>
</li>
<li>
<p>设置断点。</p>
</li>
<li>
<p>找到 Scope 选项（Scope 作用域的意思）。</p>
</li>
<li>
<p>当我们重新刷新页面，会进入断点调试，Scope 里面会 有两个参数（global 全局作用域、local 局部作用域）。</p>
</li>
<li>
<p>当执行到 fn2 () 时，Scope 里面会多一个 Closure 参数 ，这就表明产生了闭包。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614345.png" alt="在这里插入图片描述"></p>
</li>
</ol>
<h3 id="闭包的作用"><a class="markdownIt-Anchor" href="#闭包的作用">#</a> 闭包的作用</h3>
<p><strong>延伸变量的作用范围:</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 闭包（closure）指有权访问另一个函数作用域中变量的函数。</span>
        <span class="token comment">// 一个作用域可以访问另外一个函数的局部变量 </span>
        <span class="token comment">// 我们fn 外面的作用域可以访问fn 内部的局部变量</span>
        <span class="token comment">// 闭包的主要作用: 延伸了变量的作用范围</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>这里就是在 fn 函数外面把那个闭包函数给 return 出来了，这么做可以在 fn 函数外面使用到 num 这个 fn 函数的局部变量.</p>
<p>It is only made possible by using the closure function (the function returned by the fn function which has access to the num variable.)</p>
</blockquote>
<blockquote>
<p>这里 f 变量就是存的 fn 函数执行完 return 出来的那个闭包函数对象的地址，然后执行 f 函数也就是执行那个闭包函数对象.</p>
</blockquote>
<blockquote>
<p>平时 fn 函数里面的 num 变量在调用 fn 函数之后会销毁掉，不会存到内存里面。但是上面不会销毁，因为我们有 f, 等着调用这个 num 变量，只有在 f 函数也调用了然后结束这个变量才会销毁.</p>
</blockquote>
<p><strong>闭包可以用在许多地方。它的最大用处有两个，一个是前面提到的可以读取函数内部的变量，另一个就是让这些变量的值始终保持在内存中:</strong></p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">　　<span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>

　　　　<span class="token keyword">var</span> n<span class="token operator">=</span><span class="token number">999</span><span class="token punctuation">;</span>

　　　　<span class="token function-variable function">nAdd</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>n<span class="token operator">+=</span><span class="token number">1</span><span class="token punctuation">&#125;</span>

　　　　<span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
　　　　　　<span class="token function">alert</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
　　　　<span class="token punctuation">&#125;</span>

　　　　<span class="token keyword">return</span> f2<span class="token punctuation">;</span>

　　<span class="token punctuation">&#125;</span>

　　<span class="token keyword">var</span> result<span class="token operator">=</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

　　<span class="token function">result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 999</span>

　　<span class="token function">nAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

　　<span class="token function">result</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614508.png" alt="image-20220117141722312"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171419034.png" alt="image-20220117141937939"></p>
<h3 id="闭包练习"><a class="markdownIt-Anchor" href="#闭包练习">#</a> 闭包练习</h3>
<p><strong>1. 点击 li 输出索引号</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>ul <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"nav"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>榴莲<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>臭豆腐<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>鲱鱼罐头<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>大猪蹄子<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 闭包应用-点击li输出当前li的索引号</span>
        <span class="token comment">// 1. 我们可以利用动态添加属性的方式</span>
        <span class="token keyword">var</span> lis <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.nav'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>index <span class="token operator">=</span> i<span class="token punctuation">;</span>
            lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                <span class="token comment">// console.log(i); 注意这里不能用i,因为外面的for循环是同步任务,而当前这个函数是异步任务,同步任务会先执行完,所以i现在是=lis.length,然后你触发了点击事件调用的这个函数是异步任务,触发了才会被放到执行栈中执行.</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-js" data-language="js"><code class="language-js">        <span class="token comment">// 2. 利用闭包的方式得到当前小li 的索引号</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token comment">// 利用for循环创建了4个立即执行函数</span>
            <span class="token comment">// 立即执行函数也成为小闭包因为立即执行函数里面的任何一个函数都可以使用它的i这变量</span>
            <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//i从0到lis.length-1传进这个立即执行函数,所以现在里面的代码用i就是用那个iteration的立即执行函数所传进的i的值</span>
        <span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/76f3b859c30b4c0fa7af7a6ee40bacd5.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>注意上面</p>
<p>//console.log (i); 注意这里不能用 i, 因为外面的 for 循环是同步任务，而当前这个函数是异步任务，同步任务会先执行完，所以 i 现在是 = lis.length, 然后你触发了点击事件调用的这个函数是异步任务，触发了才会被放到执行栈中执行.</p>
</blockquote>
<blockquote>
<p>以上的做法可以看做是每次 for 的循环都创造了一个立即执行函数</p>
<p>只要是函数就有自己的作用域，所以就是每次 iteration 都会创建有一个自己作用域的立即执行函数，而且每一个立即执行函数里面都有传给自己的 i 值 (每一个立即执行函数里面的 i 跟其他的都不一样值).</p>
<p>所以要是一个 li 的 click 的事件触发了，比如说 lis [2] 的小 li.</p>
<p>这个 li 的是在一个 i 为 2 的立即执行函数的作用域里面 (虽然是立即执行但是还是函数，还是有自己的作用域), 所以这时候触发事件所调用的函数里面用到的 i 就会去找 i 的值，而那个立即执行函数的 i 值就是 2 所以这个触发事件所调用的函数用的 i 的值就是 2, 而不是去到外面 for 循环结束的 i 值.<strong><mark>⭐️就近原则⭐️</mark></strong></p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/image-20220117172216098.png" alt="image-20220117172216098"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/image-20220117172344280.png" alt="image-20220117172344280"></p>
<blockquote>
<p>可以说那个 click 事件触发调用的函数是闭包</p>
<p><strong>也可以说是外面的立即执行函数是闭包，因为他的变量被那个 click 事件触发调用的函数所调用了</strong></p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/image-20220117172649865.png" alt="image-20220117172649865"></p>
<blockquote>
<p>上面利用闭包的方法不好，要是多了会占内存，那个 i 变量只有在我们点击事件结束后才会被销毁，要是一直不点击就一直存在在内存里。内存泄露</p>
</blockquote>
<p><strong>2. 定时器中的闭包</strong></p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>ul <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"nav"</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>榴莲<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>臭豆腐<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>鲱鱼罐头<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token operator">&lt;</span>li<span class="token operator">></span>大猪蹄子<span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 闭包应用-3秒钟之后,打印所有li元素的内容</span>
        <span class="token keyword">var</span> lis <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.nav'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lis<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>lis<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>这里跟上面同理，计时器的回调函数也是异步任务，不能直接用 i</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614520.png" alt="在这里插入图片描述"></p>
<h2 id="83-闭包生命周期总结内存泄露以及内存溢出"><a class="markdownIt-Anchor" href="#83-闭包生命周期总结内存泄露以及内存溢出">#</a> 8.3 闭包生命周期，总结，内存泄露以及内存溢出</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171614315.png" alt="image-20220117143321305"></p>
<blockquote>
<p>我的理解就是在一个函数 A 的作用域里面有他自己的局部变量等等，我们在这个函数 A 的外面是无法 access 到那些变量的.</p>
<p>这时候我们就可以在那个函数 A 里面创建一个函数 B 用来获得那个变量 (通过作用域链), 这时候这个函数 B 因为可以获得其他函数 (函数 A) 里面的局部变量所以可称之为闭包，或者可以说是这个函数 B 和他周围的环境也就是包括了那个局部变量，或者说是整个也就是函数 A 就是个闭包 (应该是，不过我还是决定认为这个函数 B 是闭包).</p>
<p>这个函数 B 可以作为一个返回值或者它里面对那个局部变量进行什么操作然后返回…</p>
<p>反正如果这个函数 A 返回了函数 B, 那么我们就可以在函数 A 外面用一个变量接收调用函数 A 的返回值也就是这个函数 B, 那么这个变量就是引用那个函数 B (指向函数 B 的地址). 然后我们就可以在函数 A 外面通过函数 B 操作函数 A 里面的局部变量.</p>
<p>因为这个引用一直在 (一直指向这个函数 B 的地址), 这个函数 B 也一直在，因为这个函数 B 中使用了函数 A 里面的某些局部变量，那么那些__== 某些 (应该只是那些被函数 B 用的)== 局部变量__就会一直存在内存中，而不是在像正常函数一样调用函数 A 之后就会摧毁.</p>
<p>闭包 (也就是那个函数 B) 的产生是在那个函数 B 在声明的时候__(不是被调用之后！)__</p>
<p>所以决定那个变量不用了不需要存在内存，一定要是让闭包死亡也就是那个存 <code>返回的闭包函数的那个变量=null;</code> (一般都这么干) 防止内存泄露</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171452979.png" alt="img"></p>
<p>内存溢出</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171454371.png" alt="img"></p>
<p>内存泄露</p>
<ol>
<li>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171459171.png" alt=""></p>
</li>
<li>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171500666.png" alt=""></p>
</li>
<li>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171503148.png" alt=""></p>
</li>
</ol>
<h2 id="面试题"><a class="markdownIt-Anchor" href="#面试题">#</a> 面试题</h2>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171514221.png" alt=""></p>
<blockquote>
<p>这里 object.getNameFunc () 只是返回了那个闭包函数，然后之后的 () 是让返回的闭包函数立马执行，立即执行函数的都是由 window 调用，里面的 this 指向的都是 window</p>
<blockquote>
<p><mark>这里没有闭包产生，用的那个变量也是外面定的全局变量</mark></p>
</blockquote>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/202201171525294.png" alt=""></p>
<blockquote>
<p>这里 this 依然指向 window 但是 that 指向的是 object2 对象本身，这是因为 object2.getNameFunc () 把自己的地址赋值给了 that, 所以在闭包函数里面使用 that 指向的就是 object2 对象本身.</p>
<p>闭包函数可以 access 到 that 变量因为作用域里链 (闭包的作用).</p>
<blockquote>
<p><mark>这里有闭包产生，用的那个变量 that 就是另外一个函数里面的局部变量</mark></p>
</blockquote>
</blockquote>
<p>注意！接下来还是个人理解，有些不清楚的地方，<strong> 不一定对！！！</strong>:</p>
<p>就是上面返回的闭包函数，是整个 function (){} 形式的，所以拿一个变量接受这个返回的闭包函数可以说这样:</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> <span class="token function-variable function">A</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> that<span class="token punctuation">.</span>name2<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>现在 A 变量指向的是一个函数对象 (Function 的实例对象) 通过 function 构建出来的.</p>
<p>那我们再拿另外一个接收这个返回的闭包函数</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> <span class="token function-variable function">B</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token keyword">return</span> that<span class="token punctuation">.</span>name2<span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>现在 A 变量指向的是一个函数对象 (Function 的实例对象) 通过 function 构建出来的.</p>
<p>那这两变量存的是同一个函数对象吗？</p>
<p><strong>我的认为是：不是同一个对象</strong></p>
<p>如果闭包函数里面使用了返回闭包函数的那个函数的局部变量，那么这个局部变量和这个闭包函数一起可以称作为闭包 (少数人这么认为), 如果拿 A 变量存的那个闭包函数来操作那个局部变量是不会影响到 B 变量存的那个闭包函数所有的那个局部变量.<mark> 应该是这样</mark>，我的理解是像上面说的闭包函数跟那个局部变量在一起才算闭包，所以你对一个闭包函数对象进行那个局部变量的操作只会影响到那个局部变量而不会影响到另外的闭包函数对象所操作的局部变量 (which belongs to <strong>that</strong> 闭包 (环境))</p>
<h2 id="总结重要"><a class="markdownIt-Anchor" href="#总结重要">#</a> 总结 (重要！)</h2>
<blockquote>
<p>这一部分，上面一直在说 &quot;返回的闭包函数&quot;, 其实那个好像不是闭包 (按照 pink 老师的说法).</p>
<blockquote>
<p>一个作用域可以访问到另外一个函数的局部变量就产生了闭包，而那个闭包其实就是那个局部变量所在的那个函数 (也就是那个局部变量在这个函数 (也就是闭包) 的作用域之中).</p>
</blockquote>
</blockquote>
<hr>
<h1 id="9-递归"><a class="markdownIt-Anchor" href="#9-递归">#</a> 9. 递归</h1>
<ul>
<li>如果一个函数在内部可以调用其本身，那么这个函数就是递归函数</li>
<li>简单理解： 函数内部自己调用自己，这个函数就是递归函数</li>
<li>由于递归很容易发生 &quot;栈溢出&quot; 错误，所以必须要加退出条件 return</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 递归函数 : 函数内部自己调用自己, 这个函数就是递归函数</span>
        <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我要打印6句话'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 递归里面必须加退出条件</span>
            <span class="token punctuation">&#125;</span>
            num<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h1 id="10-浅拷贝和深拷贝"><a class="markdownIt-Anchor" href="#10-浅拷贝和深拷贝">#</a> 10. 浅拷贝和深拷贝</h1>
<ol>
<li>浅拷贝只是拷贝一层，更深层次对象级别的只拷贝引用 (<strong>也就是被拷贝的对象要是有很属性也是对象那么拷贝过去的就是那个对象的地址，看下面代码就明白了</strong>) 也就是普通数据类型的属性是拷贝值过去，而复杂数据类型拷贝过去的是地址</li>
<li>深拷贝拷贝多层，每一级别的数据都会拷贝，要是有属性是对象，也都是复制一份而不是拷贝地址。普通数据类型和复杂数据类型拷贝的都是值 (不是地址 (引用))</li>
<li>Object.assign (target,…sources) ES6 新增方法可以浅拷贝</li>
</ol>
<h2 id="101-浅拷贝"><a class="markdownIt-Anchor" href="#101-浅拷贝">#</a> 10.1 浅拷贝</h2>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 浅拷贝只是拷贝一层，更深层次对象级别的只拷贝引用</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    
    id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'andy'</span><span class="token punctuation">,</span>
    msg<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    
        age<span class="token operator">:</span> <span class="token number">18</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    
    <span class="token comment">// k是属性名，obj[k]是属性值</span>
    o<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 浅拷贝语法糖</span>
Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="102-深拷贝"><a class="markdownIt-Anchor" href="#102-深拷贝">#</a> 10.2 深拷贝</h2>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 深拷贝拷贝多层，每一级别的数据都会拷贝</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    
    id<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'andy'</span><span class="token punctuation">,</span>
    msg<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    
        age<span class="token operator">:</span> <span class="token number">18</span>
    <span class="token punctuation">&#125;</span>
    color<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'pink'</span><span class="token punctuation">,</span><span class="token string">'red'</span><span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token comment">// 封装函数</span>
<span class="token keyword">function</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span><span class="token parameter">newobj<span class="token punctuation">,</span>oldobj</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> k <span class="token keyword">in</span> oldobj<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token comment">// 判断属性值属于简单数据类型还是复杂数据类型</span>
        <span class="token comment">// 1.获取属性值   oldobj[k]</span>
        <span class="token keyword">var</span> item <span class="token operator">=</span> oldobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span>
        
        <span class="token comment">// 2.判断这个值是否是数组</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>item <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token function">deepCopy</span><span class="token punctuation">(</span>newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span> <span class="token comment">//递归</span>
        
        <span class="token comment">// 3.判断这个值是否是对象 </span>
        <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>item <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token operator">=</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
            newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepCopy</span><span class="token punctuation">(</span>newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span>item<span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    
		 <span class="token comment">// 4.属于简单数据类型</span>
         newobj<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>           
        <span class="token punctuation">&#125;</span> 
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token function">deepCopy</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>注意如果是对象或者是数组要先把他们设置为空的对象和数组，这样如果数组或对象里面的存的是简单数据类型就会直接通过 newobj [k] 来给这个数组或者对象属性的属性赋值，如果不是简单数据类型就一直递归，一直到存的是简单数据类型为止.</p>
<p>要把 Array 放在 Object 上面，因为数组 isinstanceof Object 会返回 true.</p>
</blockquote>
<hr>
<h1 id="11-正则表达式"><a class="markdownIt-Anchor" href="#11-正则表达式">#</a> 11. 正则表达式</h1>
<ul>
<li>正则表达式是用于匹配字符串中字符组合的模式。<strong>在 JavaScript 中，正则表达式也是对象</strong>。</li>
<li>正则表通常被用来检索、替换那些符合某个模式（规则）的文本，例如
<ul>
<li><strong>验证表单</strong>：用户名表单只能输入英文字母、数字或者下划线， 昵称输入框中可以输入中文 (匹配)。</li>
<li>此外，正则表达式还常用于过滤掉页面内容中的一些敏感词 (替换)，或从字符串中获取我们想要的特定部分 (提取) 等</li>
</ul>
</li>
</ul>
<h2 id="111-特点"><a class="markdownIt-Anchor" href="#111-特点">#</a> 11.1 特点</h2>
<ul>
<li>实际开发，一般都是直接复制写好的正则表达式</li>
<li>但是要求会使用正则表达式并且根据自身实际情况修改正则表达式</li>
</ul>
<h2 id="112-创建正则表达式"><a class="markdownIt-Anchor" href="#112-创建正则表达式">#</a> 11.2 创建正则表达式</h2>
<p>在 JavaScript 中，可以通过两种方式创建正则表达式</p>
<ol>
<li>通过调用 RegExp 对象的构造函数创建</li>
<li>通过字面量创建</li>
</ol>
<h3 id="通过调用-regexp-对象的构造函数创建"><a class="markdownIt-Anchor" href="#通过调用-regexp-对象的构造函数创建">#</a> 通过调用 RegExp 对象的构造函数创建</h3>
<p>通过调用 RegExp 对象的构造函数创建: <code>var 变量名 = new RegExp(/表达式/);</code></p>
<h3 id="通过字面量创建"><a class="markdownIt-Anchor" href="#通过字面量创建">#</a> 通过字面量创建</h3>
<p>通过字面量创建: <code>var 变量名 = /表达式/;</code>  注释中间放表达式就是正则字面量</p>
<h3 id="测试正则表达式-test"><a class="markdownIt-Anchor" href="#测试正则表达式-test">#</a> 测试正则表达式 test</h3>
<ul>
<li>
<p>test () 正则对象方法，用于检测字符串是否符合该规则，该对象会返回 true 或 false, 其参数是测试字符串: <code>regexObj.test(str)</code></p>
<ul>
<li>regexObj 写的是正则表达式</li>
<li>str 我们要测试的文本</li>
</ul>
</li>
<li>
<p>就是检测 str 文本是否符合我们写的正则表达式规范</p>
</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 正则表达式在js中的使用</span>

        <span class="token comment">// 1. 利用 RegExp对象来创建 正则表达式</span>
        <span class="token keyword">var</span> regexp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">123</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 2. 利用字面量创建 正则表达式</span>
        <span class="token keyword">var</span> rg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">123</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
        <span class="token comment">// 3.test 方法用来检测字符串是否符合正则表达式要求的规范</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="113-正则表达式中的特殊在字符"><a class="markdownIt-Anchor" href="#113-正则表达式中的特殊在字符">#</a> 11.3 正则表达式中的特殊在字符</h2>
<h3 id="边界符"><a class="markdownIt-Anchor" href="#边界符">#</a> 边界符</h3>
<ul>
<li>正则表达式中的边界符 (位置符) 用来提示字符所处的位置，主要有两个字符</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:left">边界符</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">^</td>
<td style="text-align:left">表示匹配行首的文本 (以谁开始)</td>
</tr>
<tr>
<td style="text-align:left">$</td>
<td style="text-align:left">表示匹配行尾的文本 (以谁结束)</td>
</tr>
</tbody>
</table>
<ul>
<li>如果 ^ 和 $ 在一起，表示必须是精确匹配</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 边界符 ^ $</span>
<span class="token keyword">var</span> rg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">abc</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>   <span class="token comment">//正则表达式里面不需要加引号，不管是数字型还是字符串型</span>
<span class="token comment">// /abc/只要包含有abc这个字符串返回的都是true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abcd'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'aabcd'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^abc</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abcd'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'aabcd'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token keyword">var</span> reg1 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^abc$</span><span class="token regex-delimiter">/</span></span>
<span class="token comment">// 以abc开头，以abc结尾，必须是abc</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="字符类"><a class="markdownIt-Anchor" href="#字符类">#</a> 字符类</h3>
<ul>
<li>字符类表示有一系列字符可供选择，只要匹配其中一个就可以了</li>
<li>所有可供选择的字符都放在方括号内
<ul>
<li>
<p>①[] 方括号: <code>/[abc]/.test('andy'); // true</code>  后面的字符串只要包含 abc 中任意一个字符，都返回 true</p>
</li>
<li>
<p>②[-] 方括号内部 范围符: <code>/^[a-z]$/.test()</code>  方括号内部加上 - 表示范围，这里表示 a - z 26 个英文字母都可以</p>
</li>
<li>
<p>③[^] 方括号内部 取反符 ^: <code>/[^abc]/.test('andy') // false</code>  方括号内部加上 ^ 表示取反，只要包含方括号内的字符，都返回  <code>false</code></p>
<p>注意和边界符 ^ 区别，边界符写到方括号外面</p>
</li>
<li>
<p>④字符组合: <code>/[a-z1-9]/.test('andy') // true</code>  方括号内部可以使用字符组合，这里表示包含 a 到 z 的 26 个英文字母和 1 到 9 的数字都可以</p>
</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">//var rg = /abc/;  只要包含abc就可以 </span>
        <span class="token comment">// 字符类: [] 表示有一系列字符可供选择，只要匹配其中一个就可以了</span>
        <span class="token keyword">var</span> rg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[abc]</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span> <span class="token comment">// 只要包含有a 或者 包含有b 或者包含有c 都返回为true</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'andy'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'baby'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'color'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> rg1 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[abc]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span> <span class="token comment">// 三选一 只有是a 或者是 b  或者是c 这三个字母才返回 true</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rg1<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'aa'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rg1<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rg1<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rg1<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rg1<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'------------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-z]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span> <span class="token comment">// 26个英文字母任何一个字母返回 true  - 表示的是a 到z 的范围  </span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'z'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 字符组合</span>
        <span class="token keyword">var</span> reg1 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-zA-Z0-9_-]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span> <span class="token comment">// 26个英文字母(大写和小写都可以)任何一个字母返回 true  </span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg1<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg1<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg1<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg1<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg1<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg1<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'----------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 如果中括号里面有^ 表示取反的意思 千万和 我们边界符 ^ 别混淆</span>
        <span class="token keyword">var</span> reg2 <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[^a-zA-Z0-9_-]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg2<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg2<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg2<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg2<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg2<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg2<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'!'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="量词符"><a class="markdownIt-Anchor" href="#量词符">#</a> 量词符</h3>
<p>量词符用来设定某个模式出现的次数</p>
<table>
<thead>
<tr>
<th style="text-align:left">量词</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">重复零次或更多次</td>
</tr>
<tr>
<td style="text-align:left">+</td>
<td style="text-align:left">重复一次或更多次</td>
</tr>
<tr>
<td style="text-align:left">?</td>
<td style="text-align:left">重复零次或一次</td>
</tr>
<tr>
<td style="text-align:left" n=""></td>
<td style="text-align:left">重复 n 次</td>
</tr>
<tr>
<td style="text-align:left" n,=""></td>
<td style="text-align:left">重复 n 次或更多次</td>
</tr>
<tr>
<td style="text-align:left" n,m=""></td>
<td style="text-align:left">重复 n 到 m 次</td>
</tr>
</tbody>
</table>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 量词符: 用来设定某个模式出现的次数</span>
        <span class="token comment">// 简单理解: 就是让下面的a这个字符重复多少次</span>
        <span class="token comment">// var reg = /^a$/;</span>

        <span class="token comment">//  * 相当于 >= 0 可以出现0次或者很多次 </span>
        <span class="token comment">// var reg = /^a*$/;</span>
        <span class="token comment">// console.log(reg.test(''));</span>
        <span class="token comment">// console.log(reg.test('a'));</span>
        <span class="token comment">// console.log(reg.test('aaaa'));</span>

        <span class="token comment">//  + 相当于 >= 1 可以出现1次或者很多次</span>
        <span class="token comment">// var reg = /^a+$/;</span>
        <span class="token comment">// console.log(reg.test('')); // false</span>
        <span class="token comment">// console.log(reg.test('a')); // true</span>
        <span class="token comment">// console.log(reg.test('aaaa')); // true</span>

        <span class="token comment">//  ?  相当于 1 || 0</span>
        <span class="token comment">// var reg = /^a?$/;</span>
        <span class="token comment">// console.log(reg.test('')); // true</span>
        <span class="token comment">// console.log(reg.test('a')); // true</span>
        <span class="token comment">// console.log(reg.test('aaaa')); // false</span>

        <span class="token comment">//  &#123;3 &#125; 就是重复3次</span>
        <span class="token comment">// var reg = /^a&#123;3&#125;$/;</span>
        <span class="token comment">// console.log(reg.test('')); // false</span>
        <span class="token comment">// console.log(reg.test('a')); // false</span>
        <span class="token comment">// console.log(reg.test('aaaa')); // false</span>
        <span class="token comment">// console.log(reg.test('aaa')); // true</span>
        <span class="token comment">//  &#123;3, &#125;  大于等于3</span>
        <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^a&#123;3,&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'aaaa'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
        <span class="token comment">//  &#123;3,16&#125;  大于等于3 并且 小于等于16</span>
        <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^a&#123;3,6&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'aaaa'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'aaaaaaa'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="用户名验证"><a class="markdownIt-Anchor" href="#用户名验证">#</a> 用户名验证</h3>
<p><strong>功能需求：</strong></p>
<ol>
<li>如果用户名输入合法，则后面提示信息为：用户名合法，并且颜色为绿色</li>
<li>如果用户名输入不合法，则后面提示信息为：用户名不符合规范，并且颜色为绿色</li>
</ol>
<p><strong>分析：</strong></p>
<ol>
<li>用户名只能为英文字母，数字，下划线或者短横线组成，并且用户名长度为 6~16 位.</li>
<li>首先准备好这种正则表达式模式 /$<span 6,16="">a-zA-Z0-9-_</span>^/</li>
<li>当表单失去焦点就开始验证.</li>
<li>如果符合正则规范，则让后面的 span 标签添加 right 类.</li>
<li>如果不符合正则规范，则让后面的 span 标签添加 wrong 类.</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"text"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"uname"</span><span class="token operator">></span> <span class="token operator">&lt;</span>span<span class="token operator">></span>请输入用户名<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">//  量词是设定某个模式出现的次数</span>
        <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[a-zA-Z0-9_-]&#123;6,16&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span> <span class="token comment">// 这个模式用户只能输入英文字母 数字 下划线 短横线但是有边界符和[] 这就限定了只能多选1</span>
        <span class="token comment">// &#123;6,16&#125;  中间不要有空格</span>
        <span class="token comment">// console.log(reg.test('a'));</span>
        <span class="token comment">// console.log(reg.test('8'));</span>
        <span class="token comment">// console.log(reg.test('18'));</span>
        <span class="token comment">// console.log(reg.test('aa'));</span>
        <span class="token comment">// console.log('-------------');</span>
        <span class="token comment">// console.log(reg.test('andy-red'));</span>
        <span class="token comment">// console.log(reg.test('andy_red'));</span>
        <span class="token comment">// console.log(reg.test('andy007'));</span>
        <span class="token comment">// console.log(reg.test('andy!007'));</span>
        <span class="token keyword">var</span> uname <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.uname'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        uname<span class="token punctuation">.</span><span class="token function-variable function">onblur</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
            <span class="token keyword">if</span> <span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'正确的'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                span<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'right'</span><span class="token punctuation">;</span>
                span<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'用户名格式输入正确'</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
    
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'错误的'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                span<span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'wrong'</span><span class="token punctuation">;</span>
                span<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'用户名格式输入不正确'</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="114-括号总结"><a class="markdownIt-Anchor" href="#114-括号总结">#</a> 11.4 括号总结</h2>
<ol>
<li>大括号 量词符 里面面表示重复次数</li>
<li>中括号 字符集合 匹配方括号中的任意字符</li>
<li>小括号 表示优先级</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 中括号 字符集合 匹配方括号中的任意字符</span>
<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^[abc]$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
<span class="token comment">// a || b || c</span>
<span class="token comment">// 大括号 量词符 里面表示重复次数</span>
<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^abc&#123;3&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>   <span class="token comment">// 它只是让c 重复3次 abccc</span>
<span class="token comment">// 小括号 表示优先级</span>
<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(abc)&#123;3&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>  <span class="token comment">//它是让 abc 重复3次</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在线测试正则表达式：<a target="_blank" rel="noopener" href="https://c.runoob.com/">https://c.runoob.com/</a></p>
<hr>
<h2 id="115-预定义类"><a class="markdownIt-Anchor" href="#115-预定义类">#</a> 11.5 预定义类</h2>
<p>预定义类指的是 某些常见模式的简写写法</p>
<table>
<thead>
<tr>
<th style="text-align:left">预定类</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">\d</td>
<td style="text-align:left">匹配 0-9 之间的任一数字，相当于 [0-9]</td>
</tr>
<tr>
<td style="text-align:left">\D</td>
<td style="text-align:left">匹配所有 0-9 以外的字符，相当于 [^0-9]</td>
</tr>
<tr>
<td style="text-align:left">\w</td>
<td style="text-align:left">匹配任意的字母、数字和下划线，相当于 [A-Za-z0-9_]</td>
</tr>
<tr>
<td style="text-align:left">\W</td>
<td style="text-align:left">除所有字母、数字、和下划线以外的字符，相当于 [^A-Za-z0-9_]</td>
</tr>
<tr>
<td style="text-align:left">\s</td>
<td style="text-align:left">匹配空格（包括换行符，制表符，空格符等），相当于 [\t\t\n\v\f]</td>
</tr>
<tr>
<td style="text-align:left">\S</td>
<td style="text-align:left">匹配非空格的字符，相当于 [^\t\r\n\v\f]</td>
</tr>
</tbody>
</table>
<h3 id="表单验证"><a class="markdownIt-Anchor" href="#表单验证">#</a> 表单验证</h3>
<p>分析：</p>
<ol>
<li>手机号码:  <code>/^1[3|4|5|7|8][0-9]&#123;9&#125;$/</code></li>
<li>QQ:  <code>[1-9][0-9]&#123;4,&#125;</code>  (腾讯 QQ 号从 10000 开始), 需要至少 4 个的是 0 不是 10</li>
<li>昵称是中文:  <code>^[\u4e00-\u9fa5]&#123;2,8&#125;$</code></li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>body<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
        <span class="token comment">// 座机号码验证:  全国座机号码  两种格式:   010-12345678  或者  0530-1234567</span>
        <span class="token comment">// 正则里面的或者 符号  |  </span>
        <span class="token comment">// var reg = /^\d&#123;3&#125;-\d&#123;8&#125;|\d&#123;4&#125;-\d&#123;7&#125;$/;</span>
        <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\d&#123;3,4&#125;-\d&#123;7,8&#125;$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<hr>
<h2 id="116-正则表达式中的替换"><a class="markdownIt-Anchor" href="#116-正则表达式中的替换">#</a> 11.6 正则表达式中的替换</h2>
<h3 id="replace-替换"><a class="markdownIt-Anchor" href="#replace-替换">#</a> replace 替换</h3>
<p>replace () 方法可以实现替换字符串操作，用来替换的参数可以是一个字符串或是一个正则表达式</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">stringObject<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regexp<span class="token operator">/</span>substr<span class="token punctuation">,</span>replacement<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ol>
<li>第一个参数：被替换的字符串或者正则表达式</li>
<li>第二个参数：替换为的字符串</li>
<li>返回值是一个替换完毕的新字符串</li>
</ol>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 替换 replace</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'andy和red'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> newStr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'andy'</span><span class="token punctuation">,</span><span class="token string">'baby'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> newStr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">andy</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span><span class="token string">'baby'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="正则表达式参数"><a class="markdownIt-Anchor" href="#正则表达式参数">#</a> 正则表达式参数</h3>
<p><code>/表达式/[switch]</code>  switch 按照什么样的模式来匹配，有三种:</p>
<ul>
<li>g: 全局匹配</li>
<li>i: 忽略大小写</li>
<li>gi: 全局匹配 + 忽略大小写</li>
</ul>
<hr>
<h1 id="浏览器内核"><a class="markdownIt-Anchor" href="#浏览器内核">#</a> 浏览器内核</h1>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/image-20220117213057961.png" alt="image-20220117213057961"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Harry Qu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://harryqu1229.github.io/2022/01/02/Javascript%E8%BF%9B%E9%98%B6(pink)/">https://harryqu1229.github.io/2022/01/02/Javascript%E8%BF%9B%E9%98%B6(pink)/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/frontend/">frontend</a><a class="post-meta__tags" href="/tags/javascript/">javascript</a></div><div class="post_share"><div class="addthis_inline_share_toolbox"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-621848f44e1c3724" async="async"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/01/02/%E5%BA%94%E7%94%A8%E4%BB%A3%E7%A0%81%E5%88%86%E5%B1%82/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default-covers/cat.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Model,View,Controller</div></div></a></div><div class="next-post pull-right"><a href="/2022/01/03/MySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default-covers/forest.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Mysql design protocol</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2021/11/02/ES6-11/" title="My Javascript ES6-11 notes"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default-covers/cat.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-02</div><div class="title">My Javascript ES6-11 notes</div></div></a></div><div><a href="/2022/02/20/JS%E6%A8%A1%E5%9D%97%E5%8C%96/" title="My Javascript modularity notes"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default-covers/cat.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-20</div><div class="title">My Javascript modularity notes</div></div></a></div><div><a href="/2022/02/25/JS%E9%9D%A2%E8%AF%95%E9%A2%98--YK%E8%8F%8C/" title="some JS Frontend Interview Quesitions"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default-covers/home.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-25</div><div class="title">some JS Frontend Interview Quesitions</div></div></a></div><div><a href="/2022/02/27/JS%20DOM,BOM,PC%E7%AB%AF%E5%AE%9E%E4%BE%8B%E7%89%B9%E6%95%88,%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8/" title="My Javascript DOM, BOM, storage etc notes"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default-covers/mountain2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-27</div><div class="title">My Javascript DOM, BOM, storage etc notes</div></div></a></div><div><a href="/2022/01/03/Javascript/" title="My Javascript notes"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default-covers/car.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-03</div><div class="title">My Javascript notes</div></div></a></div><div><a href="/2022/02/21/js,css%E7%AD%89%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/" title="css and JS Frontend Interview Quesitions"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default-covers/hello-world.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-21</div><div class="title">css and JS Frontend Interview Quesitions</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div><div id="comment-switch"><span class="first-comment">Disqus</span><span class="switch-btn"></span><span class="second-comment">Gitalk</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Harry Qu</div><div class="author-info__description">Software Engineering Student</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">158</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">84</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">57</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/HarryQu1229"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://www.linkedin.com/in/harry-qu-a0a38220a" target="_blank" title="LinkedIn"><i class="fab fa-linkedin"></i></a><a class="social-icon" href="https://github.com/HarryQu1229" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:Harryqu666@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="weixin://dl/chat?harry666ya" target="_blank" title="Wechat"><i class="fab fa-weixin"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">be healthy, stay safe</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%AF%BC%E8%AF%BB"><span class="toc-number">1.</span> <span class="toc-text"> 1. 面向对象导读</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#11-es6%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">1.1.</span> <span class="toc-text"> 1.1 ES6 模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-es6-%E6%A8%A1%E5%9D%97%E5%8C%96%E8%A7%84%E8%8C%83"><span class="toc-number">1.1.1.</span> <span class="toc-text"> 什么是 ES6 模块化规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#nodejs-%E4%B8%AD%E4%BD%93%E9%AA%8C-es6-%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">1.1.2.</span> <span class="toc-text"> node.js 中体验 ES6 模块化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-es6-%E6%A8%A1%E5%9D%97%E5%8C%96%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="toc-number">1.2.</span> <span class="toc-text"> 1.2 ES6 模块化的基本语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E5%AF%BC%E5%87%BA%E4%B8%8E%E9%BB%98%E8%AE%A4%E5%AF%BC%E5%85%A5"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 默认导出与默认导入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%89%E9%9C%80%E5%AF%BC%E5%87%BA%E4%B8%8E%E6%8C%89%E9%9C%80%E5%AF%BC%E5%85%A5"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 按需导出与按需导入</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E5%AF%BC%E5%85%A5%E5%B9%B6%E6%89%A7%E8%A1%8C%E6%A8%A1%E5%9D%97%E4%B8%AD%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-number">1.2.3.</span> <span class="toc-text"> 直接导入并执行模块中的代码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-promise"><span class="toc-number">1.3.</span> <span class="toc-text"> 1.3 Promise</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#promise-%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">1.3.1.</span> <span class="toc-text"> Promise 的基本概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E-then-fs-%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"><span class="toc-number">1.3.2.</span> <span class="toc-text"> 基于 then-fs 读取文件内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E-promise-%E6%8C%89%E9%A1%BA%E5%BA%8F%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%85%E5%AE%B9"><span class="toc-number">1.3.3.</span> <span class="toc-text"> 基于 Promise 按顺序读取文件的内容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#promiseall-%E5%92%8Crace-%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.4.</span> <span class="toc-text"> Promise.all () 和.race () 方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E-promise-%E5%B0%81%E8%A3%85%E8%AF%BB%E6%96%87%E4%BB%B6%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.5.</span> <span class="toc-text"> 基于 Promise 封装读文件的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%85%B7%E4%BD%93%E7%9A%84%E5%BC%82%E6%AD%A5%E6%93%8D%E4%BD%9C"><span class="toc-number">1.3.6.</span> <span class="toc-text"> 创建具体的异步操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96then-%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%AE%9E%E5%8F%82"><span class="toc-number">1.3.7.</span> <span class="toc-text"> 获取.then 的两个实参</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%83%E7%94%A8resolve-%E5%92%8Creject-%E5%9B%9E%E8%B0%83%E5%87%BD%E6%95%B0"><span class="toc-number">1.3.8.</span> <span class="toc-text"> 调用 resolve 和 reject 回调函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-asyncawait"><span class="toc-number">1.4.</span> <span class="toc-text"> 1.4 async&#x2F;await</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#asyncawait-%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">1.4.1.</span> <span class="toc-text"> async&#x2F;await 的基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#asyncawait-%E7%9A%84%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.4.2.</span> <span class="toc-text"> async&#x2F;await 的使用注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-eventloop"><span class="toc-number">1.5.</span> <span class="toc-text"> 1.5 EventLoop</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%8C%E6%AD%A5%E4%BB%BB%E5%8A%A1%E5%92%8C%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1"><span class="toc-number">1.5.1.</span> <span class="toc-text"> 同步任务和异步任务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E5%90%88-eventloop-%E5%88%86%E6%9E%90%E8%BE%93%E5%87%BA%E7%9A%84%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.5.2.</span> <span class="toc-text"> 结合 EventLoop 分析输出的顺序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-%E5%AE%8F%E4%BB%BB%E5%8A%A1%E5%92%8C%E5%BE%AE%E4%BB%BB%E5%8A%A1"><span class="toc-number">1.6.</span> <span class="toc-text"> 1.6 宏任务和微任务</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%AE%8F%E4%BB%BB%E5%8A%A1%E5%92%8C%E5%BE%AE%E4%BB%BB%E5%8A%A1"><span class="toc-number">1.6.1.</span> <span class="toc-text"> 什么是宏任务和微任务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%8F%E4%BB%BB%E5%8A%A1%E5%92%8C%E5%BE%AE%E4%BB%BB%E5%8A%A1%E7%9A%84%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.6.2.</span> <span class="toc-text"> 宏任务和微任务的执行顺序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E6%9E%90%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81%E8%BE%93%E5%87%BA%E7%9A%84%E9%A1%BA%E5%BA%8F"><span class="toc-number">1.6.3.</span> <span class="toc-text"> 分析以下代码输出的顺序</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-api-%E6%8E%A5%E5%8F%A3%E6%A1%88%E4%BE%8B"><span class="toc-number">1.7.</span> <span class="toc-text"> 1.7 API 接口案例</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-es6%E4%B8%AD%E7%9A%84%E7%B1%BB%E5%92%8C%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.</span> <span class="toc-text"> 2. ES6 中的类和对象</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#21-%E5%AF%B9%E8%B1%A1"><span class="toc-number">2.1.</span> <span class="toc-text"> 2.1 对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-%E7%B1%BB"><span class="toc-number">2.2.</span> <span class="toc-text"> 2.2 类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%B1%BB"><span class="toc-number">2.2.1.</span> <span class="toc-text"> 创建类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#constructor-%E6%9E%84%E9%80%A0%E5%87%BD"><span class="toc-number">2.2.2.</span> <span class="toc-text"> constructor () 构造函</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E4%B8%AD%E6%B7%BB%E5%8A%A0%E6%96%B9%E6%B3%95"><span class="toc-number">2.2.3.</span> <span class="toc-text"> 类中添加方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="toc-number">2.2.4.</span> <span class="toc-text"> 类的继承</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#super%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">2.2.5.</span> <span class="toc-text"> super 关键字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E4%B8%AA%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-number">2.2.6.</span> <span class="toc-text"> 三个注意点</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%92%8C%E5%8E%9F%E5%9E%8B"><span class="toc-number">3.</span> <span class="toc-text"> 3. 构造函数和原型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#31-%E6%A6%82%E5%BF%B5"><span class="toc-number">3.1.</span> <span class="toc-text"> 3.1 概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#32-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">3.2.</span> <span class="toc-text"> 3.2 构造函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E6%88%90%E5%91%98%E5%92%8C%E5%AE%9E%E4%BE%8B%E6%88%90%E5%91%98"><span class="toc-number">3.2.1.</span> <span class="toc-text"> 静态成员和实例成员</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%9A%84%E9%97%AE%E9%A2%98"><span class="toc-number">3.2.2.</span> <span class="toc-text"> 构造函数的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%8E%9F%E5%9E%8B-prototype"><span class="toc-number">3.2.3.</span> <span class="toc-text"> 构造函数原型 prototype</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%8E%9F%E5%9E%8B-proto"><span class="toc-number">3.2.4.</span> <span class="toc-text"> 对象原型 proto</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#constructor-%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">3.2.5.</span> <span class="toc-text"> constructor 构造函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-%E5%AE%9E%E4%BE%8B-%E5%8E%9F%E5%9E%8B%E5%AF%B9%E8%B1%A1%E4%B8%89%E8%80%85%E5%85%B3%E7%B3%BB"><span class="toc-number">3.2.6.</span> <span class="toc-text"> 构造函数、实例、原型对象三者关系</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#33-%E5%8E%9F%E5%9E%8B%E9%93%BE"><span class="toc-number">3.3.</span> <span class="toc-text"> 3.3 原型链</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E8%A7%84%E5%88%99"><span class="toc-number">3.3.1.</span> <span class="toc-text"> 查找规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E5%AF%B9%E8%B1%A1this%E6%8C%87%E5%90%91"><span class="toc-number">3.3.2.</span> <span class="toc-text"> 原型对象 this 指向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E5%86%85%E7%BD%AE%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.3.3.</span> <span class="toc-text"> 扩展内置对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#34-%E7%BB%A7%E6%89%BF"><span class="toc-number">3.4.</span> <span class="toc-text"> 3.4 继承</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#call"><span class="toc-number">3.4.1.</span> <span class="toc-text">  call()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%80%9F%E7%94%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E7%BB%A7%E6%89%BF%E7%88%B6%E7%B1%BB%E5%9E%8B%E5%B1%9E%E6%80%A7"><span class="toc-number">3.4.2.</span> <span class="toc-text"> 借用构造函数继承父类型属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%80%9F%E7%94%A8%E5%8E%9F%E5%9E%8B%E5%AF%B9%E8%B1%A1%E7%BB%A7%E6%89%BF%E7%88%B6%E7%B1%BB%E5%9E%8B%E6%96%B9%E6%B3%95"><span class="toc-number">3.4.3.</span> <span class="toc-text"> 借用原型对象继承父类型方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="toc-number">3.4.4.</span> <span class="toc-text"> 类的本质</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-es5%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95"><span class="toc-number">4.</span> <span class="toc-text"> 4. ES5 新增方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#41-%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95"><span class="toc-number">4.1.</span> <span class="toc-text"> 4.1 数组方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#foreach"><span class="toc-number">4.1.1.</span> <span class="toc-text"> forEach()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#filter%E7%AD%9B%E9%80%89%E6%95%B0%E7%BB%84"><span class="toc-number">4.1.2.</span> <span class="toc-text"> filter () 筛选数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#some"><span class="toc-number">4.1.3.</span> <span class="toc-text"> some()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#42-%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95"><span class="toc-number">4.2.</span> <span class="toc-text"> 4.2 字符串方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#43-%E5%AF%B9%E8%B1%A1%E6%96%B9%E6%B3%95"><span class="toc-number">4.3.</span> <span class="toc-text"> 4.3 对象方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#objectkeys"><span class="toc-number">4.3.1.</span> <span class="toc-text"> Object.keys()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#objectdefineproperty"><span class="toc-number">4.3.2.</span> <span class="toc-text"> Object.defineProperty()</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E5%87%BD%E6%95%B0%E8%BF%9B%E9%98%B6"><span class="toc-number">5.</span> <span class="toc-text"> 5. 函数进阶</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#51-%E5%87%BD%E6%95%B0%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">5.1.</span> <span class="toc-text"> 5.1 函数的定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#52-%E5%87%BD%E6%95%B0%E7%9A%84%E8%B0%83%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">5.2.</span> <span class="toc-text"> 5.2 函数的调用方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#53-%E5%87%BD%E6%95%B0%E5%86%85this%E7%9A%84%E6%8C%87%E5%90%91"><span class="toc-number">5.3.</span> <span class="toc-text"> 5.3 函数内 this 的指向</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#54-%E6%94%B9%E5%8F%98%E5%87%BD%E6%95%B0%E5%86%85%E9%83%A8this%E6%8C%87%E5%90%91"><span class="toc-number">5.4.</span> <span class="toc-text"> 5.4 改变函数内部 this 指向</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#call-%E6%96%B9%E6%B3%95"><span class="toc-number">5.4.1.</span> <span class="toc-text"> call () 方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#apply%E6%96%B9%E6%B3%95"><span class="toc-number">5.4.2.</span> <span class="toc-text"> apply () 方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bind%E6%96%B9%E6%B3%95"><span class="toc-number">5.4.3.</span> <span class="toc-text"> bind () 方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#call-apply-bind%E6%80%BB%E7%BB%93"><span class="toc-number">5.4.4.</span> <span class="toc-text"> call apply bind 总结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.</span> <span class="toc-text"> 6. 严格模式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#61-%E5%BC%80%E5%90%AF%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.1.</span> <span class="toc-text"> 6.1 开启严格模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E8%84%9A%E6%9C%AC%E5%BC%80%E5%90%AF%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.1.1.</span> <span class="toc-text"> 为脚本开启严格模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E5%87%BD%E6%95%B0%E5%BC%80%E5%90%AF%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F"><span class="toc-number">6.1.2.</span> <span class="toc-text"> 为函数开启严格模式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#62-%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F%E4%B8%AD%E7%9A%84%E5%8F%98%E5%8C%96"><span class="toc-number">6.2.</span> <span class="toc-text"> 6.2 严格模式中的变化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E8%A7%84%E5%AE%9A"><span class="toc-number">6.2.1.</span> <span class="toc-text"> 变量规定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F%E4%B8%8Bthis%E6%8C%87%E5%90%91%E9%97%AE%E9%A2%98"><span class="toc-number">6.2.2.</span> <span class="toc-text"> 严格模式下 this 指向问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%8F%98%E5%8C%96"><span class="toc-number">6.2.3.</span> <span class="toc-text"> 函数变化</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0"><span class="toc-number">7.</span> <span class="toc-text"> 7. 高阶函数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E9%97%AD%E5%8C%85"><span class="toc-number">8.</span> <span class="toc-text"> 8. 闭包</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#81-%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">8.1.</span> <span class="toc-text"> 8.1 变量作用域</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#82-%E4%BB%80%E4%B9%88%E6%98%AF%E9%97%AD%E5%8C%85"><span class="toc-number">8.2.</span> <span class="toc-text"> 8.2 什么是闭包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%A8chrome%E4%B8%AD%E8%B0%83%E8%AF%95%E9%97%AD%E5%8C%85"><span class="toc-number">8.2.1.</span> <span class="toc-text"> 在 chrome 中调试闭包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AD%E5%8C%85%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">8.2.2.</span> <span class="toc-text"> 闭包的作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AD%E5%8C%85%E7%BB%83%E4%B9%A0"><span class="toc-number">8.2.3.</span> <span class="toc-text"> 闭包练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#83-%E9%97%AD%E5%8C%85%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%80%BB%E7%BB%93%E5%86%85%E5%AD%98%E6%B3%84%E9%9C%B2%E4%BB%A5%E5%8F%8A%E5%86%85%E5%AD%98%E6%BA%A2%E5%87%BA"><span class="toc-number">8.3.</span> <span class="toc-text"> 8.3 闭包生命周期，总结，内存泄露以及内存溢出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-number">8.4.</span> <span class="toc-text"> 面试题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93%E9%87%8D%E8%A6%81"><span class="toc-number">8.5.</span> <span class="toc-text"> 总结 (重要！)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E9%80%92%E5%BD%92"><span class="toc-number">9.</span> <span class="toc-text"> 9. 递归</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#10-%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">10.</span> <span class="toc-text"> 10. 浅拷贝和深拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#101-%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-number">10.1.</span> <span class="toc-text"> 10.1 浅拷贝</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#102-%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">10.2.</span> <span class="toc-text"> 10.2 深拷贝</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#11-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">11.</span> <span class="toc-text"> 11. 正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#111-%E7%89%B9%E7%82%B9"><span class="toc-number">11.1.</span> <span class="toc-text"> 11.1 特点</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#112-%E5%88%9B%E5%BB%BA%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">11.2.</span> <span class="toc-text"> 11.2 创建正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E8%B0%83%E7%94%A8-regexp-%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%88%9B%E5%BB%BA"><span class="toc-number">11.2.1.</span> <span class="toc-text"> 通过调用 RegExp 对象的构造函数创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E5%AD%97%E9%9D%A2%E9%87%8F%E5%88%9B%E5%BB%BA"><span class="toc-number">11.2.2.</span> <span class="toc-text"> 通过字面量创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F-test"><span class="toc-number">11.2.3.</span> <span class="toc-text"> 测试正则表达式 test</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#113-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%AD%E7%9A%84%E7%89%B9%E6%AE%8A%E5%9C%A8%E5%AD%97%E7%AC%A6"><span class="toc-number">11.3.</span> <span class="toc-text"> 11.3 正则表达式中的特殊在字符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%B9%E7%95%8C%E7%AC%A6"><span class="toc-number">11.3.1.</span> <span class="toc-text"> 边界符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E7%B1%BB"><span class="toc-number">11.3.2.</span> <span class="toc-text"> 字符类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8F%E8%AF%8D%E7%AC%A6"><span class="toc-number">11.3.3.</span> <span class="toc-text"> 量词符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%90%8D%E9%AA%8C%E8%AF%81"><span class="toc-number">11.3.4.</span> <span class="toc-text"> 用户名验证</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#114-%E6%8B%AC%E5%8F%B7%E6%80%BB%E7%BB%93"><span class="toc-number">11.4.</span> <span class="toc-text"> 11.4 括号总结</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#115-%E9%A2%84%E5%AE%9A%E4%B9%89%E7%B1%BB"><span class="toc-number">11.5.</span> <span class="toc-text"> 11.5 预定义类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81"><span class="toc-number">11.5.1.</span> <span class="toc-text"> 表单验证</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#116-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%AD%E7%9A%84%E6%9B%BF%E6%8D%A2"><span class="toc-number">11.6.</span> <span class="toc-text"> 11.6 正则表达式中的替换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#replace-%E6%9B%BF%E6%8D%A2"><span class="toc-number">11.6.1.</span> <span class="toc-text"> replace 替换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8F%82%E6%95%B0"><span class="toc-number">11.6.2.</span> <span class="toc-text"> 正则表达式参数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E5%86%85%E6%A0%B8"><span class="toc-number">12.</span> <span class="toc-text"> 浏览器内核</span></a></li></ol></div></div><div class="card-widget card-map"><div class="card-content"><div class="item-headline"><i class="fa fa-globe-asia" aria-hidden="true"></i><span>Visitor Map</span></div><script id="clstr_globe" type="text/javascript" defer="defer" src="//clustrmaps.com/globe.js?d=4LA950xi3DtQgUHPlkO0mo-n_QgrcOu-1BIiVpExg7k"></script></div></div><div class="card-widget card-pixiv"><div class="card-content"><div class="item-headline"><i class="fa fa-image" aria-hidden="true"></i><span>Pixiv Top50</span><iframe src="https://cloud.mokeyjay.com/pixiv" frameborder="0" style="width:99%;height:380px;margin:0;"></iframe></div></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/07/28/Maven/" title="My Maven notes"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default-covers/hello-world.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="My Maven notes"/></a><div class="content"><a class="title" href="/2022/07/28/Maven/" title="My Maven notes">My Maven notes</a><time datetime="2022-07-27T12:00:00.000Z" title="Created 2022-07-28 00:00:00">2022-07-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/25/nodejs/" title="Nodejs notes"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default-covers/town.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nodejs notes"/></a><div class="content"><a class="title" href="/2022/07/25/nodejs/" title="Nodejs notes">Nodejs notes</a><time datetime="2022-07-24T12:00:00.000Z" title="Created 2022-07-25 00:00:00">2022-07-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/12/%E7%AE%97%E6%B3%95%E7%BB%88%E6%9E%81%E6%8C%87%E5%8D%97/" title="My ultimate data structure and algorithm guide"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default-covers/statue.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="My ultimate data structure and algorithm guide"/></a><div class="content"><a class="title" href="/2022/06/12/%E7%AE%97%E6%B3%95%E7%BB%88%E6%9E%81%E6%8C%87%E5%8D%97/" title="My ultimate data structure and algorithm guide">My ultimate data structure and algorithm guide</a><time datetime="2022-06-11T12:00:00.000Z" title="Created 2022-06-12 00:00:00">2022-06-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="Design Patterns"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default-covers/home.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Design Patterns"/></a><div class="content"><a class="title" href="/2022/06/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="Design Patterns">Design Patterns</a><time datetime="2022-06-11T12:00:00.000Z" title="Created 2022-06-12 00:00:00">2022-06-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/06/11/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%20-%20%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95/" title="Design Patterns - Factory Method"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default-covers/home.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Design Patterns - Factory Method"/></a><div class="content"><a class="title" href="/2022/06/11/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%20-%20%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95/" title="Design Patterns - Factory Method">Design Patterns - Factory Method</a><time datetime="2022-06-10T12:00:00.000Z" title="Created 2022-06-11 00:00:00">2022-06-11</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By Harry Qu</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="Chat"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Local search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'https://harryqu1229.github.io/2022/01/02/Javascript%E8%BF%9B%E9%98%B6(pink)/'
    this.page.identifier = '2022/01/02/Javascript进阶(pink)/'
    this.page.title = 'My Javascript Advanced notes'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://harry-study-blog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
}

if ('Disqus' === 'Disqus' || !true) {
  if (true) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '5df1e915e0fa867b50de',
      clientSecret: 'ce1cb793fe49078ee9d0102d3326d0d50ff6937b',
      repo: 'blog-comments-storage',
      owner: 'HarryQu1229',
      admin: ['HarryQu1229'],
      id: 'fcf3438b2ce48e56c969bfc64453469e',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Disqus' === 'Gitalk' || !true) {
  if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[image]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[link]') // replace url
    content = content.replace(/<code>.*?<\/code>/gi, '[code]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    fetch('https://disqus.com/api/3.0/forums/listPosts.json?forum=harry-study-blog&related=thread&limit=6&api_key=B5XFmdGuVaYDW7OIBakffpXoKorvphwRiwONIol4puEtr8YiwYAMAk2K7QcExNLY')
      .then(response => response.json())
      .then(data => {
        const disqusArray = data.response.map(item => {
          return {
            'avatar': item.author.avatar.cache,
            'content': changeContent(item.message),
            'nick': item.author.name,
            'url': item.url,
            'date': item.createdAt
          }
        })

        saveToLocal.set('disqus-newest-comments', JSON.stringify(disqusArray), 10/(60*24))
        generateHtml(disqusArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "Unable to get the data, please make sure the settings are correct."
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick}</span><time> / ${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += 'No Comment'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('disqus-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="2809513713" data-server="netease" data-type="playlist" data-autoplay="false" data-fixed="true" data-order="random" data-theme="#e9ccd3"> </div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script id="canvas_nest" defer="defer" color="255,255,255" opacity="0.7" zIndex="-1" count="99" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script>((window.gitter = {}).chat = {}).options = {
  disableDefaultChat: true,
};
document.addEventListener('gitter-sidecar-ready', (e) => {
  const GitterChat = e.detail.Chat
  let chat

  function initGitter () {
    chat = new GitterChat({
      room: 'HarryStudyBlog/community',
      activationElement: '#chat_btn'
    });
  }

  initGitter()

  if (true) {
    document.addEventListener('pjax:complete', () => {
      chat.destroy()
      initGitter()
    })
  }

})</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="async" defer="defer"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="ghbdages" style="overflow:hidden;max-height:90px;height:auto;text-align:center;margin-top:10px"><div class="swiper-wrapper"><div class="swiper-slide"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="博客框架为Hexo_v5.4.0"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="主题版本Butterfly_v3.8.2"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="本站项目由Github托管"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a></div><div class="swiper-slide"><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></div></div></div><style>a.github-badge:hover:before {display:none}</style>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-footer-beautify/lib/swiperbdage_init.min.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":300,"height":450},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>