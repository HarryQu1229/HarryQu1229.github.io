<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>JavaWeb 尚硅谷老版 | Harry World</title><meta name="keywords" content="javaweb,java,web"><meta name="author" content="Harry Qu"><meta name="copyright" content="Harry Qu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="# Servlet 基本使用 本文介绍了 Servlet 的基本使用，适合初学者学习时参考，相信初学者看完一定有收获～ 还可看看博主的其他文章，超全面总结： MySQL 必知必会，传送地址：MySQL 的使用，看这篇就够了  JavaScript 必知必会，传送地址：JavaScript 小白必看 # 文章目录  Servlet 基本使用   一、Servlet 介绍 二、手动实现 Servlet">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaWeb 尚硅谷老版">
<meta property="og:url" content="https://harryqu1229.github.io/2021/12/12/JavaWeb%E5%B0%9A%E7%A1%85%E8%B0%B7%E8%80%81%E7%89%88(%E4%B8%8D%E5%8C%85%E5%90%ABjsp%E7%AD%89)/index.html">
<meta property="og:site_name" content="Harry World">
<meta property="og:description" content="# Servlet 基本使用 本文介绍了 Servlet 的基本使用，适合初学者学习时参考，相信初学者看完一定有收获～ 还可看看博主的其他文章，超全面总结： MySQL 必知必会，传送地址：MySQL 的使用，看这篇就够了  JavaScript 必知必会，传送地址：JavaScript 小白必看 # 文章目录  Servlet 基本使用   一、Servlet 介绍 二、手动实现 Servlet">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://w.wallhaven.cc/full/k7/wallhaven-k7v9yq.png">
<meta property="article:published_time" content="2021-12-11T11:00:00.000Z">
<meta property="article:modified_time" content="2022-02-25T15:40:13.886Z">
<meta property="article:author" content="Harry Qu">
<meta property="article:tag" content="web">
<meta property="article:tag" content="java">
<meta property="article:tag" content="javaweb">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://w.wallhaven.cc/full/k7/wallhaven-k7v9yq.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://harryqu1229.github.io/2021/12/12/JavaWeb%E5%B0%9A%E7%A1%85%E8%B0%B7%E8%80%81%E7%89%88(%E4%B8%8D%E5%8C%85%E5%90%ABjsp%E7%AD%89)/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":100,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#C78550","bgDark":"#c08eaf","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JavaWeb 尚硅谷老版',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-02-26 04:40:13'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><style type="text/css">.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body{left:-66px!important}.aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover{left:0!important}</style><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">Loading...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/6aca34ee52f40fe1b2d637474f90111e2c151939/notes-img/%E5%85%B6%E4%B8%AD%E5%8C%85%E6%8B%AC%E5%9B%BE%E7%89%87%EF%BC%9A%7B%7B%20pinTitle%20%7D%7D_m6kogp.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">171</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">89</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">60</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-graduation-cap"></i><span> Journey</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> Hobbies</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/Photos/"><i class="fa-fw fas fa-images"></i><span> Photos</span></a></li><li><a class="site-page child" href="/Videos/"><i class="fa-fw fa-regular fa-play"></i><span> Videos</span></a></li><li><a class="site-page child" href="/Movies/"><i class="fa-fw fas fa-video"></i><span> Movies</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://www.javaindia.in/blog/wp-content/uploads/2020/09/java-web-development.png')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Harry World</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> Search</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-graduation-cap"></i><span> Journey</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> Hobbies</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/Photos/"><i class="fa-fw fas fa-images"></i><span> Photos</span></a></li><li><a class="site-page child" href="/Videos/"><i class="fa-fw fa-regular fa-play"></i><span> Videos</span></a></li><li><a class="site-page child" href="/Movies/"><i class="fa-fw fas fa-video"></i><span> Movies</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Links</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">JavaWeb 尚硅谷老版</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-12-11T11:00:00.000Z" title="Created 2021-12-12 00:00:00">2021-12-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2022-02-25T15:40:13.886Z" title="Updated 2022-02-26 04:40:13">2022-02-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Backend/">Backend</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Backend/javaweb/">javaweb</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">15.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>60min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JavaWeb 尚硅谷老版"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">Comments:</span><span class="disqus-comment-count"><a href="https://harryqu1229.github.io/2021/12/12/JavaWeb%E5%B0%9A%E7%A1%85%E8%B0%B7%E8%80%81%E7%89%88(%E4%B8%8D%E5%8C%85%E5%90%ABjsp%E7%AD%89)/#disqus_thread"></a></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="servlet-基本使用"><a class="markdownIt-Anchor" href="#servlet-基本使用">#</a> Servlet 基本使用</h1>
<p>本文介绍了 Servlet 的基本使用，适合初学者学习时参考，相信初学者看完一定有收获～</p>
<p>还可看看博主的其他文章，超全面总结：</p>
<p><strong>MySQL 必知必会，传送地址：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_49343190/article/details/107313699">MySQL 的使用，看这篇就够了</a></strong><br>
<strong> JavaScript 必知必会，传送地址：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_49343190/article/details/107510571">JavaScript 小白必看</a></strong></p>
<h3 id="文章目录"><a class="markdownIt-Anchor" href="#文章目录">#</a> 文章目录</h3>
<ul>
<li><a href="#Servlet__0">Servlet 基本使用</a></li>
<li>
<ul>
<li><a href="#Servlet_9">一、Servlet 介绍</a></li>
<li><a href="#Servlet_14">二、手动实现 Servlet 程序</a></li>
<li><a href="#Servlet_61">三、Servlet 程序的访问原理</a></li>
<li><a href="#Servlet_65">四、Servlet 程序的常见错误</a></li>
<li>
<ul>
<li><a href="#1_urlpattern_66">1. url-pattern 中配置的路径没有以斜杠打头</a></li>
<li><a href="#2_servletname_68">2. servlet-name 中的两个映射值不一致</a></li>
<li><a href="#3_servletclass_70">3. servlet-class 标签的全类名配置错误</a></li>
</ul>
</li>
<li><a href="#Servlet_72">五、Servlet 的生命周期</a></li>
<li><a href="#GETPOST_80">六、GET 和 POST 请求的不同处理</a></li>
<li><a href="#HttpServletServlet_111">七、继承 HttpServlet 类实现 Servlet 程序</a></li>
<li><a href="#IDEAServlet_159">八、使用 IDEA 创建 Servlet 程序</a></li>
<li><a href="#Servlet_166">九、Servlet 接口的继承体系</a></li>
<li><a href="#ServletConfig_168">十、ServletConfig 接口</a></li>
<li><a href="#ServletContext_229">十一、ServletContext 接口</a></li>
<li><a href="#HTTP_310">十二、HTTP 协议</a></li>
<li>
<ul>
<li><a href="#1__311">1. 含义</a></li>
<li><a href="#2_HTTP_313">2. 请求的 HTTP 协议格式</a></li>
<li><a href="#3_HTTP_347">3. 响应的 HTTP 协议格式</a></li>
<li><a href="#4__349">4. 常见的响应码</a></li>
<li><a href="#5_MIME_355">5. MIME 类型说明</a></li>
</ul>
</li>
<li><a href="#HTTP_358">十三、谷歌浏览器查看 HTTP 协议</a></li>
<li><a href="#HttpServletRequest_366">十四、HttpServletRequest 类</a></li>
<li><a href="#_459">十五、请求转发</a></li>
<li><a href="#base_509">十六、base 标签的作用</a></li>
<li><a href="#_598">十七、”/” 在不同情况下的不同意义</a></li>
<li><a href="#HttpServletResponse_607">十八、HttpServletResponse 类</a></li>
<li><a href="#_634">十九、请求重定向</a></li>
</ul>
</li>
</ul>
<h2 id="一-servlet介绍"><a class="markdownIt-Anchor" href="#一-servlet介绍">#</a> 一、Servlet 介绍</h2>
<ol>
<li>Servlet 是 JavaEE 规范 (接口) 之一</li>
<li>Servlet 是 JavaWeb 三大组件之一，三大组件分别是 Servlet 程序、Filter 过滤器、Listener 监听器</li>
<li>Servlet 是运行在服务器上的一个 Java 程序，可以接收客户端发来的请求，并响应数据给客户端</li>
</ol>
<h2 id="二-手动实现servlet程序"><a class="markdownIt-Anchor" href="#二-手动实现servlet程序">#</a> 二、手动实现 Servlet 程序</h2>
<ol>
<li>编写一个类实现 Servlet 接口，并重写 service 方法处理请求、响应数据</li>
<li>在 WEB-INF 文件夹中的 web.xml 文件中配置 Servlet 程序的访问地址</li>
</ol>
<p>代码演示：1. 在 src 下创建一个 TestServlet 类</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestServlet</span> <span class="token keyword">implements</span> <span class="token class-name">Servlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"TestServlet被访问了!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码演示：2. 在 web.xml 中的配置</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>
         <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd<span class="token punctuation">"</span></span>
         <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>4.0<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--内容写在&lt;web-app>&lt;/web-app>中--></span>
    <span class="token comment">&lt;!--servlet标签给Tomcat配置Servlet程序--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!--servlet-name标签给Servlet程序起一个别名(一般是类名)--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>TestServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!--servlet-class标签是Servlet程序的全类名--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.qizegao.servlet.TestServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--servlet-mapping标签是servlet的映射，给Servlet程序配置访问地址--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!--此时servlet-name标签要与上一个servlet-name标签中相同--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>TestServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!--url-pattern标签配置访问地址:
            /在服务器解析时表示为Tomcat的工程路径(在Edit Configurations中修改)，
            /Test代表默认路径/Test，即http://localhost:8080/MyTest/Test，
            也就是说在浏览器的地址栏中输入上述路径访问到的是TestServlet类--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/Test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span> //任意起名，用这个名字来访问指定类
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">></span></span>
运行结果：
点击绿色按钮开启Tomcat服务器之后，会自动打开默认的地址http://localhost:8080/MyTest，
在地址栏继续输入/Test，会执行指定类的service方法，控制台输出：TestServlet被访问了!
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="三-servlet程序的访问原理"><a class="markdownIt-Anchor" href="#三-servlet程序的访问原理">#</a> 三、Servlet 程序的访问原理</h2>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808124558943.png" alt=""></p>
<h2 id="四-servlet程序的常见错误"><a class="markdownIt-Anchor" href="#四-servlet程序的常见错误">#</a> 四、Servlet 程序的常见错误</h2>
<h3 id="1-url-pattern中配置的路径没有以斜杠打头"><a class="markdownIt-Anchor" href="#1-url-pattern中配置的路径没有以斜杠打头">#</a> 1. url-pattern 中配置的路径没有以斜杠打头</h3>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808124613250.png" alt=""></p>
<h3 id="2-servlet-name中的两个映射值不一致"><a class="markdownIt-Anchor" href="#2-servlet-name中的两个映射值不一致">#</a> 2. servlet-name 中的两个映射值不一致</h3>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808124617445.png" alt=""></p>
<h3 id="3-servlet-class标签的全类名配置错误"><a class="markdownIt-Anchor" href="#3-servlet-class标签的全类名配置错误">#</a> 3. servlet-class 标签的全类名配置错误</h3>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808124622475.png" alt=""></p>
<h2 id="五-servlet的生命周期"><a class="markdownIt-Anchor" href="#五-servlet的生命周期">#</a> 五、Servlet 的生命周期</h2>
<p>Servlet 程序被访问以后按以下顺序执行：</p>
<ol>
<li>执行 Servlet 程序的构造方法</li>
<li>执行 init 方法</li>
<li>执行 service 方法</li>
<li>执行 destroy 方法<br>
其中 1 和 2 是在初次访问并创建 Servlet 程序时会执行 (每次启动服务只执行一次)，第 3 步每次刷新 (访问) 都会执行，第 4 步点击停止时会执行一次</li>
</ol>
<h2 id="六-get和post请求的不同处理"><a class="markdownIt-Anchor" href="#六-get和post请求的不同处理">#</a> 六、GET 和 POST 请求的不同处理</h2>
<p>代码演示：1. 在 src 目录下创建此类</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestServlet</span> <span class="token keyword">implements</span> <span class="token class-name">Servlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//转换的原因：HttpServletRequest有getMethod方法，可以得到请求的类型</span>
        <span class="token class-name">HttpServletRequest</span> httpServletRequest <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> servletRequest<span class="token punctuation">;</span>
        <span class="token class-name">String</span> method <span class="token operator">=</span> httpServletRequest<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//method值为GET或POST，取决于表单提交的method</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"POST"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"POST方式"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>method<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"GET方式"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码演示：2. 在 web 目录下创建 Test.html 页面</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://localhost:8080/MyTest/Test<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!--action属性值与web.xml中的&lt;url-pattern>标签内容一致，用于访问到service方法--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：服务器启动之后，在浏览器的地址栏中的后缀加上 Test.html，即可访问此页面，点击提交标签，即可跳转到 http://localhost:8080/MyTest/Test，执行 service 方法，控制台输出：POST 方式</p>
<h2 id="七-继承httpservlet类实现servlet程序"><a class="markdownIt-Anchor" href="#七-继承httpservlet类实现servlet程序">#</a> 七、继承 HttpServlet 类实现 Servlet 程序</h2>
<p>在实际的项目开发中，都是使用继承 HttpServlet 类实现 Servlet 程序的方式，步骤如下：</p>
<ol>
<li>编写一个类继承 HttpServlet 类</li>
<li>根据需求重写 doGet 或 doPost 方法，由 service 方法根据表单的 method 属性值调用二者之一</li>
<li>到 web.xml 中配置 Servlet 程序的访问地址</li>
</ol>
<p>代码演示：1. 在 src 目录下创建此类</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestServlet2</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"doGet方法执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"doPost方法执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//HttpServlet的service方法会根据method方式调用二者之一</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码演示：2. 在 web.xml 中继续写配置</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--不用删除原来的servlet标签，在&lt;web-app>标签中继续写servlet标签--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>TestServlet2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.qizegao.servlet.TestServlet2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>TestServlet2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/Test2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码演示：3. 在 web 中创建 Test.html 页面</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://localhost:8080/MyTest/Test2<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!--action属性值与web.xml中的&lt;url-pattern>标签内容一致，用于访问到service方法--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：服务器启动之后，在浏览器的地址栏中的后缀加上 Test.html，即可访问此页面，点击提交标签， 即可跳转到 http://localhost:8080/MyTest/Test2，执行 service 方法，进而执行 doPost 方法</p>
<h2 id="八-使用idea创建servlet程序"><a class="markdownIt-Anchor" href="#八-使用idea创建servlet程序">#</a> 八、使用 IDEA 创建 Servlet 程序</h2>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808124804402.png" alt=""></p>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808124813791.png" alt=""></p>
<p>创建之后，会在包下创建此类 (类名为全类名中的类名)，此类继承于 HttpServlet 类，其中有 doGet 和 doPost 方法 (无函数体)，并自动的在 web.xml 文件中补充新的标签，但无标签，需自己补充</p>
<h2 id="九-servlet接口的继承体系"><a class="markdownIt-Anchor" href="#九-servlet接口的继承体系">#</a> 九、Servlet 接口的继承体系</h2>
<p><img src="https://img-blog.csdnimg.cn/20200808124828641.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTM0MzE5MA==,size_16,color_FFFFFF,t_70" alt=""></p>
<h2 id="十-servletconfig接口"><a class="markdownIt-Anchor" href="#十-servletconfig接口">#</a> 十、ServletConfig 接口</h2>
<ol>
<li>
<p>从名字来看，得知此接口中是 Servlet 程序的配置信息：<br>
(1) Servlet 程序和 ServletConfig 对象都是由 Tomcat 负责创建，编程人员负责使用<br>
 (2) Servlet 程序默认是第一次访问时创建，<strong>每个 Servlet 程序创建时对应的创建 ServletConfig 对象</strong>，二者相互对应，<strong>某个 Servlet 程序只可以获得他对应的 ServletConfig 对象，无法获得别的 Servlet 程序的 ServletConfig 对象</strong></p>
</li>
<li>
<p>ServletConfig 接口的三大作用：<br>
(1) 可以获取 Servlet 程序的别名 (即 web.xml 的的内容)<br>
(2) 可以获取 web.xml 的初始化参数的值<br>
 (3) 可以获取 ServletContext 对象</p>
</li>
</ol>
<p>代码演示：1. 在 web.xml 中继续写配置 (写在标签中)</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>TestServlet4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.qizegao.servlet.TestServlet4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--&lt;init-param>是初始化参数，每个servlet标签中都可以有，一个servlet标签中可以有多个--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!--参数名--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>username<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>
        <span class="token comment">&lt;!--参数值--></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>url<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>jdbc:mysql:localhost:3306/test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>TestServlet4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/Test4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码演示：2. 在 src 目录下创建此类</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestServlet4</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>  <span class="token comment">//使用init方法的原因：1.一定会执行 2.参数中有ServletConfig对象</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> config<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//1.获取Servlet程序的别名</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"此程序的别名是："</span> <span class="token operator">+</span> config<span class="token punctuation">.</span><span class="token function">getServletName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.获取初始化参数init-param，该方法获取指定的参数名的值</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"初始化参数username的值是："</span> <span class="token operator">+</span> config<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"初始化参数url的值是："</span> <span class="token operator">+</span> config<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3.获取ServletContext对象</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">/*运行结果(浏览器地址栏输入http://localhost:8080/MyTest/Test4)：
      此程序的别名是：TestServlet4
      初始化参数username的值是：root
      初始化参数url的值是：jdbc:mysql:localhost:3306/test
      org.apache.catalina.core.ApplicationContextFacade@64d62c61 */</span>
<span class="token punctuation">&#125;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><strong><mark>注意：重写 init 方法时，必须要在函数体内写：super.init (config);</mark></strong><br>
 原因：父类 GenericServlet 中的 init 方法将参数 config 保存起来，子类若不调用则无法保存</p>
<h2 id="十一-servletcontext接口"><a class="markdownIt-Anchor" href="#十一-servletcontext接口">#</a> 十一、ServletContext 接口</h2>
<ol>
<li>
<p>ServletContext 接口表示 Servlet 上下文对象</p>
</li>
<li>
<p><strong>一个 web 工程只有一个 ServletContext 对象实例</strong></p>
</li>
<li>
<p>ServletContext 是在 web 工程启动时创建，在 web 工程停止时销毁</p>
</li>
<li>
<p>ServletContext 对象是一个域对象<br>
域对象：像 Map 一样存取数据的对象称为域对象，域指的是存取数据的操作范围，<br>
<strong>ServletContext 的域是整个 web 工程</strong><br>
<img src="https://img-blog.csdnimg.cn/2020080812494493.png" alt=""></p>
</li>
<li>
<p>ServletContext 接口的四个作用：<br>
(1) 获取__web.xml 中配置的上下文参数标签中的值 (所以不是每个 servlet 的 servlet congfig 里面可以获取到的<init-param>设的键值对，而是<context-param>, 可以被多个不同的 servlet 访问到)__<br>
(2) 获取当前工程的路径，格式：/ 工程路径，也就是 Edit Configurations 中 Deployment 中的 Application context 的内容 (即地址中 8080 之后，具体的打开的页面之前的内容)<br>
(3) 获取工程部署后在硬盘上的绝对路径<br>
 (4) 像 Map 一样存取数据</p>
</li>
</ol>
<p>代码演示：1. 在 web.xml 中继续写配置 (在标签中)</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--&lt;context-param>标签中是上下文参数，属于整个web工程--></span>
<span class="token comment">&lt;!--可以有多个，写在第一个&lt;servlet>标签之外(之上)--></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>username<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context-param</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">></span></span>password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">></span></span>root<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context-param</span><span class="token punctuation">></span></span>
<span class="token comment">&lt;!--并写出下方的类对应的&lt;servlet标签>--></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码演示：2. 在 src 目录下创建此类</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyContextServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//默认执行doGet方法，故只重写doGet方法</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//GenericServlet类中有public ServletConfig getServletConfig()方法，返回this.config</span>
        <span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> <span class="token function">getServletConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//1.获取web.xml中配置的上下文参数&lt;context-param>标签中的值</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"context-param参数的username值是"</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* 运行结果：context-param参数的username值是root */</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"context-param参数的password值是"</span> <span class="token operator">+</span> servletContext<span class="token punctuation">.</span><span class="token function">getInitParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* 运行结果：context-param参数的password值是root */</span>
        <span class="token comment">//2.获取当前工程的路径</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"当前工程路径："</span> <span class="token operator">+</span> servletContext<span class="token punctuation">.</span><span class="token function">getContextPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* 运行结果：当前工程路径：/MyTest */</span>
        <span class="token comment">//3.获取工程部署后在硬盘上的绝对路径</span>
        <span class="token comment">/* /斜杠(默认路径)对应IDEA代码的web目录 */</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"工程部署的路径是:"</span> <span class="token operator">+</span> servletContext<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* 运行结果：E:\IDEA WorkSpace\FirstWeb\out\artifacts\FirstWeb_war_exploded\ */</span>
        <span class="token comment">//在web目录下创建一个css文件夹</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"工程下css目录的绝对路径是:"</span> <span class="token operator">+</span> servletContext<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/css"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* 运行结果：E:\IDEA WorkSpace\FirstWeb\out\artifacts\FirstWeb_war_exploded\css */</span>
        <span class="token comment">//在web目录下创建一个img文件夹，里面放1.gif文件</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"工程下img目录1.gif的绝对路径是:"</span> <span class="token operator">+</span> servletContext<span class="token punctuation">.</span><span class="token function">getRealPath</span><span class="token punctuation">(</span><span class="token string">"/img/1.gif"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* 输出：E:\IDEA WorkSpace\FirstWeb\out\artifacts\FirstWeb_war_exploded\img\1.gif */</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">//记得要在浏览器的地址栏输入http://localhost:8080/MyTest/MyContextServlet才可访问到此类</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码演示：3. 在 src 中创建此类，并在 web.xml 中写对应的配置信息</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//GenericServlet类中有public ServletContext getServletContext()方法，return this.getServletConfig().getServletContext();</span>
        <span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> <span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>servletContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* 输出：org.apache.catalina.core.ApplicationContextFacade@2711c490 */</span>
        servletContext<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span><span class="token string">"value1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>servletContext<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/* 输出：value1 */</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意：<strong>一个 web 工程只会创建<mark>一个 ServletContext 对象实例</mark>，换其他类输出 servletContext 得到的结果与上述相同，且一旦给此对象赋值，即使换另一个类 getAttribute (key1)，得到的结果也是 value1</strong></p>
<h2 id="十二-http协议"><a class="markdownIt-Anchor" href="#十二-http协议">#</a> 十二、HTTP 协议</h2>
<h3 id="1-含义"><a class="markdownIt-Anchor" href="#1-含义">#</a> 1. 含义</h3>
<p>所谓协议指的是双方或多方相互约定好，都要遵守的规则，而 HTTP 协议指的是客户端和 服务器之间通信时发送的数据需要遵守的规则，HTTP 协议中的数据又称为报文</p>
<h3 id="2-请求的http协议格式"><a class="markdownIt-Anchor" href="#2-请求的http协议格式">#</a> 2. 请求的 HTTP 协议格式</h3>
<p>请求分为 GET 请求和 POST 请求两种：</p>
<p>(1) GET 请求：由请求行、请求头两部分组成，如下图所示：<br>
<img src="https://img-blog.csdnimg.cn/20200808125116481.png" alt=""></p>
<p>内容分析：<br>
请求行：<br>
①请求的方式：GET<br>
②请求的资源路径：/06_servlet/a.html<br>
③请求的协议的版本号：HTTP/1.1</p>
<p>请求头：<br>
①Accept：告诉服务器，客户端可以接收的数据类型<br>
②Accept-Language：告诉服务器，客户端可以接收的语言类型：<br>
zh_CN：中文中国<br>
 en_US：英文美国<br>
③User-Agent：代表客户端浏览器的信息<br>
④Accept-Encoding：告诉服务器，客户端可以接收的数据编码 (压缩) 格式<br>
⑤Host：表示请求时的服务器 ip 和端口号<br>
⑥Connection：告诉服务器，当前连接如何处理：<br>
Keep-Alive：回传完数据不要马上关闭，保持一小段时间的连接<br>
 Closed：回传完数据马上关闭</p>
<p>(2) POST 请求：由请求行、请求头、空行、请求体组成，如下图所示：<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808125150164.png" alt=""></p>
<p>内容分析 (仅分析与 GET 请求的不同之处)：<br>
请求头：<br>
①Referer：表示请求发起时，浏览器地址栏中的地址<br>
②Content-Type：表示发送的数据的类型：<br>
i. application/x-www-form-ur lencoded：表示提交的数据的格式是 name=value&amp;name=value，然后对其进行 url 编码，url 编码是把非英文内容转换为：% xx% xx<br>
ii. multipart/form-data：表示以多段的形式提交数据给服务器，即以流的形式提交，用于上传<br>
③Content-Length：表示发送的数据的长度<br>
④Cache-Control：表示如何控制缓存，no-cache 不缓存</p>
<h3 id="3-响应的http协议格式"><a class="markdownIt-Anchor" href="#3-响应的http协议格式">#</a> 3. 响应的 HTTP 协议格式</h3>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808125207863.png" alt=""></p>
<h3 id="4-常见的响应码"><a class="markdownIt-Anchor" href="#4-常见的响应码">#</a> 4. 常见的响应码</h3>
<p>200 表示请求成功<br>
 302 表示请求重定向<br>
 404 表示服务器收到请求，但是请求的数据不存在（请求地址错误）<br>
500 表示服务器收到请求，但是服务器内部错误（代码错误）</p>
<h3 id="5-mime类型说明"><a class="markdownIt-Anchor" href="#5-mime类型说明">#</a> 5. MIME 类型说明</h3>
<p>MIME 是 HTTP 协议中的数据类型，格式是：大类型 / 小类型，并与某一种文件的扩展名相对应：<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/2020080812522155.png" alt=""></p>
<h2 id="十三-谷歌浏览器查看http协议"><a class="markdownIt-Anchor" href="#十三-谷歌浏览器查看http协议">#</a> 十三、谷歌浏览器查看 HTTP 协议</h2>
<p>首先点击 F12：<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808125232788.png" alt=""></p>
<p>注意点：</p>
<ol>
<li>到目前为止除了 form 标签中 method=post 之外，其余均为 GET 请求</li>
<li>标签不一定与标签相邻，只要根据能对应上即可</li>
<li>默认地址值与工程路径是两个概念，上述只是将默认地址值修改为工程路径，即上述斜杠 等代表访问到的是工程路径：<a target="_blank" rel="noopener" href="http://localhost:8080/%E5%B7%A5%E7%A8%8B%E5%90%8D%EF%BC%8C%E8%80%8C%E9%9D%9E%E9%BB%98%E8%AE%A4%E8%B7%AF%E5%BE%84">http://localhost:8080 / 工程名，而非默认路径</a></li>
</ol>
<h2 id="十四-httpservletrequest类"><a class="markdownIt-Anchor" href="#十四-httpservletrequest类">#</a> 十四、HttpServletRequest 类</h2>
<ol>
<li>
<p>HttpServletRequest 类的作用：<br>
每次只要有请求进入 Tomcat 服务器，Tomcat 服务器就会把请求发来的 HTTP 协议信息解析好封装到 Request 对象中，然后传递到 service 方法中 (调用 doGet 或 doPost 方法) 供编程人员使用，编程人员通过 HttpServletRequest 对象，可以获取到请求的所有信息</p>
</li>
<li>
<p>HttpServletRequest 类的常用方法：<br>
getRequestURI ()：获取请求的资源路径<br>
 getRequestURL ()：获取请求的绝对路径<br>
 getRemoteHost ()：获取客户端的 ip 地址<br>
 getHeader ()：获取请求头<br>
 getParameter ()：获取请求的参数<br>
 getParameterValues ()：获取请求的参数 (多个值时使用)<br>
 getMethod ()：获取请求的方式 (GET 或 POST)<br>
 setAttribute (key, value)：设置域数据<br>
 getAttribute (key)：获取域数据<br>
 getRequestDispatcher ()：获取请求转发对象</p>
</li>
</ol>
<p>代码示例 (在 src 下创建此类)：</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestAPI</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//1.获取请求的资源路径</span>
        <span class="token class-name">String</span> requestURI <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.获取请求的绝对路径</span>
        <span class="token class-name">StringBuffer</span> requestURL <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//3.获取客户端的ip地址</span>
        <span class="token class-name">String</span> requestRemoteHost <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRemoteHost</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4.获取请求头</span>
        <span class="token class-name">String</span> requestHeader <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"User-Agent"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//5.获取请求的方式</span>
        <span class="token class-name">String</span> requestMethod <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//输出</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>requestURI<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* /MyTest/RequestAPI */</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>requestURL<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">/* http://localhost:8080/MyTest/RequestAPI */</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>requestHeader<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Mozilla/5.0 (Windows NT 10.0; Win64; x64)...</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>requestMethod<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//GET</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>requestRemoteHost<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//127.0.0.1</span>
        <span class="token comment">/*在IDEA中，使用localhost访问时得到的客户端ip地址是127.0.0.1
                   使用真实ip访问时，得到的客户端地址是真实的客户端ip地址 */</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol start="3">
<li>获取请求参数<br>
代码示例：1. 在 web 目录下创建 form.html 页面 (不可在 WEB-INF 中创建，无法访问到)：</li>
</ol>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>form<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://localhost:8080/MyTest/RequestAPI2<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        用户名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
        密码：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
        兴趣爱好：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hobby<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cpp<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>C++
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hobby<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Java<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Java
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hobby<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>JS<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>JavaScript<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
                 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/2020080812540219.png" alt=""></p>
<p>代码示例：2. 在 src 下创建此类</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">RequestAPI2</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//doPost方法会出现中文请求乱码问题</span>
        <span class="token comment">//需要在获取任何参数之前修改字符编码集，而不仅仅获取中文参数时才修改：</span>
        request<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取请求的参数(此方法参数中放name属性值，得到value属性值)</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取请求的参数的多个值</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> hobbies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameterValues</span><span class="token punctuation">(</span><span class="token string">"hobby"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//输出</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"用户名："</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"密码："</span> <span class="token operator">+</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//将数组转换为集合输出</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"兴趣爱好："</span> <span class="token operator">+</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>hobbies<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：<br>
(在 web.xml 文件中创建对应的配置，在浏览器的地址栏输 http://localhost:8080/MyTest/form.html)<br>
<img src="https://img-blog.csdnimg.cn/20200808125432580.png" alt=""><br>
<img src="https://img-blog.csdnimg.cn/20200808125436371.png" alt=""></p>
<p>注意：doGet 请求的中文乱码问题的解决：<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808125503983.png" alt=""></p>
<h2 id="十五-请求转发"><a class="markdownIt-Anchor" href="#十五-请求转发">#</a> 十五、请求转发</h2>
<p>请求转发指的是服务器收到请求之后，从一个资源跳转到另一个资源的操作，如图所示：<br>
<img src="https://img-blog.csdnimg.cn/20200808125512890.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTM0MzE5MA==,size_16,color_FFFFFF,t_70" alt=""></p>
<p>代码示例：1. 在 src 下创建此类，并在 web.xml 中配置相应的数据</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet1</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//获取请求的参数(查看办事的材料)</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"在Servlet1(柜台1)中查看参数(材料):"</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//给材料盖章</span>
        request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">,</span><span class="token string">"柜台1的章"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获得通向Servlet2的路径(请求转发对象)</span>
        <span class="token comment">//参数必须以斜杠打头，斜杠代表http://localhost:8080/工程名/，对应IDEA代码的web目录</span>
        <span class="token class-name">RequestDispatcher</span> requestDispatcher <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/Servlet2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//可以转发到WEB-INF目录下：request.getRequestDispatcher("/WEB-INF/xxx");</span>
        <span class="token comment">//通过得到的路径走向Servlet2(柜台2)</span>
        <span class="token comment">//forward方法将当前资源的request和response转发到该requestDispatcher指定的资源</span>
        requestDispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//使得Servlet2中的request和response与Servlet1一致</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码示例：2. 在 src 下创建此类，并在 web.xml 中配置相应的数据</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet2</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//获取请求的参数(查看办事的材料)</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"在Servlet2(柜台2)中查看参数(材料):"</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//查看是否有柜台1的章</span>
        <span class="token class-name">Object</span> key1 <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"key1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"柜台1的章为："</span> <span class="token operator">+</span> key1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//出处理自己的业务</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Servlet2处理业务"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：<br>
(在浏览器的地址栏中输入：<a target="_blank" rel="noopener" href="http://localhost:8080/MyTest/Servlet1?username=jaychou">http://localhost:8080/MyTest/Servlet1?username=jaychou</a>)<br>
<img src="https://img-blog.csdnimg.cn/2020080812582949.png" alt=""></p>
<p>可以得出地址栏的内容不发生变化，但页面自动跳转 (访问)<br>
 到了请求转发对象 Servlet2 中，即显示<br>
<a target="_blank" rel="noopener" href="http://localhost:8080/MyTest/Servlet2%E7%9A%84%E9%A1%B5%E9%9D%A2"> http://localhost:8080/MyTest/Servlet2 的页面</a></p>
<h2 id="十六-base标签的作用"><a class="markdownIt-Anchor" href="#十六-base标签的作用">#</a> 十六、base 标签的作用</h2>
<p>代码示例：1. 在 web 目录下创建 a 文件夹下创建 b 文件夹下创建 c.html</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    这是a下的b下的c.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../../index.html<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>跳到web下的index.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808125731451.png" alt=""></p>
<p>代码示例：2. 在 web 目录下创建 index.html</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>							
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    这是web下的index.html页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>a/b/c.html<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>跳转到a下的b下的c.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：两个页面可以来回跳转<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808125910366.png" alt=""></p>
<p>分析：当在 c.html 页面准备点击进行跳转时浏览器的地址栏是 http://localhost:63342/FirstWeb/MyTest/web/a/b/c.html，<br>
跳转到 index.html 页面时的 a 标签路径是…/…/index.html，所有相对路径在跳转时都会参照当前浏览器地址栏中的地址来进行跳转，此时跳转的路径是 http://localhost:63342/FirstWeb/MyTest/web/a/b/c.html…/…/index.html，进行抵消之后，剩余的路径是 http://localhost:63342/FirstWeb/MyTest/web/index.html，路径正确，跳转成功。</p>
<p>代码示例：1. 在 web 目录下创建 a 文件夹下创建 b 文件夹下创建 c.html</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    这是a下的b下的c.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../../index.html<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>跳到web下的index.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808130638357.png" alt=""></p>
<p>代码示例：2. 在 src 下创建此类，并在 web.xml 中配置</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Forward</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"a/b/c.html"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码示例：3. 在 web 目录下创建 index.html</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    这是web下的index.html页面<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span> http://localhost:8080/MyTest/Forward</span><span class="token punctuation">></span></span>请求转发：a/b/c.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808130000118.png" alt=""></p>
<p>分析：在地址栏输入 http://localhost:63342/FirstWeb/MyTest/web/index.html，点击后成功跳转到 <a target="_blank" rel="noopener" href="http://localhost:8080/MyTest/Forward%EF%BC%8C%E6%AD%A4%E6%97%B6%E7%9A%84%E9%A1%B5%E9%9D%A2%E6%98%AF%EF%BC%9A">http://localhost:8080/MyTest/Forward，此时的页面是：</a><br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808130012660.png" alt=""></p>
<p>点击之后无法跳转，根据以上原因，要跳转的地址是 http://localhost:8080/MyTest/Forward…/…/index.html，抵消之后为 http://localhost:8080/…/index.html，这是错误的路径，因此跳转失败。解决方案如下：</p>
<p>base 标签可以设置当前页面中所有相对路径跳转时参照指定的路径来进行跳转，在 href 属性中设置指定路径</p>
<p>代码示例：4. 将上述 c.html 文件修改为如下即可成功跳转</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--base标签写在&lt;title>标签之后--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://localhost:8080/MyTest/a/b/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    这是a下的b下的c.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>../../index.html<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>跳到web下的index.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注：实际开发中都使用绝对路径，而不简单的使用相对路径</p>
<h2 id="十七-在不同情况下的不同意义"><a class="markdownIt-Anchor" href="#十七-在不同情况下的不同意义">#</a> 十七、”/” 在不同情况下的不同意义</h2>
<ol>
<li>“/” 若被浏览器解析，得到的地址是：<a target="_blank" rel="noopener" href="http://ip">http://ip</a>:port/<br>
(1) <a href="/">斜杠</a></li>
<li>“/” 若被服务器解析，得到的地址是：<a target="_blank" rel="noopener" href="http://ip">http://ip</a>:port / 工程路径<br>
 (1) /servlet1<br>
(2) servletContext.getRealPath(“/”);<br>
(3) request.getRequestDispatcher(“/”);</li>
<li>特殊情况：response.sendRedirect (“/”); 把斜杠发送到浏览器解析，得到 http://ip:port/</li>
</ol>
<h2 id="十八-httpservletresponse类"><a class="markdownIt-Anchor" href="#十八-httpservletresponse类">#</a> 十八、HttpServletResponse 类</h2>
<ol>
<li>
<p>HttpServletResponse 类的作用：<br>
每次只要有请求进入 Tomcat 服务器，Tomcat 服务器就会创建一个 Response 对象传递给 Servlet 程序。HttpServletResponse 表示所有响应的信息 (HttpServletRequest 表示请求发来的信息)，可以通过 HttpServletResponse 对象设置返回给客户端的信息</p>
</li>
<li>
<p>两个输出流的说明：<br>
字节流 getOutputStream (); 常用于下载 (传递) 二进制数据<br>
字符流 getWriter (); 常用于回传字符串<br>
注：同一个 HttpServletResponse 对象两个流不可同时使用，只可二选一，否则报错：<br>
<img src="https://img-blog.csdnimg.cn/20200808130117231.png" alt=""></p>
</li>
<li>
<p>从服务器往客户端 (浏览器) 回传字符串数据</p>
</li>
</ol>
<p>代码示例：在 src 下创建此类并在 web.xml 中进行配置</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ResponseIO</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//防止中文乱码问题，在获取流对象之前调用此方法：</span>
        <span class="token comment">//同时设置服务器和客户端都使用UTF-8字符集</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html; charset=UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取流对象</span>
        <span class="token class-name">PrintWriter</span> writer <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        writer<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"I Love China！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：<br>
<img src="https://img-blog.csdnimg.cn/20200808130146811.png" alt=""></p>
<h2 id="十九-请求重定向"><a class="markdownIt-Anchor" href="#十九-请求重定向">#</a> 十九、请求重定向</h2>
<p>请求重定向指的是客户端给服务器发送请求，然后服务器通知客户端去访问自己的新地址 (之前的地址可能被废弃) 叫请求重定向<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808130155739.png" alt=""></p>
<p>代码示例：1. 在 src 下创建此类并在 web.xml 中进行配置</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Response1</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"会访问到Response1"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//1.设置响应状态码302</span>
        response<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">302</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.设置响应头说明新的地址在哪里</span>
        response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Location"</span><span class="token punctuation">,</span><span class="token string">"http://localhost:8080/MyTest/Response2"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码示例：2. 在 src 下创建此类并在 web.xml 中进行配置</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Response2</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"Response2's result!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：在地址栏输入 http://localhost:8080/MyTest/Response1，得到：<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200808130232341.png" alt=""></p>
<p>并在控制台输出：会访问到 Response1</p>
<p>注：</p>
<ol>
<li>在 Response1 中使用以下代码替代两个步骤可得到同样的效果 (推荐使用此方法)：<br>
response.sendRedirect(“<a target="_blank" rel="noopener" href="http://localhost:8080/MyTest/Response2%E2%80%9D">http://localhost:8080/MyTest/Response2”</a>);</li>
<li>在 Response1 中 request.setAttribute (“key1”, “value1”);<br>
 在 Response2 中 req.getAttribute (“key1”); 无法得到 key1 的值，结果为 null</li>
</ol>
<hr>
<h1 id="文件的上传和下载"><a class="markdownIt-Anchor" href="#文件的上传和下载">#</a> 文件的上传和下载</h1>
<p><strong>MySql 的语法看这篇就够了，传送地址：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_49343190/article/details/107313699">MySql 必知必会</a><br>
 JSP 的使用看这篇就够了，传送地址：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_49343190/article/details/107932765">JSP 必知必会</a></strong></p>
<h3 id="文章目录-2"><a class="markdownIt-Anchor" href="#文章目录-2">#</a> 文章目录</h3>
<ul>
<li><a href="#_0">文件的上传和下载</a></li>
<li>
<ul>
<li><a href="#_5">一、文件的上传介绍</a></li>
<li><a href="#_55">二、服务器对上传的数据进行解析</a></li>
<li><a href="#_138">三、文件下载的过程</a></li>
<li><a href="#_145">四、文件下载过程详解</a></li>
<li><a href="#_164">五、中文名下载文件的乱码问题</a></li>
<li><a href="#BASE64_182">六、BASE64 编解码</a></li>
<li><a href="#_212">七、火狐浏览器下载文件乱码问题的解决</a></li>
</ul>
</li>
</ul>
<h2 id="一-文件的上传介绍"><a class="markdownIt-Anchor" href="#一-文件的上传介绍">#</a> 一、文件的上传介绍</h2>
<p>1. 要有一个 form 标签，method = post 请求方式，原因：文件的长度一般都会超过 get 请求的限制<br>
 2. form 标签的 encType 属性值必须为 multipart/form-data<br>
3. 在 form 标签中使用 input 标签，type = file 添加上传的文件<br>
 4. 在 form 标签中使用 input 标签，type = submit 提交到服务器<br>
 5. 编写 Servlet 程序接收、处理上传的文件<br>
注意：encType = multipart/form-data 表示提交的数据以多段 (每一个表单项表示一个数据段) 的形式 进行拼接，然后以二进制流的形式发送给服务器</p>
<p>代码演示 (1)：在 web 目录下创建 Upload.jsp</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://localhost:8080/MyTest/upLoadServlet<span class="token punctuation">"</span></span> 
          <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        用户名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span>
        头像：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>photo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>上传<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码演示 (2)：创建 Servlet 程序 upLoadServlet.java</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> upLoadServlet <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span>
           <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"上传成功了！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码演示 (3)：在 web.xml 中编写 servlet 标签</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>upLoadServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.qizegao.servlet.upLoadServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>upLoadServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/upLoadServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：<br>
<img src="https://img-blog.csdnimg.cn/20200826230220107.png#pic_center" alt=""></p>
<p>点击上传后，控制台输出：上传成功了！<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200826230231398.png" alt=""></p>
<p>注意：谷歌浏览器中上传的文件的数据显示的是空行，但服务器可以接收到数据</p>
<h2 id="二-服务器对上传的数据进行解析"><a class="markdownIt-Anchor" href="#二-服务器对上传的数据进行解析">#</a> 二、服务器对上传的数据进行解析</h2>
<ol>
<li>
<p>首先导入两个 jar 包 (fileupload 包依赖 io 包)：<br>
<img src="https://img-blog.csdnimg.cn/20200826230244345.png#pic_center" alt=""></p>
</li>
<li>
<p>两个 jar 包中常用的类 (导入的 jar 包是 commons 的)：<br>
(1) ServletFileUpload 类，用于解析上传的数据<br>
①public static final boolean isMultipartContent (HttpServletRequest request)<br>
 如果上传的数据是多段的形式，返回 true，只有多段的数据才是文件上传的<br>
②public ServletFileUpload ()<br>
 空参构造器<br>
③public ServletFileUpload (FileItemFactory fileItemFactory)<br>
 参数为工厂实现类的构造器<br>
④public List parseRequest (HttpServletRequest request)<br>
 解析上传的数据，返回包含每一个表单项的 List 集合<br>
 (2) FileItem 类，表示每一个表单项<br>
①public boolean isFormField ()<br>
 如果当前表单项是普通表单项，返回 true，文件类型返回 false<br>
②public String getFieldName()<br>
 获取当前表单项的 name 属性值<br>
③public String getString ()<br>
 获取当前表单项的 value 属性值，参数为”UTF-8” 可解决乱码问题<br>
④public String getName ()<br>
 获取上传的文件名<br>
⑤public void write (File file)<br>
 将上传的文件写到参数 File 所指向的硬盘位置</p>
</li>
</ol>
<p>代码演示 (1)：在 web 目录下创建 Upload.jsp</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://localhost:8080/MyTest/upLoadServlet<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    用户名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>
    头像：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>photo<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>上传<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码演示 (2)：创建 Servlet 程序 upLoadServlet.java</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> upLoadServlet <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ServletFileUpload</span><span class="token punctuation">.</span><span class="token function">isMultipartContent</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> 
            <span class="token comment">//创建工厂实现类(FileItemFactory是一个接口，需要new其实现类)</span>
            <span class="token class-name">FileItemFactory</span> fileItemFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DiskFileItemFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//创建用于解析上传数据的工具类ServletFileUpload类</span>
            <span class="token class-name">ServletFileUpload</span> servletFileUpload <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ServletFileUpload</span><span class="token punctuation">(</span>fileItemFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
                <span class="token comment">//解析上传的数据，得到每一个表单项FileItem</span>
                <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FileItem</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> servletFileUpload<span class="token punctuation">.</span><span class="token function">parseRequest</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">FileItem</span> fileitem <span class="token operator">:</span>
                        list<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>fileitem<span class="token punctuation">.</span><span class="token function">isFormField</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        <span class="token comment">//普通表单项</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"普通表单项的name属性值："</span> <span class="token operator">+</span> fileitem<span class="token punctuation">.</span><span class="token function">getFieldName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">//参数UTF-8，解决乱码问题</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"普通表单项的value属性值："</span> <span class="token operator">+</span>
                                fileitem<span class="token punctuation">.</span><span class="token function">getString</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                        <span class="token comment">//上传的是文件类型</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"文件表单项的name属性值："</span> <span class="token operator">+</span> fileitem<span class="token punctuation">.</span><span class="token function">getFieldName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"上传的文件名："</span> <span class="token operator">+</span> fileitem<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token comment">//将文件写入磁盘指定的位置</span>
                        fileitem<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">"e:\\"</span> <span class="token operator">+</span> fileitem<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span>
            <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">&#125;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>在 web.xml 文件中编写对应的 servlet 标签</p>
<p>浏览器运行结果：<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200826230337328.png" alt=""></p>
<p>控制台运行结果：<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200826230341937.png" alt=""></p>
<p>e 盘出现：<br>
<img src="https://img-blog.csdnimg.cn/20200826230350277.png#pic_center" alt=""></p>
<p>注意：上传的不仅可以是图片，还可以是其他格式</p>
<h2 id="三-文件下载的过程"><a class="markdownIt-Anchor" href="#三-文件下载的过程">#</a> 三、文件下载的过程</h2>
<ol>
<li>获取要下载的文件名</li>
<li>获取要下载的文件类型</li>
<li>将获取的文件类型告诉客户端</li>
<li>告诉客户端收到的数据用于下载使用</li>
<li>获取要下载的文件并回传给客户端</li>
</ol>
<h2 id="四-文件下载过程详解"><a class="markdownIt-Anchor" href="#四-文件下载过程详解">#</a> 四、文件下载过程详解</h2>
<ol>
<li>获取要下载的文件名：使用 String 定义要下载的文件名</li>
<li>获取要下载的文件类型：<br>
通过 ServletContext 的 getMimeType (); 参数是要下载的文件所在路径，返回值是 String 类型</li>
<li>将获取的文件类型告诉客户端：<br>
通过 HttpServletResponse 的 setContentType (); 参数是第二步的结果，无返回值</li>
<li>告诉客户端收到的数据用于下载使用 (没有此步则内容直接显示在页面上)：<br>
通过 HttpServletResponse 的 setHeader ();<br>
 参数是 &quot;Content-Disposition&quot;, “attachment; <a target="_blank" rel="noopener" href="http://fileName=xxx.xxx">fileName=xxx.xxx</a>”<br>
 注意：Content-Disposition 响应头表示客户端收到的数据如何处理<br>
 attachment 表示附件，用于下载<br>
 filename 表示下载的文件名，可以与原文件名不同<br>
此方法无返回值</li>
<li>获取要下载的文件并回传给客户端：<br>
回传给客户端通过导入的 io 包的 IOUtils 类的 copy (InputStream input, OutputStream output);<br>
 其中：<br>
①通过 ServletContext 的 getResourceAsStream (); 参数是要下载的文件路径，得到输入流<br>
②通过 HttpServletResponse 的 getOutputStream (); 得到响应的输出流</li>
</ol>
<h2 id="五-中文名下载文件的乱码问题"><a class="markdownIt-Anchor" href="#五-中文名下载文件的乱码问题">#</a> 五、中文名下载文件的乱码问题</h2>
<ol>
<li>原因：<br>
response.setHeader (“Content-Disposition”, “attachment; fileName = 中文名.jpg”);<br>
 如果下载的文件是中文名，会发现下载的文件无法正常显示汉字，原因是响应头中不能有汉字</li>
<li>解决：<br>
(1) 当浏览器是 IE 浏览器或谷歌浏览器：<br>
需要使用 URLEncoder 类先对中文名进行 UTF-8 编码，因为 IE 浏览器和谷歌浏览器收到含有 编码的字符串后会以 UTF-8 字符集进行解码显示，代码如下：</li>
</ol>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//把中文名进行UTF-8编码操作</span>
<span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"中文名.jpg"</span><span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token string">"attachment; filename="</span> <span class="token operator">+</span> <span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"中文名.jpg"</span><span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//把编码后的字符串设置到响应头中</span>
resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition"</span><span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>(2) 当浏览器是火狐浏览器：使用 BASE64 编解码</p>
<h2 id="六-base64编解码"><a class="markdownIt-Anchor" href="#六-base64编解码">#</a> 六、BASE64 编解码</h2>
<p>代码演示：BASE64 编解码的操作</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span><span class="token class-name">BASE64Decoder</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span><span class="token class-name">BASE64Encoder</span><span class="token punctuation">;</span>
<span class="token comment">//jdk8之后不再支持上述两个类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Base64Test</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">String</span> content <span class="token operator">=</span> <span class="token string">"这是需要Base64编码的内容"</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"初始内容："</span> <span class="token operator">+</span> content<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 创建一个Base64编码器</span>
        <span class="token class-name">BASE64Encoder</span> base64Encoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BASE64Encoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 执行Base64编码操作，encode()参数是字节数组</span>
        <span class="token class-name">String</span> encodedString <span class="token operator">=</span> base64Encoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span>content<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"编码后的结果："</span> <span class="token operator">+</span> encodedString <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 创建Base64解码器</span>
        <span class="token class-name">BASE64Decoder</span> base64Decoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BASE64Decoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 解码操作</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> base64Decoder<span class="token punctuation">.</span><span class="token function">decodeBuffer</span><span class="token punctuation">(</span>encodedString<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//以utf-8编码，以utf-8解码</span>
        <span class="token class-name">String</span> str <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"解码后的结果："</span> <span class="token operator">+</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200826230535669.png" alt=""></p>
<h2 id="七-火狐浏览器下载文件乱码问题的解决"><a class="markdownIt-Anchor" href="#七-火狐浏览器下载文件乱码问题的解决">#</a> 七、火狐浏览器下载文件乱码问题的解决</h2>
<p>需要对中文名进行 BASE64 编码操作：<br>
这时候需要把请求头 Content-Disposition: attachment; filename = 中文名<br>
编码成为 Content-Disposition: attachment; filename==?charset?B?xxxx?=<br>
 对 =?charset?B?xxxxx?= 的说明：</p>
<ol>
<li>=? 表示编码内容的开始</li>
<li>charset 表示字符集 (UTF-8、GBK 等)</li>
<li>B 表示 BASE64 编码</li>
<li>xxxx 表示 BASE64 编码后的内容</li>
<li>?= 表示编码内容的结束</li>
</ol>
<p>代码演示：完整的文件下载操作</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DownLoad</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">String</span> downLoadFileName <span class="token operator">=</span> <span class="token string">"2.jpg"</span><span class="token punctuation">;</span>
        <span class="token class-name">ServletContext</span> servletContext <span class="token operator">=</span> <span class="token function">getServletContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//斜杠代表工程路径，对应web目录</span>
        <span class="token class-name">String</span> mimeType <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getMimeType</span><span class="token punctuation">(</span><span class="token string">"/File"</span> <span class="token operator">+</span> downLoadFileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span>mimeType<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//根据浏览器的不同进行不同的方式解决中文乱码</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">"User-Agent"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"Firefox"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">//火狐浏览器的解决方式</span>
            resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition"</span><span class="token punctuation">,</span><span class="token string">"attachment; filename==?UTF-8?B?"</span>
               <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">BASE64Encoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"美女.jpg"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"?="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">//如果是IE浏览器或谷歌浏览器</span>
            resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Content-Disposition"</span><span class="token punctuation">,</span><span class="token string">"attachment; filename="</span>
               <span class="token operator">+</span> <span class="token class-name">URLEncoder</span><span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"美女.jpg"</span><span class="token punctuation">,</span> <span class="token string">"UTF-8"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> servletContext<span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">"/File"</span> <span class="token operator">+</span> downLoadFileName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">OutputStream</span> outputStream <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">IOUtils</span><span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">,</span>outputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：<br>
在 web.xml 中进行配置，访问到此类时会自动的开始下载，下载的文件名为：美女.jpg</p>
<hr>
<h1 id="cookie-and-session"><a class="markdownIt-Anchor" href="#cookie-and-session">#</a> Cookie and Session</h1>
<h2 id="一-会话技术"><a class="markdownIt-Anchor" href="#一-会话技术">#</a> 一、会话技术</h2>
<ol>
<li>会话：一次会话中包含多次请求和响应<br>
注：一次会话表示浏览器第一次给服务器发送请求，会话建立，直到有一方断开为止</li>
<li>功能：在一次会话的多次请求间共享数据</li>
<li>方式：<br>
(1) 客户端会话技术：Cookie<br>
 (2) 服务器端会话技术：Session</li>
</ol>
<h2 id="二-cookie"><a class="markdownIt-Anchor" href="#二-cookie">#</a> 二、Cookie</h2>
<ol>
<li>概念：将数据保存到客户端，客户端有了 Cookie 之后，每次请求都会发送给服务器</li>
<li>使用步骤：<br>
(1) 创建 Cookie 对象，参数中绑定数据 (键值对)<br>
new Cookie(String name, String value);<br>
(2) 客户端向服务器发送请求后，服务器向客户端发送 Cookie 对象<br>
 response.addCookie (Cookie cookie);<br>
(3) 客户端收到 Cookie 后，再次发送请求时，服务器获取从客户端发来的 Cookie 对象<br>
 Cookie [] request.getCookies ();<br>
(4) 服务器得到 Cookie 对象后，使用 getName 与 getValue 方法得到 Cookie 对象的数据</li>
</ol>
<p>代码演示：演示 Cookie 的使用步骤<br>
 (1) 此工程 Tomcat 的设置：<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200826231132146.png" alt=""></p>
<p>(2) 在 src 下创建 CookieTest1.java</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/CookieTest1"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CookieTest1</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//1. 创建Cookie对象，参数类似键值对</span>
        <span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"hello"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2. 客户端向浏览器发送Cookie</span>
        response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>(3) 在 src 下创建 CookieTest2.java</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/CookieTest2"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CookieTest2</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//3. 服务器获取Cookie对象</span>
        <span class="token class-name">Cookie</span><span class="token punctuation">[</span><span class="token punctuation">]</span> cookies <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getCookies</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4. 服务器获取Cookie对象的值</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Cookie</span> cookie <span class="token operator">:</span>
                cookies<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">String</span> name <span class="token operator">=</span> cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> value <span class="token operator">=</span> cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"获得的Cookie对象的值："</span> <span class="token operator">+</span> name <span class="token operator">+</span> <span class="token string">":"</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：<br>
在浏览器地址栏先输入：<a target="_blank" rel="noopener" href="http://localhost:8080/MyTest/CookieTest1">http://localhost:8080/MyTest/CookieTest1</a><br>
 后输入：<a target="_blank" rel="noopener" href="http://localhost:8080/MyTest/CookieTest2">http://localhost:8080/MyTest/CookieTest2</a><br>
 控制台输出：获得的 Cookie 对象的值：msg:hello</p>
<ol start="3">
<li>上述程序原理：基于响应头 set-cookie 和请求头 cookie 实现<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200826231228734.png" alt=""></li>
</ol>
<h2 id="三-cookie的细节"><a class="markdownIt-Anchor" href="#三-cookie的细节">#</a> 三、Cookie 的细节</h2>
<p>1. 一次可以发送多个 Cookie 对象，使用 response 调用多次 addCookie 方法即可</p>
<p>2.Cookie 在浏览器中保存的时间：<br>
(1) 默认情况下，当浏览器关闭后，Cookie 数据被销毁<br>
 (2) 持久化存储：<br>
使用 Cookie 对象的 setMaxAge (int seconds) 方法：<br>
a. 正数：将 Cookie 数据写到硬盘中存储，参数指定存活的秒数，时间到后，数据失效， 此时间指的是创建 cookie 后开始计时，并不是关闭浏览器后才开始计时<br>
 b. 负数：默认情况<br>
 c. 零：删除 cookie 信息</p>
<p>3. 在 Tomcat 8 之后 Cookie 可以存中文，但特殊中文字符仍不支持，建议使用 URL 编码格式</p>
<p>4.Cookie 的共享问题：<br>
(1) 一个 Tomcat 服务器中，部署了多个 web 项目，这些 web 项目 cookie 的共享说明：<br>
① 默认情况 cookie 无法共享<br>
② 使用 Cookie 对象的 setPath (String path) 方法设置 cookie 的获取范围：<br>
a. 默认情况，参数是 web 工程路径，只有这个工程才可以访问到，其余工程无法访问<br>
 b. 如果要共享，可以设置参数为”/” (/ 被浏览器解析得到的地址为 http://ip:port/)<br>
(2) 不同的 Tomcat 服务器间 cookie 的共享说明：<br>
使用 Cookie 对象的 setDomain (String path) 方法，参数设置为一级域名，则一级域名相同的不同服务器之间 Cookie 可共享<br>
如：setDomain (“.baidu.com”)，则 tieba.baidu.com 与 news.baidu.com 等的 cookie 可共享</p>
<h2 id="四-cookie的特点和作用"><a class="markdownIt-Anchor" href="#四-cookie的特点和作用">#</a> 四、Cookie 的特点和作用</h2>
<p>1.Cookie 在客户端存储数据，客户端有了 cookie 之后，每次发送请求都会把 cookie 发送给服务器<br>
 2. 浏览器对单个 Cookie 有大小限制 (4KB)，对同一个域名下的总 cookie 数量也有限制 (20 个)<br>
 3. 作用：<br>
(1) Cookie 一般用于存储少量的安全性较低的数据<br>
 (2) 在不登陆的情况下，完成服务器对客户端的身份识别，如没有登录百度账号的前提下打开百 度，设置搜索引擎搜索时不提示，以后打开浏览器访问百度时，不会再出现搜索提示框，原 理：百度服务器将设置的 Cookie 信息保存到浏览器，下次访问百度时，百度服务器获取浏览 器的 Cookie，根据 Cookie 的值决定要不要显示提示框</p>
<h2 id="五-cookie案例记录上一次访问的时间"><a class="markdownIt-Anchor" href="#五-cookie案例记录上一次访问的时间">#</a> 五、Cookie 案例：记录上一次访问的时间</h2>
<ol>
<li>需求：访问一个 Servlet 程序：<br>
(1) 如果是第一次访问，提示：您好，欢迎您首次访问<br>
 (2) 如果不是第一次访问，提示：欢迎回来，您上次的访问时间是：xxxx</li>
<li>分析：<br>
使用 Cookie 来完成，在服务器判断客户端是否有一个名为 lastTime 的 cookie 对象<br>
 (1) 有，不是第一次访问：<br>
①在浏览器显示：欢迎回来，您上次的访问时间是：xxxx<br>
②将现在的时间写回名为 lastTime 的 cookie 中<br>
 (2) 无，是第一次访问：<br>
①在浏览器显示：您好，欢迎您首次访问<br>
②将现在的时间写回名为 lastTime 的 cookie 中</li>
</ol>
<p>代码演示：使用 jsp 页面完成此案例</p>
<pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ page contentType&#x3D;&quot;text&#x2F;html;charset&#x3D;UTF-8&quot; language&#x3D;&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;CookieTest&lt;&#x2F;title&gt;
&lt;&#x2F;head&gt;
&lt;body&gt;
    &lt;%-- jsp页面通过首行的page标签自动的设置响应的格式，所以向浏览器输出数据不会乱码 --%&gt;
    &lt;%
        &#x2F;&#x2F;1. 服务器获取客户端的所有cookie
        Cookie[] cookies &#x3D; request.getCookies();
        &#x2F;&#x2F;2. 获取的cookie不一定含有lastTime，用一个布尔类型判断
        boolean flag &#x3D; false;
                &#x2F;&#x2F;3. 遍历cookie数组，判断是否有lastTime
        if(cookies !&#x3D; null &amp;&amp; cookies.length &gt; 0) &#123;
            for (Cookie cookie :
                    cookies) &#123;
                String cookieName &#x3D; cookie.getName();
                if (&quot;lastTime&quot;.equals(cookieName)) &#123;
                    &#x2F;&#x2F; 有lastTime，不是第一次访问
                    flag &#x3D; true;
                    &#x2F;&#x2F; 将现在的时间写回lastTime的cookie中
                    Date date &#x3D; new Date();
                    SimpleDateFormat sdf &#x3D; new SimpleDateFormat(&quot;yyyy年MM月dd日 HH:mm:ss&quot;);
                    String format &#x3D; sdf.format(date);
                    &#x2F;&#x2F; 防止乱码，向cookie对象中保存的中文数据使用URL编码
                    format &#x3D; URLEncoder.encode(format, &quot;UTF-8&quot;);
                    &#x2F;&#x2F; 向名为lastTime的cookie中保存此时间
                    cookie.setValue(format);
                    &#x2F;&#x2F; 设置cookie的存活时间
                    cookie.setMaxAge(60 * 60 * 24 * 30); &#x2F;&#x2F;一个月
                    &#x2F;&#x2F; 将cookie写回客户端
                    response.addCookie(cookie);
                    &#x2F;&#x2F; 获取此cookie的value时间值，用于写出时间到浏览器
                    String cookieValue &#x3D; cookie.getValue();
                    cookieValue &#x3D; URLDecoder.decode(cookieValue, &quot;UTF-8&quot;);
                    out.write(&quot;欢迎回来，您上次的访问时间是：&quot; + cookieValue);
                    break; &#x2F;&#x2F;找到了需要的cookie，就不需要判断别的cookie了
                &#125;
            &#125;
        &#125;
    %&gt;
    &lt;%
        if(cookies &#x3D;&#x3D; null || cookies.length &#x3D;&#x3D; 0 || flag &#x3D;&#x3D; false) &#123;
            &#x2F;&#x2F; 没有lastTime，第一次访问，将当前时间保存至cookie，向客户端传递此cookie
            Date date &#x3D; new Date();
            SimpleDateFormat sdf &#x3D; new SimpleDateFormat(&quot;yyyy年MM月dd日 HH:mm:ss&quot;);
            String format &#x3D; sdf.format(date);
            format &#x3D; URLEncoder.encode(format, &quot;UTF-8&quot;);
            Cookie cookie &#x3D; new Cookie(&quot;lastTime&quot;, format);
            cookie.setMaxAge(60 * 60 * 24 * 30);
            response.addCookie(cookie);
            out.write(&quot;您好，欢迎您首次访问&quot;);
        &#125;
    %&gt;
&lt;&#x2F;body&gt;
&lt;&#x2F;html&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="六-session的介绍"><a class="markdownIt-Anchor" href="#六-session的介绍">#</a> 六、Session 的介绍</h2>
<ol>
<li>概念：Session 是服务器端会话技术，在一次会话的多次请求间共享数据，将数据保存到服务器 端，常用来保存用户登录之后的信息</li>
<li>快速入门：<br>
(1) 获取 HttpSession 对象<br>
 HttpSession session = request.getSession ();<br>
 注：①第一次调用表示创建 Session 会话<br>
②之后调用都是获取前面创建好的 Session 会话对象<br>
 (2) 使用 HttpSession 对象的方法<br>
 void setAttribute (String name, Object value);<br>
Object getAttribute(String name);<br>
void removeAttribute(String name);</li>
</ol>
<p>代码演示：演示 Session 的使用<br>
 (1) 在 src 下创建 SessionDemo1.java</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/SessionDemo1"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SessionDemo1</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//1. 创建Session会话</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2. 存储数据</span>
        session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"Hello! Session!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>(2) 在 src 下创建 SessionDemo2.java</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/SessionDemo2"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SessionDemo2</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//1. 获取Session</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2. 获取数据</span>
        <span class="token class-name">Object</span> msg <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：<br>
在浏览器地址栏先输入：<a target="_blank" rel="noopener" href="http://localhost:8080/MyTest/SessionDemo1">http://localhost:8080/MyTest/SessionDemo1</a><br>
 后输入：<a target="_blank" rel="noopener" href="http://localhost:8080/MyTest/SessionDemo2">http://localhost:8080/MyTest/SessionDemo2</a><br>
 控制台输出：Hello! Session!</p>
<ol start="3">
<li>
<p>上述程序原理：Session 底层是基于 Cookie 来实现的<br>
<img src="https://img-blog.csdnimg.cn/20200826231403880.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTM0MzE5MA==,size_16,color_FFFFFF,t_70#pic_center" alt=""></p>
<p>注意：每个 Session 会话都有一个唯一的 id 值作为标识，getId 方法可得到此 id 值</p>
</li>
</ol>
<h2 id="七-session的细节"><a class="markdownIt-Anchor" href="#七-session的细节">#</a> 七、Session 的细节</h2>
<ol>
<li>
<p>Session 被销毁的方式<br>
 (1) 服务器关闭<br>
 (2) Session 对象调用 invalidate ()<br>
(3) Session 默认失效时间：30 分钟，可以到 web.xml 中修改配置文件修改默认失效时间</p>
<pre class="line-numbers language-none"><code class="language-none">&lt;session-config&gt;
    &lt;session-timeout&gt;30&lt;&#x2F;session-timeout&gt;
&lt;&#x2F;session-config&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li>
<p>客户端关闭之后服务器不关闭，两次获取的 Session 是否为同一个？<br>
(1) 默认情况下，不是，Cookie 消失，其中的 Session 自然也消失<br>
 (2) 如果需要相同，进行如下操作：<br>
<img src="https://img-blog.csdnimg.cn/20200826231415620.png#pic_center" alt=""></p>
</li>
<li>
<p>客户端不关闭，服务器关闭之后，两次获取的 Session 是否为同一个？<br>
不是同一个 Session，但是为了保证数据的不丢失，Tomcat 服务器自动完成：<br>
(1) Session 的钝化：<br>
在服务器正常关闭之前，将 Session 对象序列化到硬盘上<br>
 (2) Session 的活化：<br>
在服务器启动之后，将 Session 文件反序列化成为内存中的 Session 对象<br>
注意：也就是说即使获取的不是同一个 Session，但是 Session 中的数据都是相同的</p>
</li>
<li>
<p>Session 的特点<br>
 (1) Session 用于存储一次会话的多次请求数据，存在服务器端，一次会话只有一个 session 对象<br>
 (2) Session 可以存储任意类型，任意大小的数据</p>
</li>
<li>
<p>Session 与 Cookie 的区别：<br>
(1) Session 存储数据在服务器端，Cookie 在客户端<br>
 (2) Session 没有数据大小的限制，Cookie 有 (4KB)<br>
(3) Session 数据安全，Cookie 相对不安全</p>
</li>
</ol>
<h2 id="八-cookie案例免用户名登录"><a class="markdownIt-Anchor" href="#八-cookie案例免用户名登录">#</a> 八、Cookie 案例：免用户名登录</h2>
<p>说明：成功登录之后，重启浏览器，再次登录时，浏览器记住了上次登录的用户名<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200826231434819.png" alt=""></p>
<p>代码演示：免用户名登录的使用<br>
 (1) 创建 login.jsp</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://localhost:8080/MyTest/LoginServlet<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        用户名：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>$&#123;cookie.username.value&#125;<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>
        密码：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>登录<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>(2) 创建 LoginServlet.java</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"password"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//设置正确的用户名为周杰伦，密码是123</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"jay"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">"123"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">Cookie</span> cookie <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cookie</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
            cookie<span class="token punctuation">.</span><span class="token function">setMaxAge</span><span class="token punctuation">(</span><span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//cookie保存一周</span>
            response<span class="token punctuation">.</span><span class="token function">addCookie</span><span class="token punctuation">(</span>cookie<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"登陆成功！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"登陆失败！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：<br>
使用正确的用户名和密码之后，再次访问登陆页面，用户名输入框会自动的填入 jay</p>
<h2 id="九-谷歌浏览器查看cookie"><a class="markdownIt-Anchor" href="#九-谷歌浏览器查看cookie">#</a> 九、谷歌浏览器查看 Cookie</h2>
<p><img src="https://img-blog.csdnimg.cn/20200826231533665.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTM0MzE5MA==,size_16,color_FFFFFF,t_70#pic_center" alt=""></p>
<h2 id="十-验证码的底层原理"><a class="markdownIt-Anchor" href="#十-验证码的底层原理">#</a> 十、验证码的底层原理</h2>
<p><img src="https://img-blog.csdnimg.cn/20200826231541906.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTM0MzE5MA==,size_16,color_FFFFFF,t_70#pic_center" alt=""></p>
<h2 id="十一-谷歌图片验证码的使用"><a class="markdownIt-Anchor" href="#十一-谷歌图片验证码的使用">#</a> 十一、谷歌图片验证码的使用</h2>
<p>谷歌验证码的使用步骤：</p>
<ol>
<li>导入谷歌验证码的 jar 包：</li>
<li>在 web.xml 中进行如下的配置 (写成一样的即可)：</li>
</ol>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>KaptchaServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">></span></span>com.google.code.kaptcha.servlet.KaptchaServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">></span></span>KaptchaServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/kaptcha.jpg<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-none"><code class="language-none">注：代表访问这个Servlet就会生成验证码及图片，并将此验证码保存到Session域中，每次访问都会生成不同的验证码<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<ol start="3">
<li>在表单中使用 img 标签显示验证码</li>
</ol>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://localhost:8080/MyTest/Servlet<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        验证码：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>code<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://localhost:8080/MyTest/kaptcha.jpg<span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>验证码没有找到<span class="token punctuation">"</span></span>
             <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 28px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>code_img<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>登录<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol start="4">
<li>在服务器处理获取的验证码</li>
</ol>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Servlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//获取Session中的验证码</span>
        <span class="token class-name">String</span> attribute <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>KAPTCHA_SESSION_KEY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//删除Session中的验证码</span>
        request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span>KAPTCHA_SESSION_KEY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//获取用户输入的验证码</span>
        <span class="token class-name">String</span> code <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"code"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>attribute<span class="token punctuation">.</span><span class="token function">equalsIgnoreCase</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"验证码正确！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"验证码错误！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：<br>
<img src="https://img-blog.csdnimg.cn/20200826231647206.png#pic_center" alt=""></p>
<h2 id="十二-点击图片切换验证码"><a class="markdownIt-Anchor" href="#十二-点击图片切换验证码">#</a> 十二、点击图片切换验证码</h2>
<p><img src="https://img-blog.csdnimg.cn/202008262317008.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80OTM0MzE5MA==,size_16,color_FFFFFF,t_70#pic_center" alt=""></p>
<p>代码演示：为上述验证码绑定单击事件 (使用 script 标签)</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">//通过验证码图片的id属性值绑定单击事件</span>
    <span class="token keyword">var</span> elementById <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"code_img"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    elementById<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//1. 事件响应的function函数中的this对象是当前正在响应事件的标签的dom对象</span>
        <span class="token comment">//2. src属性可读可写</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">"http://localhost:8080/MyTest/kaptcha.jpg?d="</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span> 
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：每次点击验证码的图片都会变成新的验证码，并将新验证码保存到 session 域中</p>
<hr>
<h1 id="filter过滤器"><a class="markdownIt-Anchor" href="#filter过滤器">#</a> Filter 过滤器</h1>
<p><strong>MySql 的语法看这篇就够了，传送地址：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_49343190/article/details/107313699">MySql 必知必会</a><br>
 JSP 的使用看这篇就够了，传送地址：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_49343190/article/details/107932765">JSP 必知必会</a></strong></p>
<h3 id="文章目录-3"><a class="markdownIt-Anchor" href="#文章目录-3">#</a> 文章目录</h3>
<ul>
<li><a href="#Filter_0">Filter 过滤器</a></li>
<li>
<ul>
<li><a href="#Filter_5">一、Filter 过滤器的介绍</a></li>
<li><a href="#Filter_10">二、Filter 过滤器的使用</a></li>
<li><a href="#Filter_81">三、Filter 过滤器的生命周期</a></li>
<li><a href="#FilterConfig_91">四、FilterConfig 类</a></li>
<li><a href="#FilterChain_102">五、FilterChain 过滤器链</a></li>
<li><a href="#Filter_112">六、Filter 的拦截路径</a></li>
</ul>
</li>
</ul>
<h2 id="一-filter过滤器的介绍"><a class="markdownIt-Anchor" href="#一-filter过滤器的介绍">#</a> 一、Filter 过滤器的介绍</h2>
<ol>
<li>Filter 过滤器是 JavaWeb 三大组件之一，其余组件是：Servlet 程序、Listener 监听器</li>
<li>Filter 过滤器是 JavaEE 规范，也就是一个接口</li>
<li>Filter 过滤器的作用是：<strong>拦截请求、过滤响应</strong></li>
</ol>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/image-20220202103312407.png" alt="image-20220202103312407"></p>
<h2 id="二-filter过滤器的使用"><a class="markdownIt-Anchor" href="#二-filter过滤器的使用">#</a> 二、Filter 过滤器的使用</h2>
<ol>
<li>Filter 过滤器的使用步骤：</li>
</ol>
<p>(1) 编写一个类实现 Filter 接口 (导入的包为：javax.<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=servlet&amp;spm=1001.2101.3001.7020">servlet</a>.Filter)</p>
<p>(2) 实现三个方法：<br>
①实现过滤方法 doFilter ()，此方法中的：<br>
filterChain.doFilter(servletRequest,servletResponse);<br>
 只有执行此方法，才可以访问拦截路径中的资源，若未执行此方法则代表拦截<br>
②实现 init () 方法<br>
③实现 destroy () 方法</p>
<p>(3) 到 web.xml 中配置 Filter 的拦截路径</p>
<ol start="2">
<li>
<p>Filter 过滤器的工作流程：<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200828153726874.png" alt=""></p>
</li>
<li>
<p>案例：在 web 目录下有一个 Admin 目录，此目录下的所有资源 (.html,.jpg,…) 都必须用户登录之后才可访问，<br>
若没有登录，则跳转到登录页面</p>
</li>
</ol>
<p>分析： 用户登录之后会把登录信息保存到 Session 域中，所以检查用户是否登录，可以判断 Session 中是否包含用户的登录信息即可</p>
<p>代码演示 (1)：创建 LoginServlet 程序</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginServlet</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> filterChain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">HttpServletRequest</span> httpServletRequest <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span> servletRequest<span class="token punctuation">;</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> httpServletRequest<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span> user <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//如果等于null，说明还没有登录</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>   httpServletRequest<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"/login.jsp"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span>servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">//登录成功，可以访问Admin目录下的目标资源</span>
            filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>servletRequest<span class="token punctuation">,</span>servletResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">FilterConfig</span> filterConfig<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码演示 (2)：在 web.xml 中编写配置</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token comment">&lt;!--  Filter标签用于配置一个Filter过滤器，用法与Servlet标签一致  --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>LoginServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">></span></span>com.qizegao.Filter.LoginServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">></span></span>LoginServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!--  url标签用于配置拦截路径，也就是访问哪些资源需要被拦截  --></span>
    <span class="token comment">&lt;!--  /表示工程路径，映射到web目录  --></span>
    <span class="token comment">&lt;!--  /*代表指定目录下的所有文件  --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/Admin/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：<br>
直接在浏览器输入：<a target="_blank" rel="noopener" href="http://localhost:8080/MyTest/Admin/a.jsp%EF%BC%8C%E8%B7%B3%E8%BD%AC%E5%88%B0login.jsp%EF%BC%8C%E6%97%A0%E6%B3%95%E8%AE%BF%E9%97%AEa.jsp">http://localhost:8080/MyTest/Admin/a.jsp，跳转到 login.jsp，无法访问 a.jsp</a></p>
<p>注意：<br>
1.Filter 过滤器也支持注解，在首行加 @WebFilter (“拦截路径”)，则无需 web.xml 文件<br>
 2. 浏览器不能直接访问实现 Filter 接口的类，只需访问拦截路径，就会自动的触发 doFilter 方法</p>
<h2 id="三-filter过滤器的生命周期"><a class="markdownIt-Anchor" href="#三-filter过滤器的生命周期">#</a> 三、Filter 过滤器的<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F&amp;spm=1001.2101.3001.7020">生命周期</a></h2>
<p>1. 构造器方法<br>
 2.init 初始化方法<br>
 3.doFilter 方法 (其中有 chain.doFilter 方法)<br>
 4.destroy 方法<br>
其中：① <strong>1 和 2 在 web 工程启动的时候执行 (即在创建 Filter 过滤器)</strong><br>
② 第三步，符合拦截路径的请求发送到服务器的时候，自动的执行，若请求不属于拦截<br>
路径，则不会执行  (每次请求 <code>&lt;/url-pattern&gt;</code>  设置所有对应的资源，都会让这个对应的 filter 执行)<br>
③ 第四步，停止 web 工程的时候执行 (停止 web 工程，也会销毁 Filter 过滤器)</p>
<h2 id="四-filterconfig类"><a class="markdownIt-Anchor" href="#四-filterconfig类">#</a> 四、FilterConfig 类</h2>
<p>1.FilterConfig 类是 Filter 过滤器的配置文件类，每次创建 Filter 的时候，也会创建一个 FilterConfig<br>
 类，其中包含了 Filter 配置文件的配置信息</p>
<p>2.FilterConfig 类的作用是获取 Filter 过滤器的配置文件内容：<br>
(1) 获取 Filter 的名称，即 web.xml 文件中标签的值：<br>
filterConfig.getFilterName();<br>
(2) 获取 web.xml 文件中标签的值 (写在 filter 标签中，可写多个)，如：<br>
<img src="https://img-blog.csdnimg.cn/20200828153846148.png#pic_center" alt=""></p>
<p>(3) 获取 ServletContext 对象：filterConfig.getServletContext ()</p>
<h2 id="五-filterchain过滤器链"><a class="markdownIt-Anchor" href="#五-filterchain过滤器链">#</a> 五、FilterChain 过滤器链</h2>
<p>作用：解决多个过滤器如何一起工作<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200828153906795.png" alt=""></p>
<p>注意：</p>
<ol>
<li>上述两个 Filter 拦截的资源路径相同，代表一定会执行两个 Filter 过滤器的 doFilter 方法， 但因为手动注释不一定执行其中的 chain.doFilter 方法</li>
<li>如果两个 Filter 拦截资源不同，且拦截资源符合 Filter1，不符合 Filter2，则会执行 Filter1 的 doFilter 方法，且执行其中的 chain.doFilter 方法时，不会去执行 Filter2 的 doFilter 方法， 直接去访问资源，之后执行 Filter1 的后置代码 (在 chain.doFilter 之后的均是后置代码)</li>
<li>如果请求的资源不符合过滤器 1 和 2 的拦截路径，两个 doFilter 方法都不执行</li>
<li>前置代码、chain.doFilter 方法、后置代码都在 doFilter 方法中</li>
</ol>
<h2 id="六-filter的拦截路径"><a class="markdownIt-Anchor" href="#六-filter的拦截路径">#</a> 六、Filter 的拦截路径</h2>
<p>1. 精确匹配</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/target.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>表示请求的地址必须为 http://ip:port / 工程路径 /target.jsp，才可以触发 doFilter 方法</p>
<p>2. 目录匹配</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>/admin/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>表示请求的地址必须为 http://ip:port / 工程路径 /admin/ 目录下所有的文件，才可以触发 doFilter 方法</p>
<p>3. 后缀名匹配</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.html<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>表示请求地址必须以.html 结尾才可以触发 doFilter 方法</p>
<pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">></span></span>*.jsp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>表示请求地址必须以.jsp 结尾才可以触发 doFilter 方法</p>
<blockquote>
<p><strong>注意：Filter 过滤器只关心请求的地址是否符合拦截路径，不会关心请求的资源是否存在</strong></p>
</blockquote>
<p>代码演示：FilterChain 过滤器链的使用<br>
 (1) 在 Admin 目录下创建 a.jsp<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200828154126731.png" alt=""></p>
<p>(2) 创建两个 Filter 过滤器</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Filter1</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> resp<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Filter1的前置代码执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Filter1的后置代码执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Filter2</span> <span class="token keyword">implements</span> <span class="token class-name">Filter</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doFilter</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> resp<span class="token punctuation">,</span> <span class="token class-name">FilterChain</span> chain<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Filter2的前置代码执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"Filter2的后置代码执行"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>(3) 在 web.xml 中编写配置<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200828154158408.png" alt=""></p>
<p>运行结果：<br>
在浏览器地址栏输入：<a target="_blank" rel="noopener" href="http://localhost:8080/MyTest/Admin/a.jsp">http://localhost:8080/MyTest/Admin/a.jsp</a><br>
 控制台输出：<br>
<img src="https://img-blog.csdnimg.cn/20200828154207519.png#pic_center" alt=""></p>
<hr>
<h1 id="json和ajax"><a class="markdownIt-Anchor" href="#json和ajax">#</a> JSON 和<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=AJAX&amp;spm=1001.2101.3001.7020"> AJAX</a></h1>
<h3 id="文章目录-4"><a class="markdownIt-Anchor" href="#文章目录-4">#</a> 文章目录</h3>
<ul>
<li><a href="#JSONAJAX_0">JSON 和 AJAX</a></li>
<li>
<ul>
<li><a href="#JSON_3">一、JSON 的介绍</a></li>
<li><a href="#JSONJavaScript_7">二、JSON 在 JavaScript 中的使用</a></li>
<li><a href="#JSON_61">三、JSON 的两个常用方法</a></li>
<li><a href="#JSONJava_83">四、JSON 在 Java 中的使用</a></li>
<li><a href="#AJAX_153">五、AJAX 的介绍</a></li>
<li><a href="#AJAX_159">六、AJAX 的使用</a></li>
<li><a href="#_243">七、案例：校验用户名是否存在</a></li>
</ul>
</li>
</ul>
<h2 id="一-json的介绍"><a class="markdownIt-Anchor" href="#一-json的介绍">#</a> 一、JSON 的介绍</h2>
<ol>
<li>JSON 是一种轻量级的数据交换格式，JSON 采用完全独立于语言的文本格式，很多语言都提供了 对 JSON 的支持 (C、JAVA、JavaScript 等)，这就使得 JSON 成为理想的数据交换格式</li>
<li>数据交换指的是客户端和服务器之间数据的传递格式</li>
</ol>
<h2 id="二-json在javascript中的使用"><a class="markdownIt-Anchor" href="#二-json在javascript中的使用">#</a> 二、JSON 在 JavaScript 中的使用</h2>
<ol>
<li>JSON 的定义<br>
 JSON 是由键值对组成，并且由大括号包围，每个键由引号引起 (不使用引号也可以)，键和值之间 使用冒号进行分割，多组键值对之间由逗号进行分割 (最后一组不加逗号)</li>
</ol>
<p>代码演示：JSON 定义的实例</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> jsonObj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        <span class="token string">"key1"</span><span class="token operator">:</span><span class="token number">12</span><span class="token punctuation">,</span>
        <span class="token string">"key2"</span><span class="token operator">:</span><span class="token string">"abc"</span><span class="token punctuation">,</span>
        <span class="token string">"key3"</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token string">"key4"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token string">"arr"</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">//JSON中套JSON</span>
        <span class="token string">"key5"</span><span class="token operator">:</span><span class="token punctuation">&#123;</span>
            <span class="token string">"key5_1"</span><span class="token operator">:</span><span class="token number">551</span><span class="token punctuation">,</span>
            <span class="token string">"key5_2"</span><span class="token operator">:</span><span class="token string">"key5_2"</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token comment">//数组中放JSON</span>
        <span class="token string">"key6"</span><span class="token operator">:</span><span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
            <span class="token string">"key6_1_1"</span><span class="token operator">:</span><span class="token number">611</span><span class="token punctuation">,</span>
            <span class="token string">"key6_1_2"</span><span class="token operator">:</span><span class="token number">621</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
            <span class="token string">"key6_2_1"</span><span class="token operator">:</span><span class="token number">621</span><span class="token punctuation">,</span>
            <span class="token string">"key6_2_2"</span><span class="token operator">:</span><span class="token number">622</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ol start="2">
<li>JSON 的访问<br>
 JSON 本身是一个对象，JSON 中的 key 可以理解为是对象中的一个属性，JSON 中的 key 的访问与 访问对象的属性一致：JSON 对象.key</li>
</ol>
<p>代码演示：JSON 对象的访问</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html">alert(typeof (jsonObj)); //Object
alert(jsonObj.key1); //12
alert(jsonObj.key4); //11,arr,false
//JSON中数组值的遍历
for (var i = 0; i &lt; jsonObj.key4.length; i++) &#123;
    alert(jsonObj.key4[i]);
&#125;
//访问JSON中定义的JSON
alert(jsonObj.key5.key5_1); //551
alert(jsonObj.key6); //[object Object],[object Object]
//取出来的每一个元素都是JSON对象
var key6Element = jsonObj.key6[0];
alert(key6Element.key6_1_1); //611
alert(key6Element.key6_1_2); //621

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="三-json的两个常用方法"><a class="markdownIt-Anchor" href="#三-json的两个常用方法">#</a> 三、JSON 的两个常用方法</h2>
<ol>
<li>
<p>JSON 的存在有两种形式<br>
 (1) 对象的形式存在，称为 JSON 对象<br>
此形式常用于操作 JSON 中的数据<br>
 (2) 字符串的形式存在，称为 JSON 字符串<br>
此形式常用于在客户端和服务器之间进行数据的交换</p>
</li>
<li>
<p>JSON 的两个方法<br>
 (1) JSON.stringify (JSON 对象)：把 JSON 对象转换成为 JSON 字符串 (类似 JAVA 中的 toString 方法)<br>
(2) JSON.parse (字符串)：把 JSON 字符串转换成为 JSON 对象</p>
</li>
</ol>
<p>代码演示：JSON 中的两个方法</p>
<pre class="line-numbers language-js" data-language="js"><code class="language-js"><span class="token keyword">var</span> stringify <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>jsonObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>stringify<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//JSON对象中的所有内容全部转换为字符串</span>
<span class="token keyword">var</span> jsonObj2 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>stringify<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>jsonObj2<span class="token punctuation">.</span>key1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//12</span>
<span class="token function">alert</span><span class="token punctuation">(</span>jsonObj2<span class="token punctuation">.</span>key2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//abc</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="四-json在java中的使用"><a class="markdownIt-Anchor" href="#四-json在java中的使用">#</a> 四、JSON 在 Java 中的使用</h2>
<ol>
<li>
<p>需要先导入 jar 包<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200828154702869.png" alt=""></p>
</li>
<li>
<p>创建 Gson 实例，调用 (1) toJson () 方法：将参数转换成 JSON 字符串<br>
 (2) fromJson () 方法：将参数 JSON 字符串还原</p>
</li>
</ol>
<p>代码演示：JavaBean 和 JSON 的转换</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">//Person类中有id和name属性</span>
    <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token string">"jay"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建Gson对象实例</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//toString方法将java对象转换成JSON字符串</span>
    <span class="token class-name">String</span> toJson <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>toJson<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&#123;"id":12,"name":"jay"&#125;</span>
    <span class="token comment">//fromJson方法将JSON字符串转换成Java对象</span>
    <span class="token comment">//第一个参数是需要转换的JSON字符串</span>
    <span class="token comment">//第二个参数是转换回去的Java对象类型</span>
    <span class="token class-name">Person</span> person1 <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>toJson<span class="token punctuation">,</span> <span class="token class-name">Person</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>person1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Person&#123;id=12, name='jay'&#125;</span>
<span class="token punctuation">&#125;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码演示：List 集合和 JSON 的转换</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">></span></span> personList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    personList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">"Tom"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    personList<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">"Jerry"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//创建Gson对象</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//把List集合转换成为JSON字符串</span>
    <span class="token class-name">String</span> s <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>personList<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[&#123;"id":1,"name":"Tom"&#125;,&#123;"id":2,"name":"Jerry"&#125;]</span>
    <span class="token comment">/*将JSON字符串还原，如果还原的是集合，第二个参数是Type类型
      首先创建一个类(PersonListType)，此类继承TypeToken&lt;T>，
      T泛型是要转换回去的类型，T是List&lt;Person>或ArrayList&lt;Person>
      则此类为PersonListType extends TypeToken&lt;ArrayList&lt;Person>>
      此类什么都不做，类体是空的 */</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Person</span><span class="token punctuation">></span></span> list <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">PersonListType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>list<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[Person&#123;id=1, name='Tom'&#125;, Person&#123;id=2, name='Jerry'&#125;]</span>
<span class="token punctuation">&#125;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码演示：Map 集合和 JSON 的转换</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">test3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">Person</span><span class="token punctuation">></span></span> personMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    personMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"Dog"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    personMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">"Cat"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> <span class="token class-name">JsonString</span> <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>personMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">JsonString</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&#123;"1":&#123;"id":1,"name":"Dog"&#125;,"2":&#123;"id":2,"name":"Cat"&#125;&#125;</span>
    <span class="token comment">//将JSON字符串转换为集合时，还有一种简便方式：匿名内部类</span>
    <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">Person</span><span class="token punctuation">></span></span> personMap2 <span class="token operator">=</span>
         gson<span class="token punctuation">.</span><span class="token function">fromJson</span><span class="token punctuation">(</span><span class="token class-name">JsonString</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">TypeToken</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HashMap</span><span class="token punctuation">&lt;</span><span class="token class-name">Integer</span><span class="token punctuation">,</span><span class="token class-name">Person</span><span class="token punctuation">></span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>personMap2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&#123;1=Person&#123;id=1, name='Dog'&#125;, 2=Person&#123;id=2, name='Cat'&#125;&#125;</span>
<span class="token punctuation">&#125;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="五-ajax的介绍"><a class="markdownIt-Anchor" href="#五-ajax的介绍">#</a> 五、AJAX 的介绍</h2>
<ol>
<li>
<p>异步和同步的概念：<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/2020082815474565.png" alt=""></p>
</li>
<li>
<p>AJAX 的概念：ASynchronous JavaScript And XML (异步的 JavaScript 和 XML)，通过在后台与服务器 进行少量数据交换，Ajax 可以使网页实现异步更新。这意味着可以在不重新加载整 个网页的情况下，对网页的某部分进行更新。传统的网页 (不使用 Ajax) 如果需要更 新内容，必须重载整个网页页面。</p>
</li>
</ol>
<h2 id="六-ajax的使用"><a class="markdownIt-Anchor" href="#六-ajax的使用">#</a> 六、AJAX 的使用</h2>
<ol>
<li>JavaScript 实现方式 (只需了解，自行查阅资料)</li>
<li>jQuery 实现方式：<br>
(1) $.ajax ({键值对}) (多个键值对之间使用逗号隔开，最后一个不加逗号)</li>
</ol>
<p>代码演示：使用 $.ajax () 发送异步请求</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>		    		
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>			  		
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jquery-1.7.2.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>  
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"> <span class="token comment">//定义单击事件执行的方法</span>
        <span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">//使用$.ajax()发送异步请求</span>
            $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
                url<span class="token operator">:</span><span class="token string">"http://localhost:8080/MyTest/ajaxServlet"</span><span class="token punctuation">,</span> <span class="token comment">//请求路径</span>
                type<span class="token operator">:</span><span class="token string">"POST"</span><span class="token punctuation">,</span> <span class="token comment">//请求方式，不写默认是get</span>
                <span class="token comment">//data表示请求参数，有两种书写方式</span>
                data<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token string">"username"</span><span class="token operator">:</span><span class="token string">"jay"</span><span class="token punctuation">,</span><span class="token string">"age"</span><span class="token operator">:</span><span class="token number">22</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token comment">//JSON形式，推荐</span>
                <span class="token comment">/*第二种：data:"username=jay&amp;age=22"*/</span>
                <span class="token comment">//success表示响应成功之后自动执行的函数，参数可任意定义，</span>
                <span class="token comment">//用来接收服务器响应的结果的值</span>
                <span class="token function-variable function">success</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token function">alert</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> 
                <span class="token comment">//error表示响应出错时自动执行的函数</span>
                <span class="token function-variable function">error</span><span class="token operator">:</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"出错了！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> 
                dataType<span class="token operator">:</span><span class="token string">"text"</span><span class="token comment">//设置接收到的响应的格式</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span> </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>发送异步请求<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value javascript language-javascript"><span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/ajaxServlet"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AjaxServlet</span> <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doPost</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">"hello!"</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">doPost</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：<br>
<img src="https://img-blog.csdnimg.cn/20200828154841105.png#pic_center" alt=""></p>
<p>点击之后出现 hello！jay</p>
<pre class="line-numbers language-none"><code class="language-none">(2) $.get()：发送get请求<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>语法：$.get (url，[data]，[callback]，[type])<br>
 参数：url：请求路径<br>
 data：请求参数 (可选)<br>
 callback：响应成功之后执行的函数 (可选)<br>
 type：响应结果的类型 (可选)</p>
<pre class="line-numbers language-none"><code class="language-none">(3) $.post()：发送post请求<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>语法：$.post (url，[data]，[callback]，[type])<br>
 参数：url：请求路径<br>
 data：请求参数 (可选)<br>
 callback：响应成功之后执行的函数 (可选)<br>
 type：响应结果的类型 (可选)<br>
(4) 举例：<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200828155021730.png" alt=""></p>
<p>注意：1. 可以通过谷歌浏览器的 F12，在 console 中查看错误信息<br>
 2. 如果要执行响应出错后的函数，必须使用 . a j a x () ， 而 .ajax ()，而 .ajax ()，而.get () 与 $.post () 仅有响应成功后的函数</p>
<h2 id="七-案例校验用户名是否存在"><a class="markdownIt-Anchor" href="#七-案例校验用户名是否存在">#</a> 七、案例：校验用户名是否存在</h2>
<ol>
<li>
<p>案例要求<br>
<img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200828155030993.png" alt=""></p>
</li>
<li>
<p>细节说明：<br>
服务器与客户端传输 JSON 格式的数据时，有两种方法：<br>
(1) 三种发送异步请求的方式中将响应结果的类型设置为”json”<br>
(2) 服务器设置 MIME 类型，jQuery 会根据 HTTP 的 MIME 类型智能判断响应结果类型：<br>
response.setContentType(“application/json;charset=utf-8”);</p>
</li>
</ol>
<p>代码演示 1：创建注册页面</p>
<pre class="line-numbers language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jquery-3.3.1.min.js<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/javascript<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript"> <span class="token comment">//页面加载完成事件</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token comment">//给username绑定失去焦点事件</span>
            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#u_name"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">blur</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                <span class="token comment">//获取username文本框的值</span>
                <span class="token keyword">var</span> username <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//发送异步请求，接收的数据格式是&#123;"userExist":boolean,"msg":String&#125;</span>
                $<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">"http://localhost:8080/MyTest/registServlet"</span><span class="token punctuation">,</span>
                    <span class="token punctuation">&#123;</span>username<span class="token operator">:</span>username<span class="token punctuation">&#125;</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                    <span class="token comment">//获取span标签对象，方便赋值</span>
                    <span class="token keyword">var</span> span <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"#s_pan"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//判断用户名是否存在</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>userExist<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
                        span<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">,</span><span class="token string">"red"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        span<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
                        span<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">,</span><span class="token string">"green"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        span<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">&#125;</span>
                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>u_name<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>请输入用户名<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>s_pan<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>请输入密码<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>注册<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>代码演示 2：创建 Servlet 程序</p>
<pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span><span class="token string">"/registServlet"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> registServlet <span class="token keyword">extends</span> <span class="token class-name">HttpServlet</span> <span class="token punctuation">&#123;</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doGet</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ServletException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">//设置响应的格式为JSON</span>
        response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"application/json;charset=utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">"username"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//定义一个Map集合，存放响应的JSON数据</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">></span></span> <span class="token class-name">HashMap</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//判断用户名是否已经存在(假设此时只存在一个用户名Tom)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">"Tom"</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">HashMap</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"userExist"</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">HashMap</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"此用户名太受欢迎,请更换一个"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>
            <span class="token class-name">HashMap</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"userExist"</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">HashMap</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> <span class="token string">"用户名可用"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token comment">//将Map集合转换为JSON数据并回传给客户端</span>
        <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> json <span class="token operator">=</span> gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token class-name">HashMap</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        response<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>json<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>运行结果：<br>
<img src="https://img-blog.csdnimg.cn/2020082815511140.png#pic_center" alt=""></p>
<p><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/main/notes-img/20200828155113173.png" alt=""></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Harry Qu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://harryqu1229.github.io/2021/12/12/JavaWeb%E5%B0%9A%E7%A1%85%E8%B0%B7%E8%80%81%E7%89%88(%E4%B8%8D%E5%8C%85%E5%90%ABjsp%E7%AD%89)/">https://harryqu1229.github.io/2021/12/12/JavaWeb%E5%B0%9A%E7%A1%85%E8%B0%B7%E8%80%81%E7%89%88(%E4%B8%8D%E5%8C%85%E5%90%ABjsp%E7%AD%89)/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/web/">web</a><a class="post-meta__tags" href="/tags/java/">java</a><a class="post-meta__tags" href="/tags/javaweb/">javaweb</a></div><div class="post_share"><div class="addthis_inline_share_toolbox"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-621848f44e1c3724" async="async"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/12/12/JavaWeb%E5%B0%9A%E7%A1%85%E8%B0%B7(http,servlet,MVC,Thymeleaf,%E4%BC%9A%E8%AF%9D%E6%8E%A7%E5%88%B6,%E8%BF%87%E6%BB%A4%E5%99%A8,%E7%9B%91%E5%90%AC%E5%99%A8)/"><img class="prev-cover" src="https://w.wallhaven.cc/full/rd/wallhaven-rdw8dj.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">My JavaWeb notes</div></div></a></div><div class="next-post pull-right"><a href="/2021/12/12/JavaWeb%E7%8B%82%E7%A5%9E%E8%AF%B4/"><img class="next-cover" src="https://raw.githubusercontent.com/HarryQu1229/image-host/18bbc356ddf5fcd5544ddb91bb7b35a99ebfef25/notes-img/download%20(1).png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">JavaWeb 狂神说</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2021/12/12/JavaWeb%E7%8B%82%E7%A5%9E%E8%AF%B4/" title="JavaWeb 狂神说"><img class="cover" src="https://raw.githubusercontent.com/HarryQu1229/image-host/18bbc356ddf5fcd5544ddb91bb7b35a99ebfef25/notes-img/download%20(1).png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-12</div><div class="title">JavaWeb 狂神说</div></div></a></div><div><a href="/2021/12/12/JavaWeb%E5%B0%9A%E7%A1%85%E8%B0%B7(http,servlet,MVC,Thymeleaf,%E4%BC%9A%E8%AF%9D%E6%8E%A7%E5%88%B6,%E8%BF%87%E6%BB%A4%E5%99%A8,%E7%9B%91%E5%90%AC%E5%99%A8)/" title="My JavaWeb notes"><img class="cover" src="https://w.wallhaven.cc/full/rd/wallhaven-rdw8dj.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-12-12</div><div class="title">My JavaWeb notes</div></div></a></div><div><a href="/2022/01/01/%E5%BA%94%E7%94%A8%E4%BB%A3%E7%A0%81%E5%88%86%E5%B1%82/" title="Model,View,Controller"><img class="cover" src="https://w.wallhaven.cc/full/k7/wallhaven-k7v9yq.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-01</div><div class="title">Model,View,Controller</div></div></a></div><div><a href="/2022/01/01/%E9%98%BF%E9%87%8C%E9%9D%A2%E7%BB%8F/" title="Alibaba Interview Questions"><img class="cover" src="https://w.wallhaven.cc/full/rd/wallhaven-rdw8dj.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-01</div><div class="title">Alibaba Interview Questions</div></div></a></div><div><a href="/2022/02/25/JDBC/" title="My JDBC notes"><img class="cover" src="https://w.wallhaven.cc/full/wq/wallhaven-wqvov7.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-25</div><div class="title">My JDBC notes</div></div></a></div><div><a href="/2022/02/25/Java%20%E5%9F%BA%E7%A1%80/" title="Java Basics(javase)"><img class="cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-25</div><div class="title">Java Basics(javase)</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div><div id="comment-switch"><span class="first-comment">Disqus</span><span class="switch-btn"></span><span class="second-comment">Gitalk</span></div></div><div class="comment-wrap"><div><div id="disqus_thread"></div></div><div><div id="gitalk-container"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://raw.githubusercontent.com/HarryQu1229/image-host/6aca34ee52f40fe1b2d637474f90111e2c151939/notes-img/%E5%85%B6%E4%B8%AD%E5%8C%85%E6%8B%AC%E5%9B%BE%E7%89%87%EF%BC%9A%7B%7B%20pinTitle%20%7D%7D_m6kogp.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Harry Qu</div><div class="author-info__description">Software Engineering Student</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">171</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">89</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">60</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/HarryQu1229"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://www.linkedin.com/in/harry-qu-a0a38220a" target="_blank" title="LinkedIn"><i class="fab fa-linkedin"></i></a><a class="social-icon" href="https://github.com/HarryQu1229" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:Harryqu666@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="weixin://dl/chat?harry666ya" target="_blank" title="Wechat"><i class="fab fa-weixin"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">be healthy, stay safe</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#servlet-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text"> Servlet 基本使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95"><span class="toc-number">1.0.1.</span> <span class="toc-text"> 文章目录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-servlet%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text"> 一、Servlet 介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0servlet%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.2.</span> <span class="toc-text"> 二、手动实现 Servlet 程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-servlet%E7%A8%8B%E5%BA%8F%E7%9A%84%E8%AE%BF%E9%97%AE%E5%8E%9F%E7%90%86"><span class="toc-number">1.3.</span> <span class="toc-text"> 三、Servlet 程序的访问原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-servlet%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%B8%B8%E8%A7%81%E9%94%99%E8%AF%AF"><span class="toc-number">1.4.</span> <span class="toc-text"> 四、Servlet 程序的常见错误</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-url-pattern%E4%B8%AD%E9%85%8D%E7%BD%AE%E7%9A%84%E8%B7%AF%E5%BE%84%E6%B2%A1%E6%9C%89%E4%BB%A5%E6%96%9C%E6%9D%A0%E6%89%93%E5%A4%B4"><span class="toc-number">1.4.1.</span> <span class="toc-text"> 1. url-pattern 中配置的路径没有以斜杠打头</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-servlet-name%E4%B8%AD%E7%9A%84%E4%B8%A4%E4%B8%AA%E6%98%A0%E5%B0%84%E5%80%BC%E4%B8%8D%E4%B8%80%E8%87%B4"><span class="toc-number">1.4.2.</span> <span class="toc-text"> 2. servlet-name 中的两个映射值不一致</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-servlet-class%E6%A0%87%E7%AD%BE%E7%9A%84%E5%85%A8%E7%B1%BB%E5%90%8D%E9%85%8D%E7%BD%AE%E9%94%99%E8%AF%AF"><span class="toc-number">1.4.3.</span> <span class="toc-text"> 3. servlet-class 标签的全类名配置错误</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-servlet%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.5.</span> <span class="toc-text"> 五、Servlet 的生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-get%E5%92%8Cpost%E8%AF%B7%E6%B1%82%E7%9A%84%E4%B8%8D%E5%90%8C%E5%A4%84%E7%90%86"><span class="toc-number">1.6.</span> <span class="toc-text"> 六、GET 和 POST 请求的不同处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83-%E7%BB%A7%E6%89%BFhttpservlet%E7%B1%BB%E5%AE%9E%E7%8E%B0servlet%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.7.</span> <span class="toc-text"> 七、继承 HttpServlet 类实现 Servlet 程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB-%E4%BD%BF%E7%94%A8idea%E5%88%9B%E5%BB%BAservlet%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.8.</span> <span class="toc-text"> 八、使用 IDEA 创建 Servlet 程序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D-servlet%E6%8E%A5%E5%8F%A3%E7%9A%84%E7%BB%A7%E6%89%BF%E4%BD%93%E7%B3%BB"><span class="toc-number">1.9.</span> <span class="toc-text"> 九、Servlet 接口的继承体系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81-servletconfig%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.10.</span> <span class="toc-text"> 十、ServletConfig 接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80-servletcontext%E6%8E%A5%E5%8F%A3"><span class="toc-number">1.11.</span> <span class="toc-text"> 十一、ServletContext 接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C-http%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.12.</span> <span class="toc-text"> 十二、HTTP 协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%90%AB%E4%B9%89"><span class="toc-number">1.12.1.</span> <span class="toc-text"> 1. 含义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%AF%B7%E6%B1%82%E7%9A%84http%E5%8D%8F%E8%AE%AE%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.12.2.</span> <span class="toc-text"> 2. 请求的 HTTP 协议格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%93%8D%E5%BA%94%E7%9A%84http%E5%8D%8F%E8%AE%AE%E6%A0%BC%E5%BC%8F"><span class="toc-number">1.12.3.</span> <span class="toc-text"> 3. 响应的 HTTP 协议格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%B8%B8%E8%A7%81%E7%9A%84%E5%93%8D%E5%BA%94%E7%A0%81"><span class="toc-number">1.12.4.</span> <span class="toc-text"> 4. 常见的响应码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-mime%E7%B1%BB%E5%9E%8B%E8%AF%B4%E6%98%8E"><span class="toc-number">1.12.5.</span> <span class="toc-text"> 5. MIME 类型说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%89-%E8%B0%B7%E6%AD%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9F%A5%E7%9C%8Bhttp%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.13.</span> <span class="toc-text"> 十三、谷歌浏览器查看 HTTP 协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%9B%9B-httpservletrequest%E7%B1%BB"><span class="toc-number">1.14.</span> <span class="toc-text"> 十四、HttpServletRequest 类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%94-%E8%AF%B7%E6%B1%82%E8%BD%AC%E5%8F%91"><span class="toc-number">1.15.</span> <span class="toc-text"> 十五、请求转发</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%85%AD-base%E6%A0%87%E7%AD%BE%E7%9A%84%E4%BD%9C%E7%94%A8"><span class="toc-number">1.16.</span> <span class="toc-text"> 十六、base 标签的作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%83-%E5%9C%A8%E4%B8%8D%E5%90%8C%E6%83%85%E5%86%B5%E4%B8%8B%E7%9A%84%E4%B8%8D%E5%90%8C%E6%84%8F%E4%B9%89"><span class="toc-number">1.17.</span> <span class="toc-text"> 十七、”&#x2F;” 在不同情况下的不同意义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%85%AB-httpservletresponse%E7%B1%BB"><span class="toc-number">1.18.</span> <span class="toc-text"> 十八、HttpServletResponse 类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B9%9D-%E8%AF%B7%E6%B1%82%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">1.19.</span> <span class="toc-text"> 十九、请求重定向</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%8A%E4%BC%A0%E5%92%8C%E4%B8%8B%E8%BD%BD"><span class="toc-number">2.</span> <span class="toc-text"> 文件的上传和下载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95-2"><span class="toc-number">2.0.1.</span> <span class="toc-text"> 文章目录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E6%96%87%E4%BB%B6%E7%9A%84%E4%B8%8A%E4%BC%A0%E4%BB%8B%E7%BB%8D"><span class="toc-number">2.1.</span> <span class="toc-text"> 一、文件的上传介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AF%B9%E4%B8%8A%E4%BC%A0%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E8%A7%A3%E6%9E%90"><span class="toc-number">2.2.</span> <span class="toc-text"> 二、服务器对上传的数据进行解析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="toc-number">2.3.</span> <span class="toc-text"> 三、文件下载的过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E8%BF%87%E7%A8%8B%E8%AF%A6%E8%A7%A3"><span class="toc-number">2.4.</span> <span class="toc-text"> 四、文件下载过程详解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-%E4%B8%AD%E6%96%87%E5%90%8D%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E7%9A%84%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98"><span class="toc-number">2.5.</span> <span class="toc-text"> 五、中文名下载文件的乱码问题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-base64%E7%BC%96%E8%A7%A3%E7%A0%81"><span class="toc-number">2.6.</span> <span class="toc-text"> 六、BASE64 编解码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83-%E7%81%AB%E7%8B%90%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6%E4%B9%B1%E7%A0%81%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3"><span class="toc-number">2.7.</span> <span class="toc-text"> 七、火狐浏览器下载文件乱码问题的解决</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#cookie-and-session"><span class="toc-number">3.</span> <span class="toc-text"> Cookie and Session</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF"><span class="toc-number">3.1.</span> <span class="toc-text"> 一、会话技术</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-cookie"><span class="toc-number">3.2.</span> <span class="toc-text"> 二、Cookie</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-cookie%E7%9A%84%E7%BB%86%E8%8A%82"><span class="toc-number">3.3.</span> <span class="toc-text"> 三、Cookie 的细节</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-cookie%E7%9A%84%E7%89%B9%E7%82%B9%E5%92%8C%E4%BD%9C%E7%94%A8"><span class="toc-number">3.4.</span> <span class="toc-text"> 四、Cookie 的特点和作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-cookie%E6%A1%88%E4%BE%8B%E8%AE%B0%E5%BD%95%E4%B8%8A%E4%B8%80%E6%AC%A1%E8%AE%BF%E9%97%AE%E7%9A%84%E6%97%B6%E9%97%B4"><span class="toc-number">3.5.</span> <span class="toc-text"> 五、Cookie 案例：记录上一次访问的时间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-session%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.6.</span> <span class="toc-text"> 六、Session 的介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83-session%E7%9A%84%E7%BB%86%E8%8A%82"><span class="toc-number">3.7.</span> <span class="toc-text"> 七、Session 的细节</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AB-cookie%E6%A1%88%E4%BE%8B%E5%85%8D%E7%94%A8%E6%88%B7%E5%90%8D%E7%99%BB%E5%BD%95"><span class="toc-number">3.8.</span> <span class="toc-text"> 八、Cookie 案例：免用户名登录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D-%E8%B0%B7%E6%AD%8C%E6%B5%8F%E8%A7%88%E5%99%A8%E6%9F%A5%E7%9C%8Bcookie"><span class="toc-number">3.9.</span> <span class="toc-text"> 九、谷歌浏览器查看 Cookie</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81-%E9%AA%8C%E8%AF%81%E7%A0%81%E7%9A%84%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86"><span class="toc-number">3.10.</span> <span class="toc-text"> 十、验证码的底层原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80-%E8%B0%B7%E6%AD%8C%E5%9B%BE%E7%89%87%E9%AA%8C%E8%AF%81%E7%A0%81%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">3.11.</span> <span class="toc-text"> 十一、谷歌图片验证码的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C-%E7%82%B9%E5%87%BB%E5%9B%BE%E7%89%87%E5%88%87%E6%8D%A2%E9%AA%8C%E8%AF%81%E7%A0%81"><span class="toc-number">3.12.</span> <span class="toc-text"> 十二、点击图片切换验证码</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#filter%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">4.</span> <span class="toc-text"> Filter 过滤器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95-3"><span class="toc-number">4.0.1.</span> <span class="toc-text"> 文章目录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-filter%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-number">4.1.</span> <span class="toc-text"> 一、Filter 过滤器的介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-filter%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">4.2.</span> <span class="toc-text"> 二、Filter 过滤器的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-filter%E8%BF%87%E6%BB%A4%E5%99%A8%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">4.3.</span> <span class="toc-text"> 三、Filter 过滤器的生命周期</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-filterconfig%E7%B1%BB"><span class="toc-number">4.4.</span> <span class="toc-text"> 四、FilterConfig 类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-filterchain%E8%BF%87%E6%BB%A4%E5%99%A8%E9%93%BE"><span class="toc-number">4.5.</span> <span class="toc-text"> 五、FilterChain 过滤器链</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-filter%E7%9A%84%E6%8B%A6%E6%88%AA%E8%B7%AF%E5%BE%84"><span class="toc-number">4.6.</span> <span class="toc-text"> 六、Filter 的拦截路径</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#json%E5%92%8Cajax"><span class="toc-number">5.</span> <span class="toc-text"> JSON 和 AJAX</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E7%AB%A0%E7%9B%AE%E5%BD%95-4"><span class="toc-number">5.0.1.</span> <span class="toc-text"> 文章目录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-json%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-number">5.1.</span> <span class="toc-text"> 一、JSON 的介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-json%E5%9C%A8javascript%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">5.2.</span> <span class="toc-text"> 二、JSON 在 JavaScript 中的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-json%E7%9A%84%E4%B8%A4%E4%B8%AA%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">5.3.</span> <span class="toc-text"> 三、JSON 的两个常用方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-json%E5%9C%A8java%E4%B8%AD%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">5.4.</span> <span class="toc-text"> 四、JSON 在 Java 中的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-ajax%E7%9A%84%E4%BB%8B%E7%BB%8D"><span class="toc-number">5.5.</span> <span class="toc-text"> 五、AJAX 的介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-ajax%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">5.6.</span> <span class="toc-text"> 六、AJAX 的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83-%E6%A1%88%E4%BE%8B%E6%A0%A1%E9%AA%8C%E7%94%A8%E6%88%B7%E5%90%8D%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8"><span class="toc-number">5.7.</span> <span class="toc-text"> 七、案例：校验用户名是否存在</span></a></li></ol></li></ol></div></div><div class="card-widget card-map"><div class="card-content"><div class="item-headline"><i class="fa fa-globe-asia" aria-hidden="true"></i><span>Visitor Map</span></div><script id="clstr_globe" type="text/javascript" defer="defer" src="//clustrmaps.com/globe.js?d=4LA950xi3DtQgUHPlkO0mo-n_QgrcOu-1BIiVpExg7k"></script></div></div><div class="card-widget card-pixiv"><div class="card-content"><div class="item-headline"><i class="fa fa-image" aria-hidden="true"></i><span>Pixiv Top50</span><iframe src="https://cloud.mokeyjay.com/pixiv" frameborder="0" style="width:99%;height:380px;margin:0;"></iframe></div></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/04/02/linux%E5%B0%8F%E7%AC%94%E8%AE%B0/" title="Linux easy notes"><img src="https://w.wallhaven.cc/full/wq/wallhaven-wqvov7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux easy notes"/></a><div class="content"><a class="title" href="/2022/04/02/linux%E5%B0%8F%E7%AC%94%E8%AE%B0/" title="Linux easy notes">Linux easy notes</a><time datetime="2022-04-01T11:00:00.000Z" title="Created 2022-04-02 00:00:00">2022-04-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/02/linux%E7%9A%84%E4%B8%80%E4%BA%9B%E5%91%BD%E4%BB%A4/" title="Linux commands"><img src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux commands"/></a><div class="content"><a class="title" href="/2022/04/02/linux%E7%9A%84%E4%B8%80%E4%BA%9B%E5%91%BD%E4%BB%A4/" title="Linux commands">Linux commands</a><time datetime="2022-04-01T11:00:00.000Z" title="Created 2022-04-02 00:00:00">2022-04-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/04/02/Linux/" title="Linux notes"><img src="https://w.wallhaven.cc/full/v9/wallhaven-v9v9o5.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux notes"/></a><div class="content"><a class="title" href="/2022/04/02/Linux/" title="Linux notes">Linux notes</a><time datetime="2022-04-01T11:00:00.000Z" title="Created 2022-04-02 00:00:00">2022-04-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/01/nodejs/" title="Nodejs notes"><img src="https://w.wallhaven.cc/full/q2/wallhaven-q2vzx5.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Nodejs notes"/></a><div class="content"><a class="title" href="/2022/03/01/nodejs/" title="Nodejs notes">Nodejs notes</a><time datetime="2022-02-28T11:00:00.000Z" title="Created 2022-03-01 00:00:00">2022-03-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/01/%E5%88%9D%E4%B8%AD%E7%BA%A7%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/" title="Frontend interview questions"><img src="https://w.wallhaven.cc/full/8o/wallhaven-8oply1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Frontend interview questions"/></a><div class="content"><a class="title" href="/2022/03/01/%E5%88%9D%E4%B8%AD%E7%BA%A7%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/" title="Frontend interview questions">Frontend interview questions</a><time datetime="2022-02-28T11:00:00.000Z" title="Created 2022-03-01 00:00:00">2022-03-01</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By Harry Qu</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="Chat"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Local search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script>function panguFn () {
  if (typeof pangu === 'object') pangu.autoSpacingPage()
  else {
    getScript('https://cdn.jsdelivr.net/npm/pangu/dist/browser/pangu.min.js')
      .then(() => {
        pangu.autoSpacingPage()
      })
  }
}

function panguInit () {
  if (false){
    GLOBAL_CONFIG_SITE.isPost && panguFn()
  } else {
    panguFn()
  }
}

document.addEventListener('DOMContentLoaded', panguInit)</script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadDisqus () {
  var disqus_config = function () {
    this.page.url = 'https://harryqu1229.github.io/2021/12/12/JavaWeb%E5%B0%9A%E7%A1%85%E8%B0%B7%E8%80%81%E7%89%88(%E4%B8%8D%E5%8C%85%E5%90%ABjsp%E7%AD%89)/'
    this.page.identifier = '2021/12/12/JavaWeb尚硅谷老版(不包含jsp等)/'
    this.page.title = 'JavaWeb 尚硅谷老版'
  };

  window.disqusReset = () => {
    DISQUS.reset({
      reload: true,
      config: disqus_config
    })
  }

  if (window.DISQUS) disqusReset()
  else {
    (function() { 
      var d = document, s = d.createElement('script');
      s.src = 'https://harry-study-blog.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  }
}

if ('Disqus' === 'Disqus' || !false) {
  if (false) btf.loadComment(document.getElementById('disqus_thread'), loadDisqus)
  else loadDisqus()
} else {
  function loadOtherComment () {
    loadDisqus()
  }
}
</script><script>if (window.DISQUSWIDGETS === undefined) {
  var d = document, s = d.createElement('script');
  s.src = 'https://harry-study-blog.disqus.com/count.js';
  s.id = 'dsq-count-scr';
  (d.head || d.body).appendChild(s);
} else {
  DISQUSWIDGETS.getCount({reset: true});
}</script><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '5df1e915e0fa867b50de',
      clientSecret: 'ce1cb793fe49078ee9d0102d3326d0d50ff6937b',
      repo: 'blog-comments-storage',
      owner: 'HarryQu1229',
      admin: ['HarryQu1229'],
      id: 'd86e22ac2b47c27d5e50395cfaba1a47',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Disqus' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[image]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[link]') // replace url
    content = content.replace(/<code>.*?<\/code>/gi, '[code]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    fetch('https://disqus.com/api/3.0/forums/listPosts.json?forum=harry-study-blog&related=thread&limit=6&api_key=B5XFmdGuVaYDW7OIBakffpXoKorvphwRiwONIol4puEtr8YiwYAMAk2K7QcExNLY')
      .then(response => response.json())
      .then(data => {
        const disqusArray = data.response.map(item => {
          return {
            'avatar': item.author.avatar.cache,
            'content': changeContent(item.message),
            'nick': item.author.name,
            'url': item.url,
            'date': item.createdAt
          }
        })

        saveToLocal.set('disqus-newest-comments', JSON.stringify(disqusArray), 10/(60*24))
        generateHtml(disqusArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "Unable to get the data, please make sure the settings are correct."
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick}</span><time> / ${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += 'No Comment'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('disqus-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><div class="aplayer no-destroy" data-id="2809513713" data-server="netease" data-type="playlist" data-autoplay="false" data-fixed="true" data-order="random" data-theme="#e9ccd3"> </div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script>((window.gitter = {}).chat = {}).options = {
  disableDefaultChat: true,
};
document.addEventListener('gitter-sidecar-ready', (e) => {
  const GitterChat = e.detail.Chat
  let chat

  function initGitter () {
    chat = new GitterChat({
      room: 'HarryStudyBlog/community',
      activationElement: '#chat_btn'
    });
  }

  initGitter()

  if (true) {
    document.addEventListener('pjax:complete', () => {
      chat.destroy()
      initGitter()
    })
  }

})</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async="async" defer="defer"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = ["title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_footer_beautify_injector_config(){
    var parent_div_git = document.getElementById('footer-wrap');
    var item_html = '<div id="workboard"></div><div id="ghbdages" style="overflow:hidden;max-height:90px;height:auto;text-align:center;margin-top:10px"><div class="swiper-wrapper"><div class="swiper-slide"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="博客框架为Hexo_v5.4.0"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="主题版本Butterfly_v3.8.2"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://www.jsdelivr.com/" style="margin-inline:5px" title="本站使用JsDelivr为静态资源提供CDN加速"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsDelivr" alt=""/></a></div><div class="swiper-slide"><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="本站采用双线部署，默认线路托管于Vercel"><img src="https://img.shields.io/badge/Hosted-Vercel-brightgreen?style=flat&amp;logo=Vercel" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com/" style="margin-inline:5px" title="本站采用双线部署，联通线路托管于Coding"><img src="https://img.shields.io/badge/Hosted-Coding-0cedbe?style=flat&amp;logo=Codio" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="本站项目由Github托管"><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a></div><div class="swiper-slide"><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></div></div></div><style>a.github-badge:hover:before {display:none}</style>';
    console.log('已挂载butterfly_footer_beautify')
    parent_div_git.insertAdjacentHTML("beforeend",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_footer_beautify_injector_config();
  }
  else if (epage === cpage){
    butterfly_footer_beautify_injector_config();
  }
  </script><script async src="/js/footer-beautify-runtime.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-footer-beautify/lib/swiperbdage_init.min.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<div class="recent-post-item" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 280px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('已挂载gitcalendar')
      }

    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("https://gitcalendar.akilar.top/api?HarryQu1229",['#ebedf0', '#fdcdec', '#fc9bd9', '#fa6ac5', '#f838b2', '#f5089f', '#c4067e', '#92055e', '#540336', '#48022f', '#30021f'],'HarryQu1229')
    }
  </script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":300,"height":450},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>